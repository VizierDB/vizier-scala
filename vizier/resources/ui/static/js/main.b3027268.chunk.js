(this.webpackJsonpplayground=this.webpackJsonpplayground||[]).push([[0],{126:function(e,t,n){},1276:function(e,t,n){},1362:function(e,t,n){},1364:function(e,t,n){},1368:function(e,t,n){"use strict";n.r(t),n.d(t,"history",(function(){return ll})),n.d(t,"store",(function(){return hl}));var a=n(1),r=n(3),i=n.n(r),s=n(58),o=n.n(s),l=n(113),c=n(45),u=n(188),d=(n(599),n(518)),h=n(561),p=n.n(h),j=n(16),m=n(5),b=n(7),f={vizual:["deleteColumn","deleteRow","insertColumn","insertRow","moveColumn","moveRow","renameColumn","updateCell"]},v="ADD_FILTERED_COMMAND",O="COPY_CELL",g="HIDE_CELLS",x="NO_OP",C="REMOVE_FILTERED_COMMAND",w="REVERSE_ORDER",k="SET_FILTERED_MODULES",y=function(e){return{type:k,filter:e}},_=function(){return{type:g}},S=function(){return{type:w}},E={userSettings:new(function(){function e(t,n,a,r,i){Object(m.a)(this,e),this.filteredCommands=null!=t?t:f,this.cellDatasetRowLimit=null!=n?n:10,this.reversedOrder=null!=a&&a,this.hideCommands=null!=r&&r,this.clipboard=i}return Object(b.a)(e,[{key:"addCommandToHiddenList",value:function(t){var n={},a=this.filteredCommands[t.packageId];if(null!=a){for(var r=[],i=!1,s=0;s<a.length;s++)a[s]!==t.id?r.push(a[s]):i=!0;i||r.push(t.id),n[t.packageId]=r}else n[t.packageId]=[t.id];for(var o in this.filteredCommands)o!==t.packageId&&(n[o]=this.filteredCommands[o]);return new e(n,this.cellRowLimitValue,this.reversedOrder,this.hideCommands)}},{key:"cellRowLimit",value:function(){return this.cellDatasetRowLimit}},{key:"copyCell",value:function(t){var n=null;return t.isNewCell()||(n={commandSpec:t.commandSpec,arguments:t.module.command.arguments}),new e(this.filteredCommands,this.cellRowLimitValue,this.reversedOrder,this.hideCommands,n)}},{key:"isFiltered",value:function(e){var t=this.filteredCommands[e.packageId];return!(null==t||!t.find((function(t){return t===e.id})))}},{key:"hideFilteredCommands",value:function(){return this.hideCommands}},{key:"reverseOrder",value:function(){return new e(this.filteredCommands,this.cellRowLimitValue,!this.reversedOrder,this.hideCommands)}},{key:"removeCommandFromHiddenList",value:function(t){var n={};for(var a in this.filteredCommands)if(a===t.packageId){for(var r=this.filteredCommands[a],i=[],s=0;s<r.length;s++)r[s]!==t.id&&i.push(r[s]);i.length>0&&(n[a]=i)}else n[a]=this.filteredCommands[a];return new e(n,this.cellRowLimitValue,this.reversedOrder,this.hideCommands)}},{key:"setFilter",value:function(t){return new e(null!=t?t:{},this.cellRowLimitValue,this.reversedOrder,this.hideCommands)}},{key:"showNotebookReversed",value:function(){return this.reversedOrder}},{key:"toggleHideCells",value:function(){return new e(this.filteredCommands,this.cellRowLimitValue,this.reversedOrder,!this.hideCommands)}}]),e}())},N=n(190),A=n.n(N),D="REQUEST_SERVICE",I="RECEIVE_SERVICE",P="SERVICE_ERROR",R="REQUEST_AUTH",T="RECEIVE_AUTH",M="AUTH",L=function(e){return{type:P,error:e}},F=function(){return{type:R}},U=function(e){var t=JSON.parse(localStorage.getItem("user"));return t?t&&t.authdata?{Authorization:"Basic "+t.authdata}:(localStorage.removeItem("user"),null):(e(F()),null)},B=function(e,t){return function(n){if(window.env.API_BASIC_AUTH){var a=U(n);if(a){var r=t;return t&&t.headers?Object.assign(r.headers,a):t?r.headers=a:r={method:"GET",headers:a},fetch(e,r)}return new Promise((function(e,t){t({message:"No saved credentials.  Please enter credentials."})}))}return fetch(e,t)}},V=function(e,t){return null==t||t?e.text().then((function(e){try{var t=JSON.parse(e);return Promise.resolve(t)}catch(r){if(!(e&&e.startsWith("<!DOCTYPE html>")&&e.includes("SAMLRequest")))return Promise.resolve(JSON.parse("{}"));if(!0!==window.confirm("Your session has timed out.  Do you want to renew your session?"))return Promise.resolve(JSON.parse("{}"));var n=JSON.parse(localStorage.getItem("profile")),a="default";n&&n.client&&(a=n.client),window.open("/reauth?client="+a)}})):Promise.resolve(e.data)},z=function(){return function(e,t){var n=t().serviceApi.serviceUrl;return e({type:D}),B(n)(e).then((function(t){t.status>=200&&t.status<400?V(t).then((function(t){return e(function(e){return e.defaults&&e.defaults.profile&&localStorage.setItem("profile",JSON.stringify(e.defaults.profile)),{type:I,name:e.name,properties:e.defaults,environment:e.environment,links:e.links}}(t))})):401===t.status?e(F()):V(t).then((function(t){return e(L(t.message))}))})).catch((function(t){return e(L(t.message))}))}},H={homePageContent:null,projects:[]},q=function(e,t,n,a,r){return function(i){i(G(e,t,n,a,r))}},J=function(e,t,n,a){return function(r){return a&&r(a()),B(e,{method:"DELETE"})(r).then((function(e){204===e.status?r(t()):401===e.status?r(F()):404===e.status?r(n("Resource not found")):V(e).then((function(e){return r(n(e.message))}))})).catch((function(e){return r(n(e.message))}))}},K=function(e,t,n,a){return function(r){return a&&r(a()),B(e)(r).then((function(e){e.status>=200&&e.status<400?V(e).then((function(e){return r(t(e))})):401===e.status?r(F()):V(e).then((function(e){return r(n(e.message))}))})).catch((function(e){return r(n(e.message))}))}},W=function(e,t,n){var a=e.properties.find((function(e){return e.key===t}));return a?a.value:n},G=function(e,t,n,a,r){return function(i){return r&&i(r()),B(e,{method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}})(i).then((function(e){e.status>=200&&e.status<400?V(e).then((function(e){return i(n(e))})):401===e.status?i(F()):V(e).then((function(e){return i(a(e.message))}))})).catch((function(e){return i(a(e.message))}))}},Y=function(e,t,n,a,r,i){return function(s){var o={key:t};return null!==n&&(o.value=n),function(e,t,n,a,r,i){return i&&e(i()),B(t,{method:"PUT",body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json"}})(e).then((function(t){t.status>=200&&t.status<400?V(t).then((function(t){return e(a(t))})):401===t.status?e(F()):V(t).then((function(t){return e(r(t.message))}))})).catch((function(t){return e(r(t.message))}))}(s,e,{properties:[o]},a,r,i)}},Q="self",Z="branch.head",$="dataset.download",X="project.create",ee="project.import",te="project.list",ne="file.upload",ae="workflow.cancel",re="workflow.append",ie="module.freeze",se="module.thaw",oe=function(){function e(t){var n=this;Object(m.a)(this,e),this.getSelf=function(){return n.get(Q)},this.links=t}return Object(b.a)(e,[{key:"get",value:function(e){var t=this.links.find((function(t){return t.rel===e}));return null!=t?t.href:(console.log(null()),console.log("HATEOAS action "+e+" NOT FOUND IN: "+this.links),null)}},{key:"getAnnotations",value:function(e,t){var n=this.get("annotations.get");return n+="?column="+e+"&row="+t}},{key:"getDatasetUrl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.get(Q);return a+="?offset="+e+"&limit="+t,n&&(a+="&profile="+n),a}},{key:"getNotebookUrl",value:function(e,t,n){var a=this.get(te);return null!=a?(a+="/"+e+"/branches/"+t,a+=null!=n?"/workflows/"+n:"/head"):null}},{key:"getProjectUrl",value:function(e){var t=this.get(te);return null!=t?t+"/"+e:null}},{key:"has",value:function(e){return null!=this.links.find((function(t){return t.rel===e}))}}]),e}(),le=function(){function e(t,n,a,r){Object(m.a)(this,e),this.id=t,this.name=n,this.isDefault=a,this.links=r}return Object(b.a)(e,[{key:"fromJson",value:function(e){return this.id=e.id,this.name=W(e,"name","undefined"),this.isDefault=e.isDefault,this.links=new oe(e.links),this}},{key:"updateName",value:function(t){return new e(this.id,t,this.isDefault,this.links)}}]),e}(),ce=function(e){return e.sort((function(e,t){return e.name.localeCompare(t.name)}))},ue=n(616),de=function(e){return ue.tz(e,"UTC").tz(ue.tz.guess()).format("DD-MMM-YYYY HH:mm:ss")},he="deleteColumn",pe="deleteRow",je="dropDataset",me="insertColumn",be="insertRow",fe="load",ve="moveColumn",Oe="moveRow",ge="renameColumn",xe="renameDataset",Ce="sortDataset",we="updateCell",ke="vizual",ye="asc",_e="desc",Se=function(e,t,n){return{packageId:ke,commandId:ve,arguments:[{id:"dataset",value:e},{id:"column",value:t},{id:"position",value:n}]}},Ee=function(e,t,n){return{packageId:ke,commandId:Oe,arguments:[{id:"dataset",value:e},{id:"row",value:t},{id:"position",value:n}]}},Ne=function(){function e(){Object(m.a)(this,e)}return Object(b.a)(e,[{key:"fromJson",value:function(e){return this.id=e.id,this.name=W(e,"name","undefined"),this.createdAt=de(e.createdAt),this.lastModifiedAt=de(e.lastModifiedAt),this.defaultBranch=e.defaultBranch,this.links=new oe(e.links),this}}]),e}(),Ae=function(){function e(t,n,a,r){Object(m.a)(this,e),this.id=t,this.name=n,this.links=a,this.branches=r}return Object(b.a)(e,[{key:"addBranch",value:function(t){for(var n=[t],a=0;a<this.branches.length;a++)n.push(this.branches[a]);return ce(n),new e(this.id,this.name,this.links,n)}},{key:"deleteBranch",value:function(t){for(var n=[],a=0;a<this.branches.length;a++){var r=this.branches[a];r.id!==t&&n.push(r)}return new e(this.id,this.name,this.links,n)}},{key:"findBranch",value:function(e){if(null!=e)return this.branches.find((function(t){return t.id===e}))}},{key:"fromJson",value:function(e){this.id=e.id,this.name=W(e,"name"),this.links=new oe(e.links),this.branches=[];for(var t=0;t<e.branches.length;t++)this.branches.push((new le).fromJson(e.branches[t]));return ce(this.branches),this}},{key:"getDefaultBranch",value:function(){return this.branches.find((function(e){return e.isDefault}))}},{key:"isGrouped",value:function(e){if(e.command.type===ke){var t=e.command.id;if(t!==fe&&t!==je&&t!==xe&&t!==Ce)return!0}return!1}},{key:"updateBranch",value:function(t){for(var n=this.id,a=this.name,r=this.links,i=this.branches,s=[],o=0;o<i.length;o++){var l=i[o];l.id===t.id?s.push(t):s.push(l)}return new e(n,a,r,s)}},{key:"updateName",value:function(t){return new e(this.id,t,this.links,this.branches)}}]),e}(),De=function(){function e(t,n,a){Object(m.a)(this,e),this.title=t,this.message=n,this.status=null!=a?a:400}return Object(b.a)(e,[{key:"is404",value:function(){return 404===this.status}}]),e}(),Ie="PROJECT_FETCH_ERROR",Pe="RECEIVE_PROJECT",Re="REQUEST_PROJECT",Te="PROJECT_ACTION_ERROR",Me="RECEIVE_PROJECT_RESOURCE",Le="REQUEST_PROJECT_ACTION",Fe="UPDATE_PROJECT",Ue="UPDATE_RESOURCE",Be="UPDATE_WORKFLOW",Ve=function(e,t,n){return function(a,r){if(r().serviceApi.links){var i=r().serviceApi.links.getProjectUrl(e);return a(Ye()),B(i)(a).then((function(e){e.status>=200&&e.status<400?V(e).then((function(e){var r=(new Ae).fromJson(e),i=null;null!=(i=null!=t?r.branches.find((function(e){return e.id===t})):r.branches.find((function(e){return e.isDefault})))?(a({type:Pe,project:r,branch:i}),a(n(r,i))):a(Ge("Unknown branch "+t,404))})):401===e.status?a(F()):404===e.status?V(e).then((function(e){return a(Ge(e.message,404))})):V(e).then((function(t){return a(Ge(t.message,e.status))}))})).catch((function(e){return a(Ge(e.message))}))}}},ze=function(e){return{type:Me,resource:e}},He=function(e){return{type:Fe,project:e}},qe=function(e,t,n){return function(a){var r=e.findBranch(t);null!=r?(a({type:Pe,project:e,branch:r}),n&&a(n(e,r))):a(Ge("Unknown branch "+t,404))}},Je=function(e,t){return function(n){n(Y(e.links.get("project.update"),"name",t,(function(t){return function(n){return n({type:Fe,project:e.updateName(W(t,"name"))})}}),(function(e){return We("Error updating project",e)}),Qe))}},Ke=function(e,t){return{type:Te,error:null}},We=function(e,t){return{type:Te,error:new De(e,t)}},Ge=function(e,t,n){return null==n&&(n="Error fetching project"),{type:Ie,error:new De(n,e,t)}},Ye=function(){return{type:Re}},Qe=function(){return{type:Le}},Ze=function(){function e(t,n,a,r){Object(m.a)(this,e),this.id=t,this.name=n,this.columns=a,this.links=r}return Object(b.a)(e,[{key:"fromJson",value:function(e){return this.id=e.id,this.name=e.name,this.columns=e.columns,this.rowCount=e.rowCount,this.links=new oe(e.links),this}}]),e}(),$e=function(){function e(t,n,a,r,i,s,o){var l=this,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;Object(m.a)(this,e),this.isProfiled=function(){return null!=l.properties&&Object.keys(l.properties).length>0&&null!=l.properties.is_profiled},this.id=t,this.name=n,this.columns=a,this.rows=r,this.rowCount=i,this.offset=s,this.links=o,this.moduleId=c,this.properties=u}return Object(b.a)(e,[{key:"fromJson",value:function(e){return this.id=e.id,this.name=e.name,this.columns=e.columns,this.rows=e.rows,this.rowCount=e.rowCount,this.offset=e.offset,this.links=new oe(e.links),this.moduleId=e.moduleId,this.properties=e.properties,this}},{key:"hasAnnotations",value:function(e,t){var n=this.rows.find((function(e){return e.id===t}));return n&&n.rowAnnotationFlags&&!1===n.rowAnnotationFlags[e]}},{key:"rowAtIndex",value:function(e){return this.rows[e]}},{key:"updateAnnotations",value:function(t,n,a){var r=this.hasAnnotations(t,n),i=null;if(a&&r)return this;if(!a&&!r)return this;if(a&&!r)(i=this.annotatedCells.slice()).push({column:t,row:n});else if(!a&&r){i=[];for(var s=0;s<this.annotatedCells.length;s++){var o=this.annotatedCells[s];o.column===t&&o.row===n||i.push(o)}}return new e(this.id,this.name,this.columns,this.rows,this.offset,this.links,i,this.moduleId,this.properties)}}]),e}(),Xe=function(){function e(){var t=this;Object(m.a)(this,e),this.actionIsAppend=function(){return"apd"===t.action},this.actionIsCreate=function(){return"cre"===t.action},this.actionIsDelete=function(){return"del"===t.action},this.actionIsInsert=function(){return"ins"===t.action},this.actionIsReplace=function(){return"upd"===t.action}}return Object(b.a)(e,[{key:"fromJson",value:function(e){return this.id=e.id,this.createdAt=de(e.createdAt),this.action=e.action,this.packageId=e.packageId,this.commandId=e.commandId,this}}]),e}(),et=function(){function e(t){Object(m.a)(this,e),this.engine=t}return Object(b.a)(e,[{key:"fromJson",value:function(e){this.id=e.id,this.createdAt=de(e.createdAt),this.state=e.state,this.readOnly=e.readOnly,this.datasets={};for(var t=0;t<e.datasets.length;t++){var n=(new Ze).fromJson(e.datasets[t]);this.datasets[n.id]=n}return this.modules=e.modules,this.links=new oe(e.links),this.tableOfContents=e.tableOfContents,this}},{key:"isRunning",value:function(){return this.links.has(ae)}},{key:"getCommandSpec",value:function(e){return this.engine.packages.getCommandSpec(e.packageId,e.commandId)}}]),e}(),tt=n(8),nt=n(9),at=n(185),rt=n.n(at),it="CONTENT_CHART",st="CONTENT_DATASET",ot="CONTENT_ERROR",lt="CONTENT_HTML",ct="CONTENT_MARKDOWN",ut="CONTENT_HIDE",dt="CONTENT_TEXT",ht="CONTENT_JAVASCRIPT",pt="CONTENT_TIMESTAMPS",jt="CONTENT_MULTIPLE",mt=function e(t,n){var a=this;Object(m.a)(this,e),this.isChart=function(){return a.type===it},this.isDataset=function(){return a.type===st},this.isError=function(){return a.type===ot},this.isHidden=function(){return a.type===ut},this.isHtml=function(){return a.type===lt},this.isMarkdown=function(){return a.type===ct},this.isText=function(){return a.type===dt},this.isTimestamps=function(){return a.type===pt},this.isJavascript=function(){return a.type===ht},this.isMultiple=function(){return a.type===jt},this.type=t,this.isFetching=null!=n&&n},bt=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e,a,r){var i;return Object(m.a)(this,n),(i=t.call(this,it,r)).name=e,i.dataset=a,i}return Object(b.a)(n,[{key:"setFetching",value:function(){return new n(this.name,this.dataset,!0)}}]),n}(mt),ft=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e,a){var r;return Object(m.a)(this,n),(r=t.call(this,st,a)).dataset=e,r}return Object(b.a)(n,[{key:"setFetching",value:function(){return new n(this.dataset,!0)}}]),n}(mt),vt=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e,a){var r;return Object(m.a)(this,n),(r=t.call(this,ot,a)).error=e,r}return Object(b.a)(n,[{key:"setFetching",value:function(){return new n(this.error,!0)}}]),n}(mt),Ot=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){return Object(m.a)(this,n),t.call(this,ut,e)}return Object(b.a)(n,[{key:"setFetching",value:function(){return new n(!0)}}]),n}(mt),gt=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e,a){var r;Object(m.a)(this,n),(r=t.call(this,lt,a)).lines=[];for(var i=0;i<e.length;i++){var s=e[i];null!=s.type?"text/html"===s.type&&r.lines.push(s.value):r.lines.push(s)}return r}return Object(b.a)(n,[{key:"setFetching",value:function(){return new n(this.lines,!0)}}]),n}(mt),xt=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e,a){var r;Object(m.a)(this,n),(r=t.call(this,ht,a)).lines=[];for(var i=0;i<e.length;i++){var s=e[i];null!=s.type?"text/javascript"===s.type&&r.lines.push(s):r.lines.push(s)}return r}return Object(b.a)(n,[{key:"setFetching",value:function(){return new gt(this.lines,!0)}}]),n}(mt),Ct=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e,a){var r;Object(m.a)(this,n),(r=t.call(this,ct,a)).lines=[];for(var i=0;i<e.length;i++){var s=e[i];null!=s.type?"text/markdown"===s.type&&r.lines.push(s.value):r.lines.push(s)}return r}return Object(b.a)(n,[{key:"setFetching",value:function(){return new n(this.lines,!0)}}]),n}(mt),wt=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e,a){var r;Object(m.a)(this,n),(r=t.call(this,dt,a)).lines=[];for(var i=0;i<e.length;i++){var s=e[i];null!=s.type?"text/plain"===s.type&&r.lines.push(s.value):r.lines.push(s)}return r}return Object(b.a)(n,[{key:"setFetching",value:function(){return new n(this.lines,!0)}}]),n}(mt),kt=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e,a){var r;Object(m.a)(this,n),(r=t.call(this,jt,a)).outputs={};var i=Object(at.groupBy)(e,"type");for(var s in i)switch(s){case"text/plain":case"text/markdown":case"text/html":r.outputs[s]=i[s].map((function(e){return e.value})).join("\n");break;case"dataset/view":r.outputs[s]=(new $e).fromJson(i[s][0].value);break;case"chart/view":r.outputs[s]=i[s][0].value;break;default:r.outputs[s]=i[s][0]}return r}return Object(b.a)(n,[{key:"setFetching",value:function(){return new n(this.outputs,!0)}}]),n}(mt),yt=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e,a,r){var i;return Object(m.a)(this,n),(i=t.call(this,pt)).createdAt=e,i.startedAt=a,i.finishedAt=r,i}return Object(b.a)(n,[{key:"setFetching",value:function(){return new n(this.createdAt,this.startedAt,this.finishedAt,!0)}}]),n}(mt),_t="";""===_t&&(_t="/");var St=_t,Et=St+"projects/:project_id",Nt=Et+"/branches/:branch_id",At=Nt+"/history",Dt=Nt+"/head",It=Nt+"/workflows/:workflow_id",Pt=Dt+"/spreadsheet/:dataset_id",Rt=Dt+"/errors/:dataset_id",Tt=It+"/spreadsheet/:dataset_id",Mt=It+"/errors/:dataset_id",Lt=40,Ft=13,Ut=27,Bt=46,Vt=38,zt=9,Ht=0,qt=1,Jt=2,Kt=3,Wt=function(e,t){if(e<0)return"?";if(0===e)return"0 Bytes";var n=t||2,a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][a]},Gt=function(e){return""!==e.trim()},Yt=function(e){return e&&!/[^\d]/.test(e)},Qt=function(e,t){return St+"projects/"+e+"/branches/"+t+"/history"},Zt=function(e,t,n){var a=St+"projects/"+e+"/branches/"+t;return a+=null!=n?"/workflows/"+n:"/head"},$t=function(e,t,n,a){var r=St+"projects/"+e+"/branches/"+t;return r+=null!=a?"/workflows/"+a+"/spreadsheet/"+n:"/head/spreadsheet/"+n},Xt=function(e,t,n,a){var r=St+"projects/"+e+"/branches/"+t;return r+=null!=a?"/workflows/"+a+"/errors/"+n:"/head/errors/"+n},en=function(e,t){return null!=e?e:t},tn="RESOURCE_BRANCH",nn="RESOURCE_MAIN_PAGE",an="RESOURCE_NOTEBOOK",rn="RESOURCE_DATASET_CAVEAT",sn=function e(t,n){var a=this;Object(m.a)(this,e),this.isBranch=function(){return a.resourceType===tn},this.isMainPage=function(){return a.resourceType===nn},this.isNotebook=function(){return a.resourceType===an},this.isError=function(){return a.type===ot},this.isChart=function(){return a.type===it},this.isDataset=function(){return a.type===st},this.isDatasetCaveat=function(){return a.type===rn},this.resourceType=t,this.type=t,this.content=n},on=function(){return new sn(tn)},ln=function(e,t){return new sn(it,{name:e,dataset:t})},cn=function(e,t){return new sn(rn,{dataset:e,annotations:t})},un=function(e){return new sn(st,e)},dn="UPDATE_BRANCH",hn="RECEIVE_BRANCH_HISTORY",pn="REQUEST_BRANCH",jn=function(e,t,n,a){return function(r){r(J(t.links.get("branch.delete"),(function(){r(He(e.deleteBranch(t.id)));var i=e.getDefaultBranch().id;return a.push(n(e.id,i)),{type:x}}),(function(e){return We("Error deleting branch",e)}),bn))}},mn=function(e,t){return function(n){n(null==t?qe(e):K(t.links.getSelf(),(function(n){return function(a){for(var r=n.workflows,i=[],s=0;s<r.length;s++){var o=r[s];i.push((new Xe).fromJson(o))}a(qe(e,t.id)),a({type:hn,workflows:i})}}),(function(e){return Ge(e,400,"Error fetching branch history")}),bn))}},bn=function(){return{type:pn}},fn=function(e,t,n){return function(a){a(Y(t.links.get("branch.update"),"name",n,(function(n){return function(a){var r=t.updateName(W(n,"name"));return a({type:dn,branch:r,project:e.updateBranch(r)})}}),(function(e){return We("Error updating branch",e)}),Qe))}},vn={fetchError:null,isFetching:!1,workflows:null},On=function(){function e(t,n,a,r,i){Object(m.a)(this,e),this.id=t,this.name=n,this.artifact_type=r,this.mime_type=a,this.links=i}return Object(b.a)(e,[{key:"fromJson",value:function(e){return this.id=e.id,this.name=e.name,this.artifact_type=e.category,this.mime_type=e.objType,this.links=new oe(e.links),this}}]),e}(),gn="INSERT_AFTER",xn="INSERT_BEFORE",Cn=function(e){return"__"+e+"__"},wn=function(){function e(){Object(m.a)(this,e)}return Object(b.a)(e,[{key:"fromJson",value:function(e,t){this.id=e.id,this.state=e.state,this.command=e.command,this.outputs=e.outputs,this.datasets=[];for(var n=0;n<e.datasets.length;n++){var a=e.datasets[n],r=a.id,i=a.name,s=t[r];this.datasets.push(new Ze(r,i,s.columns,s.links))}this.artifacts=[];for(var o=0;o<e.artifacts.length;o++){var l=e.artifacts[o],c=l.id,u=l.name,d=l.objType,h=l.category;this.artifacts.push(new On(c,u,d,h,e.links))}for(var p in this.charts=e.charts,this.text=e.text,this.links=new oe(e.links),this.timestamps={},e.timestamps)this.timestamps[p]=de(e.timestamps[p]);return this.locked=e.locked,this}}]),e}(),kn=function(){function e(t,n,a){var r=this;Object(m.a)(this,e),this.hasActiveCells=function(){return 0===r.workflow.state||1===r.workflow.state},this.workflow=t,this.cells=n,this.cellCounter=null!=a?a:0,this.id=t.id,this.createdAt=t.createdAt,this.readOnly=t.readOnly,this.datasets=t.datasets}return Object(b.a)(e,[{key:"fromWorkflow",value:function(e){this.cells=[];for(var t=0;t<e.modules.length;t++){var n=(new wn).fromJson(e.modules[t],e.datasets);this.cells.push(new yn(n.id,n,e.getCommandSpec(n.command),Sn(n)))}return this}},{key:"dismissChangesForCell",value:function(t){for(var n=[],a=0;a<this.cells.length;a++){var r=this.cells[a];r.id===t&&r.isNewCell()||n.push(r)}return new e(this.workflow,n,this.cellCounter)}},{key:"editCell",value:function(t,n){if(null!=t){for(var a=[],r=0;r<this.cells.length;r++){var i=this.cells[r];if(i.id===t.id)if(null!=n){var s=new yn(Cn(this.cellCounter));n===xn?(a.push(s),a.push(i)):(a.push(i),a.push(s))}else a.push(new yn(i.id,i.module,i.commandSpec,i.output,!0));else a.push(i)}return new e(this.workflow,a,this.cellCounter+1)}return 0===this.cells.length?new e(this.workflow,[new yn(Cn(this.cellCounter))],this.cellCounter+1):this}},{key:"getDatasetForModule",value:function(e,t){var n=e.datasets.find((function(e){return e.name===t})).id,a=this.datasets[n];return new Ze(n,t,a.columns,a.links)}},{key:"isEmpty",value:function(){return 0===this.cells.length}},{key:"lastCell",value:function(){return this.cells.length>0?this.cells[this.cells.length-1]:null}},{key:"replaceOutput",value:function(t,n){for(var a=[],r=0;r<this.cells.length;r++){var i=this.cells[r],s=i.module;null!=s&&s.id===t?a.push(new yn(s.id,s,i.commandSpec,n)):a.push(i)}return new e(this.workflow,a,this.cellCounter)}},{key:"setFetching",value:function(t){for(var n=[],a=0;a<this.cells.length;a++){var r=this.cells[a],i=r.module;null!=i&&i.id===t?n.push(new yn(i.id,i,r.commandSpec,r.output.setFetching())):n.push(r)}return new e(this.workflow,n,this.cellCounter)}},{key:"updateWorkflow",value:function(t,n){for(var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],i=Math.min(this.cells.length,t.modules.length),s=0;s<i;){var o=this.cells[s];if(o.isNewCell()&&o.id!==n)r.push(o);else{var l=(new wn).fromJson(t.modules[s],t.datasets);if(o.id!==l.id)break;var c=_n(o,l,a);r.push(new yn(l.id,l,o.commandSpec,c)),s++}}for(var u=s;u<t.modules.length;u++){var d=(new wn).fromJson(t.modules[u],t.datasets);r.push(new yn(d.id,d,t.getCommandSpec(d.command),Sn(d)))}return new e(t,r,this.cellCounter)}}]),e}(),yn=function(){function e(t,n,a,r){var i=this;Object(m.a)(this,e),this.isActive=function(){return i.isPending()||i.isRunning()},this.isErrorOrCanceled=function(){return i.isCanceled()||i.isError()},this.isNewCell=function(){return null==i.module},this.id=t,this.module=n,this.commandSpec=a,this.output=r}return Object(b.a)(e,[{key:"isCanceled",value:function(){return null!=this.module&&2===this.module.state}},{key:"isError",value:function(){return null!=this.module&&3===this.module.state}},{key:"isPending",value:function(){return null!=this.module&&0===this.module.state}},{key:"isRunning",value:function(){return null!=this.module&&1===this.module.state}},{key:"isSuccess",value:function(){return null!=this.module&&4===this.module.state}},{key:"isFrozen",value:function(){return null!=this.module&&5===this.module.state}}]),e}(),_n=function(e,t,n){var a=e.output;return!n&&(e.output.type!==dt||e.output.lines&&0!==e.output.lines.length)||(a=Sn(t)),a},Sn=function(e){var t,n=e.outputs.stdout;if(1===n.length){var a=n[0];t="chart/view"===a.type?new bt(a.value.data.name,a.value.result):"dataset/view"===a.type?new ft(new $e(a.value.id,a.value.name).fromJson(a.value),!1):"text/html"===a.type?new gt(n):"text/markdown"===a.type?new Ct(n):"text/javascript"===a.type?new xt(n):new wt(n)}else t=n.length>1?new kt(n):new wt([]);return t},En="RECEIVE_WORKFLOW",Nn="REQUEST_WORKFLOW",An="SET_ACTIVE_NOTEBOOK_CELL",Dn="UPDATE_NOTEBOOK",In=function(e,t,n){return function(a,r){var i=r().serviceApi;if(i.links){var s=r().serviceApi.links.getNotebookUrl(e.id,t.id,n);return a({type:Nn}),B(s)(a).then((function(e){e.status>=200&&e.status<400?V(e).then((function(e){return a({type:En,workflow:new et(i.engine).fromJson(e)})})):401===e.status?a(F()):404===e.status?V(e).then((function(e){return a(Pn(e.message,404))})):V(e).then((function(t){return a(Pn(t.message,e.status))}))})).catch((function(e){return a(Pn(e.message))}))}}},Pn=function(e,t){return Ge(e,t,"Error fetching notebook")},Rn=function(e,t){return e.status===t?V(e):V(e).then((function(e){throw e}))},Tn=function(e,t){return function(n){return B(t.module.links.getSelf())(n).then((function(e){return Rn(e,200)}),(function(e){return n(L(e.message))})).then((function(a){if(a.state!==t.module.state)return clearInterval(window.pollingTimer),B(e.workflow.links.get(Z))(n).then((function(e){return Rn(e,200)}),(function(e){return n(L(e.message))})).then((function(a){return n(Kn(e,a,t.id))}),(function(e){return n(Pn(e.message))}))}),(function(a){return n(Ln(e,t.module,"module status",a.message))}))}},Mn=function(){return new URLSearchParams(window.location.search).get("cell-output")},Ln=function(e,t,n,a){return function(r){var i=new De("Error loading "+n,a),s=e.replaceOutput(t.id,new vt(i));return r(Kn(s))}},Fn=function(e,t,n){return function(a){var r=!1;if(1===t.outputs.stdout.length&&"chart/view"===t.outputs.stdout[0].type&&(r=t.outputs.stdout[0].value.data.name===n),r){var i=t.outputs.stdout[0].value,s=new bt(i.data.name,i.result);a(Kn(e.replaceOutput(t.id,s)))}else{for(var o=null,l=0;l<t.charts.length;l++)if(t.charts[l].name===n){o=t.charts[l];break}if(null!==o){var c=new oe(o.links).getSelf();a(K(c,(function(a){var r=new bt(n,a.data),i=e.replaceOutput(t.id,r);return Kn(i)}),(function(n){return Ln(e,t,"chart",n)}),(function(){return function(e,t){return function(n){return n(Kn(e.setFetching(t.id)))}}(e,t)})))}}}},Un=function(e,t,n,a,r){return function(i){var s=n.links.getDatasetUrl(a,r);return i(K(s,(function(a){return Kn(e.replaceOutput(t.id,new ft(new $e(a.id,n.name,n.activeCell).fromJson(a))))}),(function(a){return Ln(e,t,"dataset "+n.name,a)})))}},Bn=function(e,t){return function(n){var a=function(e){var t=e.outputs.stdout,n=null;if(1===t.length){var a=t[0];n="text/html"===a.type?new gt(t):"text/markdown"===a.type?new Ct(t):"text/javascript"===a.type?new xt(t):"chart/view"===a.type?new bt(a.value.data.name,a.value.result):"dataset/view"===a.type?new ft(new $e(a.value.id,a.value.name).fromJson(a.value),!1):new wt(t)}else t.length>1&&(n=new kt(t));return null===n&&(n=new wt([])),n}(t);n(Kn(e.replaceOutput(t.id,a)))}},Vn=function(e,t,n,a){return function(r){return r(qn(e,t,"POST",n,a))}},zn=function(e,t,n,a){return function(r){return r(qn(e,t,"PUT",n,a))}},Hn=function(e,t,n){return function(a){a(qn(e,t,"POST",{},n))}},qn=function(e,t,n,a,r){return function(i){return i(Qe()),B(t,{method:n,body:JSON.stringify(a),headers:{Accept:"application/json","Content-Type":"application/json"}})(i).then((function(t){200===t.status?V(t).then((function(t){return i(Kn(e,t,r))})):401===t.status?i(F()):V(t).then((function(e){return i(We("Error updating notebook",e.message))}))})).catch((function(e){return i(We("Error updating notebook",e.message))}))}},Jn=function(e,t,n,a,r,i,s,o){return function(l){var c=s.value.file,u=new FormData;return u.append("file",c),function(e,t,n){return function(a){if(window.env.API_BASIC_AUTH){var r=U(a);if(r){var i=t;t&&t.headers?Object.assign(i.headers,r):t?i.headers=r:i={method:"GET",headers:r},n=Object(j.a)(Object(j.a)({},n),{},{headers:i.headers});var s=i.body?i.body:null;return"POST"===i.method?A.a.post(e,s,n):A.a.get(e,n)}return new Promise((function(e,t){t({message:"No saved credentials.  Please enter credentials."})}))}return("POST"===t.method?A.a.post(e,t.body,n):A.a.get(e,n)).then((function(e){return e}))}}(i,{method:"POST",body:u},{onUploadProgress:function(e){o&&o(Math.round(100*e.loaded/e.total))}})(l).then((function(i){i.status>=200&&i.status<400?V(i,!1).then((function(i){return console.log("FILE RESPONSE"),console.log(i),s.value.fileid=i.id,console.log("REQ"),console.log(n),l(a(e,t,n,r))})):401===i.status?l(F()):V(i,!1).then((function(e){return l(We("Error updating workflow",e.message))}))})).catch((function(e){var t=e.message;"NetworkError when attempting to fetch resource."===t&&(t="Connection closed by server. The file size may exceed the server's upload limit."),l(We("Error updating workflow",t))}))}},Kn=function(e,t,n){if(null!=t){var a=new et(e.workflow.engine).fromJson(t);e=e.updateWorkflow(a,n)}return{type:Dn,notebook:e}},Wn={activeCell:null,fetchError:null,isFetching:!1,notebook:null,reversed:!1},Gn=function(){function e(t,n,a){Object(m.a)(this,e),this.column=t,this.row=n,this.content=a}return Object(b.a)(e,[{key:"isActive",value:function(e,t){return this.column===e&&this.row===t}}]),e}(),Yn=function(){function e(t,n,a){Object(m.a)(this,e),this.column=-1,this.row=-1}return Object(b.a)(e,[{key:"isActive",value:function(e,t){return!1}}]),e}(),Qn=function(){function e(){Object(m.a)(this,e)}return Object(b.a)(e,[{key:"isFetching",value:function(){return!0}},{key:"isError",value:function(){return!1}}]),e}(),Zn=function(){function e(t,n){Object(m.a)(this,e),this.title=t,this.message=n}return Object(b.a)(e,[{key:"isFetching",value:function(){return!1}},{key:"isError",value:function(){return!0}}]),e}(),$n=function(){function e(t){Object(m.a)(this,e),this.items=t}return Object(b.a)(e,[{key:"isFetching",value:function(){return!1}},{key:"isError",value:function(){return!1}}]),e}(),Xn="SUBMIT_UPDATE_REQUEST",ea="REQUEST_CAVEATS",ta="SET_ANNOTATIONS",na="UPDATE_DATASET_ANNOTATIONS",aa=function(e,t){return function(n){var a=e.id,r=e.name,i=e.offset,s=null,o=0;i&&(o=i),s=t||e.links.getDatasetUrl(o,25),n(K(s,(function(e){return function(t){return t(ze(un(new $e(a,r).fromJson(e))))}}),(function(e){return We("Error loading spreadsheet",e)}),Qe))}},ra=function(e,t,n,a){return function(r){var i=e.links.getDatasetUrl(t,n);r(K(i,(function(t){return function(n){return t.moduleId=a,n(ze(un(new $e(t.id,e.name).fromJson(t))))}}),(function(e){return We("Error loading spreadsheet",e)})))}},ia=function(e,t){return function(n){var a=null;a=t||e.links.self+"/annotations",n(ca()),n(K(a,(function(t){return function(n){return n(ze(cn(new $e(e.id,e.name),new $n(t))))}}),(function(e){return We("Error loading dataset errors",e)}),Qe))}},sa=function(e,t,n,a,r){return function(i){return G(i,t,{reason:n,repair:a,acknowledge:r},(function(t){return function(n){return n(ze(cn(new $e(e.id,e.name),new $n(t.annotations))))}}),(function(e){var t=new Zn("Error loading annotations",e),n=new Gn(-1,"-1",t);return pa(n)}),Qe)}},oa=function(e,t,n,a){return function(r){var i=n;r(la());var s={method:"POST",body:JSON.stringify(Object(j.a)({},n)),headers:{Accept:"application/json","Content-Type":"application/json"}},o=null;if(a){var l=e.workflow.modules[a].links[0].href;o=B(l,s)}else o=B(e.workflow.links.get(re),s);return o(r).then((function(n){n.status>=200&&n.status<400?V(n).then((function(n){var s=t,o="__0__";if(a){var l=a,c=n.modules[l].id;o=n.modules[a-1].id,s.moduleId=c,s.moduleIndex=l}if(i.packageId===ke&&i.commandId===we&&(s.rows.find((function(e){return e.id===i.arguments[2].value})).values[i.arguments[1].value]=i.arguments[3].value),i.packageId===ke&&i.commandId===ge)s.columns.find((function(e){return e.id===i.arguments[1].value})).name=i.arguments[2].value;else if("mimir"===i.packageId&&"comment"===i.commandId){var u=i.arguments[1].value[0][0].value,d=s.columns.findIndex((function(e){return e.name===u}));s.rows.find((function(e){return e.id===i.arguments[1].value[0][2].value})).rowAnnotationFlags[d]=!1}r(Kn(e,n,o)),r(ze(un(s)))})):401===n.status?r(F()):V(n).then((function(e){return r(We("Error updating spreadsheet",e.message))}))})).catch((function(e){return r(We("Error updating spreadsheet",e.message))}))}},la=function(){return{type:Xn}},ca=function(){return{type:ea}},ua=function(){return pa(new Yn)},da=function(e,t,n){return function(a){var r="?column="+t+"&row="+n,i="";return i=e.links.annotations?e.links.annotations+r:e.links.links[3].href+r,a(t<0?ua():K(i,(function(e){var a=new $n(e),r=new Gn(t,n,a);return pa(r)}),(function(e){var a=new Zn("Error loading annotations",e),r=new Gn(t,n,a);return pa(r)}),(function(){return pa(new Gn(t,n,new Qn))})))}},ha=function(e,t,n,a,r,i){return e(G(t,n,(function(t){var n=new $n(t.annotations),s=new Gn(r,i,n),o=t.annotations.length>0;return e({type:na,dataset:a.updateAnnotations(r,i,o)}),pa(s)}),(function(e){var t=new Zn("Error loading annotations",e),n=new Gn(r,i,t);return pa(n)}),(function(){return pa(new Gn(r,i,new Qn))})))},pa=function(e){return{type:ta,annotations:e}},ja={fetchError:null,isFetching:!1,workflows:null},ma={activeCell:null,fetchError:null,isFetching:!1,notebook:null,reversed:!1},ba="CLEAR_PROJECT_ACTION_ERROR",fa="REQUEST_PROJECTS",va="RECEIVE_PROJECTS",Oa="SET_PROJECT_CREATE_ERROR",ga="SET_PROJECT_DELETE_ERROR",xa="SET_PROJECTS_FETCH_ERROR",Ca=function(e,t,n){return function(a){var r=t.trim();""===r&&(r="New Project"),a(Aa("Create Project ..."));var i={properties:[]};""!==t.trim()&&i.properties.push({key:"name",value:r}),a(q(e,i,(function(e){return a(ka()),n.push(Zt(e.id,e.defaultBranch)),{type:x}}),_a))}},wa=function(e){return function(t){t(J(e.links.get("project.delete"),ka,Sa,(function(){return Aa("Delete Project ...")})))}},ka=function(){return function(e,t){if(t().serviceApi.links){var n=t().serviceApi.links.get(te);return e(Aa()),B(n)(e).then((function(t){t.status>=200&&t.status<400?V(t).then((function(t){return e(Da(t))})):401===t.status?e(F()):V(t).then((function(t){return e(Na(t.message))}))})).catch((function(t){return e(Na(t.message))}))}}},ya=function(e,t,n){return function(a){var r=t,i=new FormData;return i.append("file",r),B(e,{method:"POST",body:i})(a).then((function(e){e.status>=200&&e.status<400?V(e).then((function(e){console.log("FILE RESPONSE"),console.log(e);var t=e.defaultBranch;return t||(t=e.branches[0].id),n.push(Zt(e.id,t)),{type:x}})):401===e.status?a(F()):V(e).then((function(e){return a(Ea("Error updating workflow",e.message))}))})).catch((function(e){var t=e.message;"NetworkError when attempting to fetch resource."===t&&(t="Connection closed by server. The file size may exceed the server's upload limit."),a(Ea("Error updating workflow",t))}))}},_a=function(e){return{type:Oa,error:e}},Sa=function(e){return{type:ga,error:e}},Ea=function(e){return{type:"SET_PROJECTS_UPLOAD_ERROR",error:e}},Na=function(e){return{type:xa,error:e}},Aa=function(e){return{type:fa,message:e}},Da=function(e){for(var t=[],n=0;n<e.projects.length;n++)t.push((new Ne).fromJson(e.projects[n]));return ce(t),{type:va,projects:t,links:new oe(e.links)}},Ia="Loading Projects ...",Pa={actionError:null,fetchError:null,fetchMessage:Ia,isFetching:!1,projects:null,links:null},Ra={actionError:null,branch:null,fetchError:null,isActive:!1,isFetching:!1,project:null,resource:null},Ta="bool",Ma="code",La="colid",Fa="dataset",Ua="decimal",Ba="fileid",Va="int",za="list",Ha="record",qa="rowid",Ja="string",Ka=function(){function e(t){Object(m.a)(this,e),this.packageId=t}return Object(b.a)(e,[{key:"fromJson",value:function(e){return this.id=e.id,this.name=e.name,this.description=e.description,this.suggest=e.suggest,e.parameters.sort((function(e,t){return e.index-t.index})),this.parameters=Za(e.parameters),this.codeParameter=this.parameters.find((function(e){return e.datatype===Ma})),this.fileParameter=this.parameters.find((function(e){return e.datatype===Ba})),this}}]),e}(),Wa=function(){function e(){Object(m.a)(this,e)}return Object(b.a)(e,[{key:"fromJson",value:function(e){this.id=e.id,this.name=e.name,this.category=e.category,this.elements=[],this.commands={};for(var t=0;t<e.commands.length;t++){var n=new Ka(e.id).fromJson(e.commands[t]);this.commands[n.id]=n,this.elements.push(n)}return ce(this.elements),this}},{key:"toList",value:function(){return this.elements}}]),e}(),Ga=function(){function e(){Object(m.a)(this,e)}return Object(b.a)(e,[{key:"fromJson",value:function(e){this.elements=[],this.packages={};for(var t=0;t<e.length;t++){var n=(new Wa).fromJson(e[t]);this.packages[n.id]=n,this.elements.push(n)}return ce(this.elements),this}},{key:"getCommandSpec",value:function(e,t){return e&&t?this.packages[e].commands[t]:{name:"Create"}}},{key:"toList",value:function(){return this.elements}}]),e}(),Ya=function e(t,n,a){for(var r={data:[],errors:[]},i=0;i<n.length;i++){var s=n[i],o=t[s.id];if(s.datatype===Ha)if(null!=o){var l=e(o,s.parameters);r.data.push({id:s.id,value:l.data}),l.errors.forEach((function(e){return r.errors.push(e)}))}else s.required&&r.errors.push("Missing value for "+s.name);else if(s.datatype===za)if(null!=o&&o.length>0){for(var c=[],u=0;u<o.length;u++){var d=e(o[u],s.parameters);c.push(d.data),d.errors.forEach((function(e){return r.errors.push(e)}))}r.data.push({id:s.id,value:c})}else s.required&&r.errors.push("Missing value for "+s.name);else{var h=s.datatype;h===Va?o=parseInt(o,10):h===Ua&&(o=parseFloat(o)),er(o,s,r.errors,a),r.data.push({id:s.id,value:o})}}return r},Qa=function(e,t,n){if(null==t)return null;for(var a=0;a<e.parameters.length;a++){var r=e.parameters[a];if(r.datatype===Fa){var i=t[r.id];if(null!=i)for(var s=0;s<n.length;s++){var o=n[s];if(o.name===i)return o}}}return null},Za=function e(t,n){for(var a=[],r=0;r<t.length;r++){var i=t[r];(i.parent===n||null==i.parent&&null==n)&&(i.datatype!==Ha&&i.datatype!==za||(i.parameters=e(t,i.id)),a.push(i))}return a},$a=function e(t,n){for(var a=0;a<n.length;a++){var r=n[a];if(r.datatype===La)t[r.id]=null;else if(r.datatype===Ha)e(t[r.id],r.parameters);else if(r.datatype===za)for(var i=t[r.id],s=0;s<i.length;s++)e(i[s],r.parameters)}},Xa=function e(t,n,a){for(var r={},i=function(i){var s=t[i],o=null!=a?a.find((function(e){return e.id===s.id})):null,l=null;if(s.datatype===Ha){var c=null!=o?o.value:[];l=e(s.parameters,n,c)}else if(s.datatype===za){if(l=[],null!=o)for(var u=0;u<o.value.length;u++)l.push(e(s.parameters,n,o.value[u]))}else if(null!=o)l=o.value;else if(null!=s.values){if(l=s.values[0].value,!0!==s.values[0].isDefault)for(var d=1;d<s.values.length;d++){var h=s.values[d];if(!0===h.isDefault){l=h.value;break}}}else null!=s.defaultValue?l=s.defaultValue:s.datatype===Ta?l=!1:s.datatype===Fa?l=n.length>0?n[0].name:"":s.datatype===Ba&&(l={fileid:null,filename:null,url:null});r[s.id]=l},s=0;s<t.length;s++)i(s);return r},er=function(e,t,n,a){var r=t.name;if(null===e&&t.required)n.push("Missing value for "+r);else if(null!==e&&t.datatype===Ba){var i=e.file,s=e.fileid,o=e.filename,l=e.url;null!=i&&null!=o?i.size>a.maxFileSize&&n.push("Filesize exceeds maximum limit: "+Wt(a.maxFileSize,2)):null!=s&&null!=o||null!=l||n.push("No file selected for "+r)}else if(null!=e)if(""===e&&t.required)n.push("Missing value for "+r);else{var c=t.datatype;c===Va||c===qa?isNaN(e)&&n.push("Expected integer value for "+r):c===Ua&&isNaN(e)&&n.push("Expected decimal value for "+r)}},tr={error:null,engine:null,isFetchig:!0,links:null,name:null,properties:null,refetch:!1},nr={annotations:new Yn,dataset:null,isUpdating:!1},ar=Object(l.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(j.a)(Object(j.a)({},e),{},{userSettings:e.userSettings.addCommandToHiddenList(t.command)});case O:return Object(j.a)(Object(j.a)({},e),{},{userSettings:e.userSettings.copyCell(t.cell)});case g:return Object(j.a)(Object(j.a)({},e),{},{userSettings:e.userSettings.toggleHideCells()});case C:return Object(j.a)(Object(j.a)({},e),{},{userSettings:e.userSettings.removeCommandFromHiddenList(t.command)});case w:return Object(j.a)(Object(j.a)({},e),{},{userSettings:e.userSettings.reverseOrder()});case k:return Object(j.a)(Object(j.a)({},e),{},{userSettings:e.userSettings.setFilter(t.filter)});default:return e}},branchPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ie:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!1,fetchError:t.error});case hn:return Object(j.a)(Object(j.a)({},e),{},{workflows:t.workflows,isFetching:!1,fetchError:null});case Pe:return Object(j.a)(Object(j.a)({},e),{},{workflows:null});case Re:case pn:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!0});default:return e}},mainPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(j.a)(Object(j.a)({},e),{},{homePageContent:t.welcome});default:return e}},notebookPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ie:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!1,fetchError:t.error});case En:return Object(j.a)(Object(j.a)({},e),{},{activeCell:null,isFetching:!1,fetchError:null,notebook:new kn(t.workflow).fromWorkflow(t.workflow)});case Pe:return Object(j.a)(Object(j.a)({},e),{},{activeCell:null,notebook:null});case Re:case Nn:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!0});case An:return Object(j.a)(Object(j.a)({},e),{},{activeCell:t.cellId});case Dn:return Object(j.a)(Object(j.a)({},e),{},{notebook:t.notebook});default:return e}},spreadsheetPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ie:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!1,fetchError:t.error});case En:return Object(j.a)(Object(j.a)({},e),{},{activeCell:null,isFetching:!1,fetchError:null,notebook:new kn(t.workflow).fromWorkflow(t.workflow)});case Pe:return Object(j.a)(Object(j.a)({},e),{},{activeCell:null,notebook:null});case Re:case Nn:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!0});case An:return Object(j.a)(Object(j.a)({},e),{},{activeCell:t.cellId});case Dn:return Object(j.a)(Object(j.a)({},e),{},{notebook:t.notebook});default:return e}},datasetErrorsPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ja,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ie:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!1,fetchError:t.error});case Pe:return Object(j.a)(Object(j.a)({},e),{},{workflows:null});case Re:case ea:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!0});case Me:switch(t.resource.type){case rn:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!1,resource:t.resource});case st:return Object(j.a)(Object(j.a)({},e),{},{dataset:t.resource});default:return e}default:return e}},projectListing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ba:return Object(j.a)(Object(j.a)({},e),{},{actionError:null});case fa:var n=Ia;return null!=t.message&&(n=t.message),Object(j.a)(Object(j.a)({},e),{},{isFetching:!0,fetchMessage:n});case va:return Object(j.a)(Object(j.a)({},e),{},{fetchError:null,isFetching:!1,projects:t.projects,links:t.links});case Oa:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!1,actionError:new De("Error creating project",t.error)});case ga:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!1,actionError:new De("Error deleting project",t.error)});case xa:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!1,fetchError:t.error,projects:[]});default:return e}},projectPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ra,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Re:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!0});case Le:return Object(j.a)(Object(j.a)({},e),{},{isActive:!0});case Ie:return Object(j.a)(Object(j.a)({},e),{},{branch:null,fetchError:t.error,isFetching:!1,project:null});case Te:return Object(j.a)(Object(j.a)({},e),{},{isActive:!1,isFetching:!1,actionError:t.error});case Pe:return Object(j.a)(Object(j.a)({},e),{},{actionError:null,branch:t.branch,fetchError:null,isActive:!1,isFetching:!1,project:t.project,resource:null,workflow:t.workflow});case Me:return Object(j.a)(Object(j.a)({},e),{},{actionError:null,isActive:!1,resource:t.resource});case dn:return Object(j.a)(Object(j.a)({},e),{},{branch:t.branch,isActive:!1,project:t.project});case Dn:return Object(j.a)(Object(j.a)({},e),{},{actionError:null,isActive:!1});case Fe:return Object(j.a)(Object(j.a)({},e),{},{actionError:null,isActive:!1,project:t.project});case Ue:return Object(j.a)(Object(j.a)({},e),{},{actionError:null,isActive:!1,resource:t.resource});case Be:return Object(j.a)(Object(j.a)({},e),{},{actionError:null,isActive:!1,resource:t.resource,workflow:t.workflow});default:return e}},serviceApi:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!0});case I:return Object(j.a)(Object(j.a)({},e),{},{engine:{backend:t.environment.backend,name:t.environment.name,packages:(new Ga).fromJson(t.environment.packages),serviceProperties:t.properties},error:null,isFetching:!1,links:new oe(t.links),name:t.name,properties:t.properties,refetch:!1});case P:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!1,error:t.error});case R:return Object(j.a)(Object(j.a)({},e),{},{showModal:M});case T:return Object(j.a)(Object(j.a)({},e),{},{showModal:null,isFetching:!1,error:null,refetch:!0});default:return e}},spreadsheet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Me:case Be:var n=t.resource;return null!=n&&n.isDataset()?Object(j.a)(Object(j.a)({},e),{},{dataset:n.content,annotations:new Yn,isUpdating:!1}):e;case Te:return Object(j.a)(Object(j.a)({},e),{},{isUpdating:!1});case ta:return Object(j.a)(Object(j.a)({},e),{},{annotations:t.annotations});case Xn:return Object(j.a)(Object(j.a)({},e),{},{isUpdating:!0});case na:return Object(j.a)(Object(j.a)({},e),{},{dataset:t.dataset});default:return e}},router:u.c}),rr=n(1407),ir=n(1410),sr=n(1396),or=n(1394),lr=n(519),cr=n.n(lr),ur=n(1369),dr=n(1389),hr=(n(35),function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.size,n=e.text,r="spinner-padding-ms",i="massive";return"medium"===t?(r="spinner-padding-lg",i="medium"):"small"===t&&(r="spinner-padding-md",i="small"),Object(a.jsx)("div",{className:r,children:Object(a.jsx)(dr.a,{inline:!0,active:!0,size:i,children:n})})}}]),n}(i.a.Component)),pr=(n(420),function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.interval,n=e.onFetch,a=e.resource;window.pollingTimer=setInterval((function(){return n(a)}),t),this.timer=window.pollingTimer}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer),this.timer=null}},{key:"render",value:function(){var e=this.props,t=e.onCancel,n=e.text;return Object(a.jsxs)("div",{children:[Object(a.jsx)(hr,{text:n,size:"small"}),Object(a.jsx)("div",{className:"centered",children:Object(a.jsx)(ur.a,{content:"Cancel",negative:!0,title:"Cancel active task",onClick:t})})]})}}]),n}(i.a.Component)),jr=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.links,r=n.getSelf();return Object(a.jsx)("div",{className:"connection-info",children:Object(a.jsxs)("pre",{className:"connection-info",children:["Connected to ",t," @ ",Object(a.jsx)("a",{className:"connection-link",target:"_blank",href:r,children:r}),Object(a.jsx)("span",{className:"docu-icon",children:Object(a.jsx)("a",{href:n.get("api.doc"),className:"docu-icon",target:"_blank",children:Object(a.jsx)("i",{className:"fa fa-book"})})})]})})}}]),n}(i.a.Component),mr=n(1405),br=function(e){var t=e.title,n=e.message,r=e.onDismiss;return Object(a.jsx)(mr.a,{negative:!0,icon:"warning sign",header:t,onDismiss:r,content:null!=n?n.charAt(0).toUpperCase()+n.slice(1):"No Message"})},fr=function(e){var t=e.title,n=e.errors,r=e.onDismiss;return Object(a.jsx)(mr.a,{negative:!0,icon:"warning sign",header:t,list:n,onDismiss:r})},vr=function(e){var t=e.error;return t.is404()?Object(a.jsx)("div",{className:"not-found",children:Object(a.jsx)(Or,{message:t.message})}):Object(a.jsx)(br,{title:t.title,message:t.message})},Or=function(e){var t=e.message;return Object(a.jsx)(mr.a,{floating:!0,icon:"frown",header:"Ooops ... 404",size:"massive",content:null!=t?t.charAt(0).toUpperCase()+t.slice(1):"Unknown Error"})},gr=n(98),xr=n(1399),Cr=n(1390),wr=(n(126),function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.onKeyDown,r=e.onChange;return Object(a.jsx)(Cr.a,{autoFocus:!0,className:"resource-name-input",value:t,onChange:r,onKeyDown:n})}}]),n}(i.a.Component)),kr=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleCancel=function(){var e=a.props.onCancel;a.setState({value:""}),e()},a.handleChange=function(e){var t=e.target.value;a.setState({value:t})},a.handleKeyDown=function(e){var t=a.props.onCancel;13===e.keyCode?a.handleSubmit():27===e.keyCode&&t()},a.handleSubmit=function(e){var t=a.props,n=t.isValid,r=t.onSubmit,i=a.state.value;!i&&a.props.value&&(i=a.props.value),(null==n||n(i))&&r(i)};var r=e.value;return null==r&&(r=""),a.state={value:r},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isValid,n=e.prompt,r=e.open,i=e.title,s=e.inputComponent,o=this.state.value,l=null;!o&&this.props.value&&(o=this.props.value),null!=n&&(l=Object(a.jsx)("p",{children:n}));var c=!0;null!=t&&(c=t(o));var u="TextInput",d={};if(s)u=s.type,d=Object.assign(d,s.props),delete this.props.inputComponent;else{var h=Object(a.jsx)(wr,{id:"EditResourceNameModal",value:o,onChange:this.handleChange,onKeyDown:this.handleKeyDown});u=h.type,d=Object.assign(d,h.props)}return Object(a.jsxs)(xr.a,{open:r,size:"small",children:[Object(a.jsx)(xr.a.Header,{children:i}),Object(a.jsx)(xr.a.Content,{children:Object(a.jsxs)("div",{className:"resource-name",children:[l,Object(a.jsx)(u,Object(j.a)({},d))]})}),Object(a.jsxs)(xr.a.Actions,{children:[Object(a.jsx)(ur.a,{onClick:this.handleCancel,children:"Cancel"}),Object(a.jsx)(ur.a,{primary:!0,icon:"checkmark",labelPosition:"right",content:"Submit",disabled:!c,onClick:this.handleSubmit})]})]})}}]),n}(i.a.Component),yr=n(343),_r=n.n(yr),Sr=(n(822),n(823),n(1393)),Er=function(e){var t=e.name,n=e.onClick,r=e.title;return Object(a.jsx)(_r.a,{className:"icon-button",name:t,onClick:n,title:r})},Nr=function(e){var t=e.name,n=e.onClick;return Object(a.jsx)(_r.a,{className:"close-button",name:t,onClick:n})},Ar=function(e){var t=e.message,n=e.icon,r=e.css,i=e.onClick,s=e.title,o=e.caption,l=e.captionIcon,c=Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:"lg-message",children:t}),Object(a.jsx)("p",{className:"lg-button",children:Object(a.jsx)(Er,{name:n+" fa-4x",title:s,onClick:i})})]}),u=null!==o?Object(a.jsxs)("div",{children:[Object(a.jsx)(Sr.a,{horizontal:!0,children:Object(a.jsx)("p",{className:"lg-button",children:Object(a.jsx)(gr.a,{size:"big",name:l,style:{margin:0}})})}),Object(a.jsx)("p",{className:"lg-message",children:o})]}):null;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:r,children:c}),u]})},Dr=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.css,n=e.text,r=e.title,i=e.onClick,s=null;return s=null!=t?t:"icon-button",Object(a.jsx)("a",{className:s,title:r,onClick:i,children:n})}}]),n}(i.a.Component),Ir=n(1401),Pr=n(1409),Rr=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSubmit=function(){var t=e.props;(0,t.onSubmit)(t.value)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.prompt,n=e.open,r=e.onCancel,i=e.title;return Object(a.jsxs)(xr.a,{open:n,basic:!0,size:"small",children:[Object(a.jsx)(Pr.a,{icon:"trash",content:i}),Object(a.jsx)(xr.a.Content,{children:t}),Object(a.jsxs)(xr.a.Actions,{children:[Object(a.jsxs)(ur.a,{basic:!0,color:"red",inverted:!0,onClick:r,children:[Object(a.jsx)(gr.a,{name:"remove"})," No"]}),Object(a.jsxs)(ur.a,{color:"green",inverted:!0,onClick:this.handleSubmit,children:[Object(a.jsx)(gr.a,{name:"checkmark"})," Yes"]})]})]})}}]),n}(i.a.Component);Rr.defaultProps={open:!1};var Tr=Rr,Mr=n(527),Lr=n(13),Fr=n(1406),Ur=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).addTitleFieldToProjects=function(e){if(null!==e&&e.length>0){for(var t=Object(Lr.a)(e),n=0;n<t.length;n++)t[n].title=t[n].name;return t}return[]},a.handleSearchChange=function(e,t){var n=t.value;a.setState({isLoading:!0,value:n}),setTimeout((function(){if(a.state.value.length<1)return a.setState(a.initialState),a.props.filterProjectListing(a.projects,n);var e=new RegExp(rt.a.escapeRegExp(a.state.value),"i");a.setState({isLoading:!1,results:rt.a.filter(a.projects,(function(t){return e.test(t.title)}))},(function(){return a.props.filterProjectListing(a.state.results)}))}),300)},a.initialState={isLoading:!1,results:[],value:""},a.state=a.initialState,a.projects=a.addTitleFieldToProjects(a.props.projects),a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.value,r=e.results;return Object(a.jsx)("div",{align:this.props.aligned,children:Object(a.jsx)(Fr.a,{aligned:this.props.aligned,loading:t,onSearchChange:this.handleSearchChange,results:r,value:n,open:!1})})}}]),n}(i.a.Component);Ur.defaultProps={aligned:"right"};var Br=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).clearActionError=function(){(0,a.props.dispatch)({type:ba})},a.confirmDeleteProject=function(e){(0,a.props.dispatch)(wa(e)),a.hideModal()},a.handleShowProjectPage=function(e){a.props.history.push(Zt(e.id,e.defaultBranch))},a.hideModal=function(){a.setState({deleteProject:null})},a.filterProjectListing=function(e){a.setState({filteredProjects:e})},a.showDeleteProjectModal=function(e){a.setState({deleteProject:e})},a.state={deleteProject:null,filteredProjects:a.props.projects},(0,a.props.dispatch)(ka()),a}return Object(b.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=e.projects;this.setState({filteredProjects:t})}},{key:"render",value:function(){var e=this,t=this.props,n=t.actionError,r=t.fetchError,i=t.fetchMessage,s=t.isFetching,o=t.projects,l=null;if(s)l=Object(a.jsx)(hr,{text:i});else if(r)l=Object(a.jsx)(br,{title:"Error while loading project list",message:r});else if(null!=o){for(var c=Object(a.jsxs)(Ir.a.Row,{children:[Object(a.jsx)(Ir.a.HeaderCell,{className:"resource",children:"Project"}),Object(a.jsx)(Ir.a.HeaderCell,{className:"resource",children:"Created"}),Object(a.jsx)(Ir.a.HeaderCell,{className:"resource",children:"Last modified"}),Object(a.jsx)(Ir.a.HeaderCell,{className:"resource"})]}),u=this.state.filteredProjects,d=[],h=function(t){var n=u[t];d.push(Object(a.jsxs)(Ir.a.Row,{children:[Object(a.jsx)(Ir.a.Cell,{className:"resource",children:Object(a.jsx)("a",{className:"resource-link",onClick:function(){return e.handleShowProjectPage(n)},children:n.name})}),Object(a.jsx)(Ir.a.Cell,{className:"resource-text",children:n.createdAt}),Object(a.jsx)(Ir.a.Cell,{className:"resource-text",children:n.lastModifiedAt}),Object(a.jsx)(Ir.a.Cell,{className:"resource-buttons",children:Object(a.jsx)("span",{className:"button-wrapper",children:Object(a.jsx)(gr.a,{name:"trash",link:!0,onClick:function(){return e.showDeleteProjectModal(n)}})})})]},n.id))},p=0;p<u.length;p++)h(p);var j=Object(a.jsx)(Ir.a.Row,{children:Object(a.jsx)(Ir.a.Cell,{className:"resource-text",children:"No Results Found!"})});u.length<1&&d.push(j);var m=this.state.deleteProject,b=null;m&&(b=Object(a.jsx)(Tr,{open:!0,prompt:"Do you really want to delete "+m.name+"?",title:"Delete Project",value:m,onCancel:this.hideModal,onSubmit:this.confirmDeleteProject}));var f=null;n&&(f=Object(a.jsx)(br,{title:n.title,message:n.message,onDismiss:this.clearActionError}));var v=Object(a.jsx)(Ur,{projects:o,filterProjectListing:this.filterProjectListing});l=Object(a.jsxs)("div",{children:[f,v,Object(a.jsxs)(Ir.a,{singleLine:!0,children:[Object(a.jsx)(Ir.a.Header,{children:c}),Object(a.jsx)(Ir.a.Body,{children:d})]}),b]})}return l}}]),n}(r.Component),Vr=Object(Mr.a)(Object(c.b)((function(e){return{actionError:e.projectListing.actionError,fetchError:e.projectListing.fetchError,fetchMessage:e.projectListing.fetchMessage,isFetching:e.projectListing.isFetching,projects:e.projectListing.projects,links:e.projectListing.links}}))(Br)),zr=n(565),Hr=function(e){return function(t){t(K(e.links.self,(function(n){return t((a=new ln(e.name,n),{type:Ue,resource:a}));var a}),(function(e){return We("Error loading dataset chart view",e)}),Qe))}},qr=n(562),Jr=n(564),Kr=n(1402),Wr=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleCreateBranch=function(){e.props.onCreateBranch()},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.branches,n=e.isMostRecent,r=e.onCreateBranch,i=e.onDelete,s=e.onEdit,o=e.onGetMostRecent,l=e.onSelect,c=e.onShowHistory,u=e.onCancelExec,d=e.resource,h=e.selectedBranch,p=e.isRunning,j=[];if(t.length>1){j.push(Object(a.jsx)(Kr.a.Divider,{},"divider")),j.push(Object(a.jsx)(Kr.a.Header,{content:"Switch Branch"},"header"));for(var m=function(e){var n=t[e],r=void 0;r=n.id===h.id?"checkmark box":"square outline",j.push(Object(a.jsx)(Kr.a.Item,{icon:r,active:n.id===h.id,text:n.name,value:n.id,onClick:function(){return l(n)}},n.id))},b=0;b<t.length;b++)m(b)}return null!=r&&(j.push(Object(a.jsx)(Kr.a.Divider,{},"divider-new")),j.push(Object(a.jsx)(Kr.a.Item,{icon:"plus",text:"New Branch ...",onClick:this.handleCreateBranch},"createBranch"))),j.push(Object(a.jsx)(Kr.a.Divider,{},"divider-tm")),j.push(Object(a.jsx)(Kr.a.Header,{content:"Time Machine"},"header-tm")),j.push(Object(a.jsx)(Kr.a.Item,{icon:"history",disabled:d.isBranch(),text:"History",onClick:c},"history")),j.push(Object(a.jsx)(Kr.a.Item,{icon:"play",disabled:!d.isBranch()&&n,text:"Latest Version",onClick:o},"mostRecent")),null!=u&&(j.push(Object(a.jsx)(Kr.a.Header,{content:"Execution"},"header-tm")),j.push(Object(a.jsx)(Kr.a.Item,{icon:"fa-times-circle",disabled:!p,text:"Cancel Workflow",onClick:u},"cancelExecution"))),Object(a.jsx)(Kr.a,{item:!0,text:"Branches",children:Object(a.jsxs)(Kr.a.Menu,{children:[Object(a.jsx)(Kr.a.Header,{icon:"fork",content:h.name},"onBranch"),Object(a.jsx)(Kr.a.Item,{icon:"edit",text:"Rename",onClick:s},"edit"),Object(a.jsx)(Kr.a.Item,{icon:"trash",disabled:h.isDefault,text:"Delete",onClick:i},"delete"),j]})})}}]),n}(i.a.Component),Gr=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSelect=function(t,n){for(var a=n.value,r=e.props,i=r.charts,s=r.onSelect,o=0;o<i.length;o++){var l=i[o];if(l.name===a){s(l);break}}},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.charts,n=e.resource;if(0===t.length)return null;if(1===t.length){var r=t[0],i=n.isChart(),s=null;return i||(s=this.handleSelect),Object(a.jsx)(qr.a.Item,{icon:"bar chart",name:r.name,value:r.name,disabled:i,onClick:s},r.name)}for(var o=!1,l=[],c=0;c<t.length;c++){var u=t[c],d=!1;n.isChart()&&(d=n.content.name===u.name),d||(o=!0),l.push(Object(a.jsx)(Kr.a.Item,{icon:"bar chart",text:u.name,value:u.name,disabled:d,onClick:this.handleSelect},u.name))}return Object(a.jsx)(Kr.a,{item:!0,text:"Chart",disabled:!o,children:Object(a.jsx)(Kr.a.Menu,{children:l})})}}]),n}(i.a.Component),Yr=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSelect=function(t,n){for(var a=n.value,r=e.props,i=r.datasets,s=r.onSelect,o=0;o<i.length;o++){var l=i[o];if(l.name===a){s(l);break}}},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.datasets,n=e.resource;if(0===t.length)return null;if(1===t.length){var r=t[0],i=n.isDataset(),s=null;return i||(s=this.handleSelect),Object(a.jsx)(qr.a.Item,{icon:"table",name:r.name,value:r.name,disabled:i,onClick:s},r.name)}for(var o=!1,l=[],c=0;c<t.length;c++){var u=t[c],d=!1;n.isDataset()&&(d=n.content.name===u.name),d||(o=!0),l.push(Object(a.jsx)(Kr.a.Item,{icon:"table",text:u.name,value:u.name,disabled:d,onClick:this.handleSelect},u.name))}return Object(a.jsx)(Kr.a,{item:!0,text:"Dataset",disabled:!o,children:Object(a.jsx)(Kr.a.Menu,{children:l})})}}]),n}(i.a.Component),Qr=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSelect=function(t,n){for(var a=n.value,r=e.props,i=r.datasets,s=r.onSelect,o=0;o<i.length;o++){var l=i[o];if(l.name===a){s(l);break}}},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.datasets,n=e.resource;if(0===t.length)return null;if(1===t.length){var r=t[0],i=n.isDatasetCaveat(),s=null;return i||(s=this.handleSelect),Object(a.jsx)(qr.a.Item,{icon:"warning sign",name:r.name,value:r.name,disabled:i,onClick:s},r.name)}for(var o=!1,l=[],c=0;c<t.length;c++){var u=t[c],d=!1;n.isDatasetCaveat()&&(d=n.content.name===u.name),d||(o=!0),l.push(Object(a.jsx)(Kr.a.Item,{icon:"warning sign",text:u.name,value:u.name,disabled:d,onClick:this.handleSelect},u.name))}return Object(a.jsx)(Kr.a,{item:!0,text:"Caveats",disabled:!o,children:Object(a.jsx)(Kr.a.Menu,{children:l})})}}]),n}(i.a.Component),Zr=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleExportProject=function(e){return function(){window.open(e.links.getSelf()+"/export")}},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onCreate,n=e.onImport,r=e.onDelete,i=e.onEdit,s=e.project,o=[];return null!=s&&(o.push(Object(a.jsx)(Kr.a.Header,{icon:"database",content:s.name},"header1")),o.push(Object(a.jsx)(Kr.a.Item,{icon:"edit",text:"Rename",title:"Edit project name",onClick:i},"edit")),o.push(Object(a.jsx)(Kr.a.Item,{icon:"trash",text:"Delete",title:"Delete the current project",onClick:r},"delete"))),o.length>0&&o.push(Object(a.jsx)(Kr.a.Divider,{},"div2")),o.push(Object(a.jsx)(Kr.a.Item,{icon:"plus",text:"New Project ...",title:"Create a new project",onClick:t},"create")),o.push(Object(a.jsx)(Kr.a.Item,{icon:"plus",text:"Import Project ...",title:"Import a project from a export file",onClick:n},"import")),null!=s&&o.push(Object(a.jsx)(Kr.a.Item,{disabled:null==s,icon:"database",text:"Export Project",title:"Export current project",onClick:this.handleExportProject(s)},"export")),Object(a.jsx)(Kr.a,{item:!0,text:"Projects",children:Object(a.jsx)(Kr.a.Menu,{children:o})})}}]),n}(i.a.Component),$r=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleCancel=function(){var e=a.props.onCancel;a.setState({file:null}),e()},a.onChange=function(e){a.setState({file:e.target.files[0]})},a.handleSubmit=function(e){var t=a.props.onSubmit,n=a.state.file;null!=n&&t(n)},a.state={file:null},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.prompt,n=e.open,r=e.title,i=this.state.file,s=null;null!=t&&(s=Object(a.jsx)("p",{children:t}));var o=null!=i;return Object(a.jsxs)(xr.a,{open:n,size:"small",children:[Object(a.jsx)(xr.a.Header,{children:r}),Object(a.jsx)(xr.a.Content,{children:Object(a.jsxs)("div",{className:"resource-name",children:[s,Object(a.jsx)("input",{type:"file",onChange:this.onChange})]})}),Object(a.jsxs)(xr.a.Actions,{children:[Object(a.jsx)(ur.a,{negative:!0,onClick:this.handleCancel,children:"Cancel"}),Object(a.jsx)(ur.a,{positive:!0,icon:"checkmark",labelPosition:"right",content:"Done",disabled:!o,onClick:this.handleSubmit})]})]})}}]),n}(i.a.Component),Xr=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onHideCells,n=e.onReverse,r=e.onSetFilter,i=e.userSettings;return Object(a.jsx)(Kr.a,{item:!0,text:"Settings",children:Object(a.jsxs)(Kr.a.Menu,{children:[Object(a.jsx)(Kr.a.Header,{content:"Notebook cells in ..."},"head1"),Object(a.jsx)(Kr.a.Item,{disabled:!i.showNotebookReversed(),icon:"sort numeric ascending",text:"Default order",title:"List notebook cells in default order (first cell shown first)",onClick:n},"defaultOrder"),Object(a.jsx)(Kr.a.Item,{disabled:i.showNotebookReversed(),icon:"sort numeric descending",text:"Reverse order",title:"List notebook cells in reverse order (last cell shown first)",onClick:n},"reverseOrder"),Object(a.jsx)(Kr.a.Divider,{},"div1"),Object(a.jsx)(Kr.a.Header,{content:"Filter Modules"},"head2"),Object(a.jsx)(Kr.a.Item,{icon:"remove circle",text:"Remove Filter",title:"Clear module filter to show all notebook cells",onClick:function(){return r()}},"showAll"),Object(a.jsx)(Kr.a.Item,{icon:"th",text:"Filter VizUAL",title:"Filter VizUAL commands by default",onClick:function(){return r(f)}},"defaultFilter"),Object(a.jsx)(Kr.a.Item,{disabled:!0,icon:"filter",text:"Customized Filter",title:"Show form to specify filter for all modules"},"filter"),Object(a.jsx)(Kr.a.Divider,{},"div2"),Object(a.jsx)(Kr.a.Header,{content:"Show Filtered Modules as ..."},"head3"),Object(a.jsx)(Kr.a.Item,{disabled:!i.hideFilteredCommands(),icon:"compress",text:"Collapsed",title:"Collapse cells that contain filtered modules",onClick:t},"collapse"),Object(a.jsx)(Kr.a.Item,{disabled:i.hideFilteredCommands(),icon:"hide",text:"Hidden",title:"Hide cells that contain filtered modules",onClick:t},"hide")]})})}}]),n}(i.a.Component),ei=(n(147),n.p+"static/media/vizier_tiny.f23e05e5.svg"),ti="MODAL_CREATE_PROJECT",ni="MODAL_IMPORT_PROJECT",ai="MODAL_DELETE_BRANCH",ri="MODAL_DELETE_PROJECT",ii="MODAL_EDIT_BRANCH_NAME",si="MODAL_EDIT_PROJECT_NAME",oi=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleDeleteCurrentBranch=function(e){(0,a.props.onDeleteBranch)(e),a.hideModal()},a.handleDeleteProject=function(){var e=a.props,t=e.onDeleteProject,n=e.project;a.hideModal(),t(n)},a.hideModal=function(){return a.setState({modal:null})},a.showCreateProjecthModal=function(){return a.setState({modal:ti})},a.showImportProjecthModal=function(){return a.setState({modal:ni})},a.showDeleteBranchModal=function(){return a.setState({modal:ai})},a.showDeleteProjectModal=function(){return a.setState({modal:ri})},a.showEditBranchNameModal=function(){return a.setState({modal:ii})},a.showEditProjectNameModal=function(){return a.setState({modal:si})},a.submitUpdateBranchName=function(e){var t=a.props,n=t.onEditBranch,r=t.branch;a.hideModal(),e.trim()!==r.name&&n(e)},a.submitUpdateProjectName=function(e){var t=a.props,n=t.onEditProject,r=t.project;a.hideModal(),e.trim()!==r.name&&n(e)},a.switchToBranchHead=function(){(0,a.props.onShowNotebook)()},a.state={modal:null},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.branch,n=e.notebook,r=e.onCreateBranch,i=e.onCancelExec,s=e.onCreateProject,o=e.onImportProject,l=e.onGoHome,c=e.onHideCells,u=e.onReverse,d=e.onSetFilter,h=e.onShowChart,p=e.onShowDataset,j=e.onShowDatasetCaveat,m=e.onShowHistory,b=e.onShowNotebook,f=e.onShowProject,v=e.onSwitchBranch,O=e.project,g=e.projectList,x=e.resource,C=e.userSettings,w=[];if(x.isMainPage()?w.push(Object(a.jsx)(qr.a.Item,{header:!0,children:Object(a.jsx)(Jr.a,{src:ei})},"logo")):w.push(Object(a.jsx)(qr.a.Item,{header:!0,onClick:l,children:Object(a.jsx)(Jr.a,{src:ei})},"logo")),null!=O&&w.push(Object(a.jsx)(qr.a.Item,{header:!0,children:O.name},"name")),w.push(Object(a.jsx)(Zr,{onCreate:this.showCreateProjecthModal,onImport:this.showImportProjecthModal,onDelete:this.showDeleteProjectModal,onEdit:this.showEditProjectNameModal,onSelect:f,project:O,projectList:g},"project")),null!=x){if(null!=t){var k=!1;null!=n&&(k=n.readOnly),w.push(Object(a.jsx)(Wr,{branches:O.branches,isMostRecent:!k,onCreateBranch:r,onDelete:this.showDeleteBranchModal,onEdit:this.showEditBranchNameModal,onGetMostRecent:this.switchToBranchHead,onSelect:v,onShowHistory:m,onCancelExec:i,resource:x,selectedBranch:t,isRunning:!!n&&n.workflow.isRunning()},"branches"))}if(!x.isMainPage()&&(w.push(Object(a.jsx)(qr.a.Item,{icon:"file alternate outline",name:"Notebook",disabled:x.isNotebook(),onClick:b},"notebook")),n)){if(n.workflow.modules.length>0&&Object.keys(n.workflow.datasets).length>0){var y=Array.from(new Map(n.workflow.modules.flatMap((function(e,t){return e.datasets?e.datasets:[]})).map((function(e){return[e.name,e]}))).values());w.push(Object(a.jsx)(Yr,{datasets:y,onSelect:p,resource:x},"datasets")),w.push(Object(a.jsx)(Qr,{datasets:y,onSelect:j,resource:x},"errors"))}n.workflow.charts&&w.push(Object(a.jsx)(Gr,{charts:n.workflow.charts,onSelect:h,resource:x},"charts"))}}w.push(Object(a.jsx)(Xr,{onHideCells:c,onReverse:u,onSetFilter:d,userSettings:C},"settings"));var _=Object(a.jsx)(qr.a,{fixed:"top",children:w}),S=null,E=this.state.modal;return null!==E&&(E===ti?S=Object(a.jsx)(kr,{isValid:Gt,open:!0,prompt:"Enter a name for the new project",title:"Create project",onCancel:this.hideModal,onSubmit:s}):E===ni?S=Object(a.jsx)($r,{open:!0,prompt:"Select a project export file to import",title:"Import project",onCancel:this.hideModal,onSubmit:o}):E===ai&&null!=t?S=Object(a.jsx)(Tr,{open:!0,onCancel:this.hideModal,onSubmit:this.handleDeleteCurrentBranch,prompt:"Do you really want to delete the branch "+t.name+"?",title:"Delete branch",value:t}):E===ri&&null!=O?S=Object(a.jsx)(Tr,{open:!0,onCancel:this.hideModal,onSubmit:this.handleDeleteProject,prompt:"Do you really want to delete the project "+O.name+"?",title:"Delete project",value:t}):E===si&&null!=O?S=Object(a.jsx)(kr,{isValid:Gt,open:!0,onCancel:this.hideModal,onSubmit:this.submitUpdateProjectName,title:"Edit project name",value:O.name}):E===ii&&null!=t&&(S=Object(a.jsx)(kr,{isValid:Gt,open:!0,onCancel:this.hideModal,onSubmit:this.submitUpdateBranchName,title:"Edit branch name",value:t.name}))),Object(a.jsxs)("div",{className:"project-menu",children:[_,S]})}}]),n}(i.a.Component),li=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).dismissResourceError=function(){(0,e.props.dispatch)(Ke())},e.handleCreateProject=function(t){var n=e.props,a=n.dispatch,r=n.history,i=n.serviceApi.links.get(X);a(Ca(i,t,r))},e.handleImportProject=function(t){var n=e.props,a=n.dispatch,r=n.history,i=n.serviceApi.links.get(ee);a(ya(i,t,r))},e.handleDeleteProject=function(t){var n=e.props,a=n.dispatch,r=n.history;a(wa(t)),r.push(St)},e.handleGoHome=function(){e.props.history.push(St)},e.handleSetFilter=function(t){e.props.dispatch(y(t))},e.handleShowBranch=function(){var t=e.props,n=t.branch,a=t.history,r=t.project;a.push(Qt(r.id,n.id))},e.handleShowProject=function(t){e.props.history.push(Zt(t.id,t.defaultBranch))},e.handleToggleHideCells=function(){(0,e.props.dispatch)(_())},e.handleToggleNotebookReverse=function(){(0,e.props.dispatch)(S())},e.loadChartView=function(t){(0,e.props.dispatch)(Hr(t))},e.loadDataset=function(t){var n=e.props,a=n.dispatch,r=n.history,i=n.notebook,s=n.branch,o=n.project;i.datasets[t.id].name=t.name,a(aa(i.datasets[t.id])),r.push($t(o.id,s.id,t.id))},e.loadDatasetCaveat=function(t){var n=e.props,a=n.dispatch,r=n.history,i=n.notebook,s=n.branch,o=n.project,l=i.datasets[t.id].links.getSelf()+"/annotations";i.datasets[t.id].name=t.name,a(ia(i.datasets[t.id],l)),r.push(Xt(o.id,s.id,t.id))},e.loadDatasetToError=function(t){return function(n){var a=e.props,r=a.dispatch,i=a.serviceApi.serviceUrl+"/datasets/"+t.id+"?rowid="+n.args[n.rowidarg];r(aa(t,i))}},e.loadDatasetRepair=function(t){return function(n,a,r){var i=e.props,s=i.dispatch,o=i.serviceApi.serviceUrl+"/datasets/"+t.id+"/feedback";s(sa(t,o,n,a,r))}},e.submitEditBranch=function(t){var n=e.props,a=n.dispatch,r=n.project,i=n.branch;a(fn(r,i,t))},e.submitEditProject=function(t){var n=e.props,a=n.dispatch,r=n.project;a(Je(r,t))},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.actionError,n=e.branch,r=e.content,i=e.contentCss,s=e.notebook,o=e.onCreateBranch,l=e.onDeleteBranch,c=e.onShowNotebook,u=e.onSwitchBranch,d=e.onCancelExec,h=e.project,p=e.projectList,j=e.resource,m=e.userSettings;document.title=null!=h?"Vizier DB - "+en(h.name,"undefined"):"Vizier DB - Projects";var b=null;null!=t&&(b=Object(a.jsx)(br,{title:t.title,message:t.message,onDismiss:this.dismissResourceError}));var f=Object(a.jsxs)("div",{children:[Object(a.jsx)(xr.a,{dimmer:!0,open:!1,children:Object(a.jsx)(dr.a,{size:"large",active:!0,children:"Update in progress ..."})}),b,r]}),v=null,O="";return Mn()?O="":(O=i,v=Object(a.jsx)(zr.a,{children:Object(a.jsx)(zr.a.Row,{children:Object(a.jsx)(zr.a.Column,{className:"project-menu-bar",children:Object(a.jsx)(oi,{branch:n,notebook:s,onCreateBranch:o,onCreateProject:this.handleCreateProject,onImportProject:this.handleImportProject,onDeleteBranch:l,onDeleteProject:this.handleDeleteProject,onEditBranch:this.submitEditBranch,onEditProject:this.submitEditProject,onGoHome:this.handleGoHome,onHideCells:this.handleToggleHideCells,onReverse:this.handleToggleNotebookReverse,onSetFilter:this.handleSetFilter,onShowChart:this.loadChartView,onShowDataset:this.loadDataset,onShowDatasetCaveat:this.loadDatasetCaveat,onShowHistory:this.handleShowBranch,onShowNotebook:c,onShowProject:this.handleShowProject,onSwitchBranch:u,onCancelExec:d,project:h,projectList:p,resource:j,userSettings:m})})})})),Object(a.jsxs)("div",{children:[v,Object(a.jsx)("div",{className:"page-content "+O,children:f})]})}}]),n}(r.Component),ci=Object(Mr.a)(li),ui=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleCreateProject=function(e){var t=a.props,n=t.dispatch,r=t.history,i=t.serviceApi.links.get(X);a.hideModal(),n(Ca(i,e,r))},a.handleShowProjectPage=function(e){a.props.history.push(Zt(e.id,e.defaultBranch))},a.hideModal=function(){return a.setState({showModal:!1})},a.showCreateProjectModal=function(){return a.setState({showModal:!0})},a.state={showModal:!1},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.homePageContent,r=e.projects,i=e.serviceApi,s=e.userSettings,o=null,l=null;null!=n?(o=n.headline,l=n.description):o=Object(a.jsxs)("span",{children:["Vizier",Object(a.jsx)("span",{className:"headline-small",children:"Streamlined Data Curation"})]});var c=null;c=null!=r&&0===r.length?Object(a.jsx)("div",{className:"empty-list-message",children:Object(a.jsx)(Ar,{message:"Your project list is empty. Start by creating a new project.",icon:"plus",onClick:this.showCreateProjectModal})}):Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"project-listing",children:Object(a.jsx)(Vr,{})}),Object(a.jsxs)(ur.a,{icon:!0,labelPosition:"left",size:"tiny",positive:!0,onClick:this.showCreateProjectModal,children:[Object(a.jsx)(gr.a,{name:"plus"})," New Project ..."]})]});var u=Object(a.jsxs)("div",{className:"home-content",children:[Object(a.jsx)("h1",{className:"home-headline",children:o}),l,c,Object(a.jsx)(kr,{isValid:Gt,open:this.state.showModal,prompt:"Enter a name for the new project",title:"Create project",onCancel:this.hideModal,onSubmit:this.handleCreateProject})]});return Object(a.jsx)(ci,{content:u,contentCss:"wide",dispatch:t,isActive:!1,projectList:r,resource:new sn(nn),serviceApi:i,userSettings:s})}}]),n}(r.Component),di=Object(or.a)(Object(c.b)((function(e){return{homePageContent:e.mainPage.homePageContent,projects:e.projectListing.projects,serviceApi:e.serviceApi,userSettings:e.app.userSettings}}))(ui)),hi=(n(452),function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleDeleteBranch=function(e){var t=a.props,n=t.dispatch,r=t.history,i=t.project;n(jn(i,e,Qt,r))},a.handleShowWorkflow=function(e,t){var n=a.props,r=n.branch,i=n.history,s=n.project,o=null;t||null==e||(o=e.id),i.push(Zt(s.id,r.id,o))},a.handleSwitchBranch=function(e){var t=a.props,n=t.dispatch,r=t.history,i=t.project;r.push(Qt(i.id,e.id)),n(qe(i,e.id,mn))};var r=a.props,i=r.branch,s=r.dispatch,o=r.project,l=r.projectList,c=r.workflows,u=a.props.match.params.project_id,d=a.props.match.params.branch_id;return s(Ve(u,d,mn)),(null==i||i.id!==d||null==c)&&s(mn(o,o.findBranch(d))),null==l&&s(ka()),a}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){if(e.location.pathname!==this.props.location.pathname){var a=this.props,r=a.dispatch,i=a.project,s=a.branch,o=this.props.match.params.project_id,l=this.props.match.params.branch_id;null==i||i.id!==o?r(Ve(o,l,mn)):null!=s&&s.id===l||r(mn(i,i.findBranch(l)))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.actionError,r=t.branch,i=t.dispatch,s=t.fetchError,o=t.isActive,l=t.isFetching,c=t.project,u=t.projectList,d=t.serviceApi,h=t.userSettings,p=t.workflows,j=null;if(s)j=Object(a.jsx)("div",{className:"page-content wide",children:Object(a.jsx)(vr,{error:s})});else if(null==c||null==r||null==p||l)j=Object(a.jsx)(hr,{text:"Loading History ..."});else if(null!=p){for(var m=[],b=function(t){var n=p[t],r=null,i=null,s=null,o="black";n.actionIsCreate()?(r="fork",o="grey",i="Create branch"):(n.actionIsDelete()?(r="trash",o="red",i="Delete cell"):n.actionIsAppend()?(r="add square",o="green",i="Append cell"):n.actionIsInsert()?(r="add circle",o="olive",i="Insert cell"):n.actionIsReplace()&&(r="pencil",o="blue",i="Replace cell"),s=d.engine.packages.getCommandSpec(n.packageId,n.commandId).name);var l=t===p.length-1;m.push(Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"workflow-nr",children:n.id}),Object(a.jsx)("td",{className:"workflow-icon",children:Object(a.jsx)(gr.a,{title:"Show notebook",link:!0,name:"eye",onClick:function(){return e.handleShowWorkflow(n,l)}})}),Object(a.jsx)("td",{className:"workflow-icon",children:Object(a.jsx)(gr.a,{title:i,name:r,color:o})}),Object(a.jsx)("td",{className:"workflow-command",children:s}),Object(a.jsx)("td",{className:"version-timestamp",children:n.createdAt})]},n.id))},f=0;f<p.length;f++)b(f);var v=Object(a.jsxs)("div",{className:"branch-history",children:[Object(a.jsxs)("h1",{className:"branch-history",children:["Notebooks in Branch ",Object(a.jsx)("span",{className:"branch-highlight",children:r.name})]}),Object(a.jsxs)("p",{className:"info-text",children:["This is a list of all notebook versions in the history of the branch ",r.name,". Click on the\xa0 ",Object(a.jsx)(gr.a,{name:"eye"})," to display a notebook."]}),Object(a.jsx)("table",{children:Object(a.jsx)("tbody",{children:m})})]});j=Object(a.jsx)(ci,{actionError:n,branch:r,content:v,contentCss:"slim",dispatch:i,isActive:o,onDeleteBranch:this.handleDeleteBranch,onShowNotebook:this.handleShowWorkflow,onSwitchBranch:this.handleSwitchBranch,project:c,projectList:u,resource:new on,serviceApi:d,userSettings:h})}return j}}]),n}(r.Component)),pi=Object(or.a)(Object(c.b)((function(e){return{actionError:e.projectPage.actionError,branch:e.projectPage.branch,fetchError:e.branchPage.fetchError,isActive:e.projectPage.isActive,isFetching:e.branchPage.isFetching,project:e.projectPage.project,projectList:e.projectListing.projects,serviceApi:e.serviceApi,userSettings:e.app.userSettings,workflows:e.branchPage.workflows}}))(hi)),ji=n(1403),mi=(n(839),function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleDelete=function(){var e=a.props,t=e.annotation;(0,e.onDelete)(t,a.state.selectedAnnotation),a.setState({selectedAnnotation:-1})},a.handleChange=function(e){a.setState({value:e.target.value})},a.handleClose=function(){var e=a.props.onDiscard;a.setState({key:"user:comment",value:"",selectedAnnotation:-1}),e()},a.handleKeyDown=function(e){13===e.keyCode&&a.handleSubmit()},a.handleSelectAnnotation=function(e,t){var n=t.id;a.state.selectedAnnotation===n?a.setState({selectedAnnotation:-1}):a.setState({selectedAnnotation:n})},a.handleSelectKey=function(e,t){var n=t.value;a.setState({key:n})},a.handleSubmit=function(){var e=a.props,t=e.annotation,n=e.onSubmit,r=a.state,i=r.key,s=r.value;""!==s.trim()&&n(t,i,s),a.setState({value:"",selectedAnnotation:-1})},a.keys=[{key:"user:comment",text:"Comment",value:"user:comment"},{key:"user:issue",text:"Issue",value:"user:issue"}],a.state={key:"user:comment",value:"",selectedAnnotation:-1},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.annotation,n=e.onDelete,r=e.onSubmit,i=this.state.selectedAnnotation;if(null!=t.content){var s=null;if(t.content.isFetching())s=Object(a.jsx)(dr.a,{active:!0,inline:"centered"});else if(t.content.isError())s=Object(a.jsx)(mr.a,{negative:!0,header:t.content.title,content:t.content.message});else if(t.content.items.length>0){for(var o=[],l=0;l<t.content.items.length;l++){var c=t.content.items[l],u=null,d=null,h=null;"mimir:uncertain"===c.key?(d="warning sign",h="Mimir",u="yellow",c.value=c.message):"user:issue"===c.key?(d="info circle",h="Issue"):(d="comment alternate outline",h="Comment",c.value=c.message);var p="";"mimir:uncertain"!==c.key&&null!=r||(p=" disabled");var j=null;null!=n&&"mimir:uncertain"!==c.key&&c.id===i?(j=Object(a.jsx)(gr.a,{name:"trash",size:"large",onClick:this.handleDelete}),p=" delete"):j=Object(a.jsx)(gr.a,{name:d,size:"large",color:u}),o.push(Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"list-icon"+p,children:j}),Object(a.jsx)("td",{className:"list-text"+p,children:Object(a.jsx)(ji.a,{relaxed:!0,children:Object(a.jsx)(ji.a.Item,{id:c.id,onClick:this.handleSelectAnnotation,children:Object(a.jsxs)(ji.a.Content,{children:[Object(a.jsx)(ji.a.Header,{children:h}),Object(a.jsx)(ji.a.Description,{children:c.value})]})})})})]},l))}s=Object(a.jsx)("table",{className:"annotations",children:Object(a.jsx)("tbody",{children:o})})}else s=Object(a.jsx)("p",{className:"info-text",children:"There are currently no annotations for this cell"});var m=null;return null!=r&&(m=Object(a.jsx)(xr.a.Actions,{children:Object(a.jsx)(Cr.a,{fluid:!0,label:Object(a.jsx)(Kr.a,{defaultValue:"user:comment",options:this.keys,onChange:this.handleSelectKey}),action:Object(a.jsx)(ur.a,{color:"green",icon:"plus",onClick:this.handleSubmit}),placeholder:"Add a new comment...",value:this.state.value,onChange:this.handleChange,onKeyDown:this.handleKeyDown})})),Object(a.jsxs)(xr.a,{open:!0,dimmer:"inverted",size:"small",children:[Object(a.jsx)(xr.a.Header,{children:Object(a.jsx)(zr.a,{columns:2,children:Object(a.jsxs)(zr.a.Row,{children:[Object(a.jsx)(zr.a.Column,{children:"Cell Annotations"}),Object(a.jsx)(zr.a.Column,{children:Object(a.jsx)("div",{className:"header-button",children:Object(a.jsx)(Er,{name:"close",onClick:this.handleClose})})})]})})}),Object(a.jsx)(xr.a.Content,{children:s}),m]})}return null}}]),n}(i.a.Component)),bi=n(189),fi=(n(840),function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={copySuccess:!1},e.copyToClipboard=function(){e.textInput.select(),document.execCommand("copy"),e.setState({copySuccess:!0})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.open,i=t.url,s=t.copySupport;return Object(a.jsxs)(xr.a,{open:r,dimmer:"inverted",size:"small",children:[Object(a.jsx)(xr.a.Header,{children:"Share Link"}),Object(a.jsx)(xr.a.Content,{children:Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:"share-header",children:"Copy link below to share this notebook version"}),s?Object(a.jsx)(Cr.a,{fluid:!0,readOnly:!0,action:{icon:"copy",onClick:function(){return e.copyToClipboard()},content:this.state.copySuccess?"Copied!":"Copy"},value:i,ref:function(t){return e.textInput=t}}):Object(a.jsx)(bi.a,{readOnly:!0,children:Object(a.jsx)("a",{href:i,target:"_blank",children:i})})]})}),Object(a.jsx)(xr.a.Actions,{children:Object(a.jsx)(ur.a,{primary:!0,onClick:n,children:"Done"})})]})}}]),n}(i.a.Component)),vi=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).closeModal=function(){return a.setState({showModal:!1})},a.openModal=function(){return a.setState({showModal:!0})},a.state={showModal:!1},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.branch,n=e.notebook,r=e.onShowHistory,i=e.onSwitchBranch,s=e.project,o=e.copySupport,l=this.state.showModal,c=null;c=n.readOnly?Object(a.jsxs)("span",{children:[Object(a.jsx)("span",{className:"right-padding-sm",children:"at "}),Object(a.jsx)("span",{className:"info-date",children:n.createdAt}),Object(a.jsx)("span",{className:"padding-sm",children:Object(a.jsx)("span",{className:"clickable-icon",children:Object(a.jsx)(gr.a,{name:"play",title:"Latest Version",onClick:function(){return i(t)}})})})]}):Object(a.jsx)("span",{className:"padding-sm",children:Object(a.jsx)("span",{className:"clickable-icon",children:Object(a.jsx)(gr.a,{name:"history",title:"Show history",onClick:r})})});var u=window.env.API_ADV_AUTH,d=window.location.protocol+"//"+window.location.host;return d+=Zt(s.id,t.id,n.id),u&&(d=window.location.protocol+"//"+window.location.host+"/auth/public?workflow-url="+d),Object(a.jsxs)("div",{className:"notebook-header status-header",children:[Object(a.jsx)("span",{children:Object(a.jsx)(gr.a,{name:"fork"})}),Object(a.jsx)("span",{children:"On branch "}),Object(a.jsx)("span",{className:"right-padding-sm",children:Object(a.jsx)("span",{className:"info-bold",children:t.name})}),c,Object(a.jsx)("span",{className:"clickable-icon",children:Object(a.jsx)(gr.a,{name:"linkify",title:"Get shareable link to this notebook",onClick:this.openModal})}),Object(a.jsx)(fi,{url:d,onClose:this.closeModal,open:l,copySupport:o})]})}}]),n}(r.Component),Oi=n(4),gi=n(533),xi=n(1398),Ci=n(353),wi=(n(843),function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).groupBy=function(e,t){return e.reduce((function(e,n){return e[n[t]]||(e[n[t]]=[]),e[n[t]].push(n),e}),{})},e}return Object(b.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.apiEngine,r=t.onDismiss,i=t.onPaste,s=t.onSelect,o=[],l={MIMIR:0,DATA:1,R:2,SAMPLING:1,SCALA:2,SQL:2,MARKDOWN:2,PLOT:2,PYTHON:2,VIZUAL:3},c=n.packages.toList(),u=[[],[],[],[]],d=Object(Oi.a)(c);try{for(d.s();!(e=d.n()).done;){var h=e.value;u[h.name.toUpperCase()in l?l[h.name.toUpperCase()]:1].push(h)}}catch(C){d.e(C)}finally{d.f()}for(var p=[],j=0,m=[0,1,2,3];j<m.length;j++){var b=m[j];p=[];var f,v=u[b],O=Object(Oi.a)(v);try{var g=function(){var e=f.value,t=e.toList();p.push(Object(a.jsx)(ji.a.Item,{children:Object(a.jsx)(ji.a.Header,{children:e.name.toUpperCase()})},e.id));for(var n=function(n){var r=t[n],i=r.suggest?Object(a.jsx)(ji.a.Item,{onClick:function(){return s(e.id,r.id)},children:Object(a.jsx)(ji.a.Content,{children:Object(a.jsx)(ji.a.Header,{as:"a",className:"suggested-action",icon:!0,children:Object(a.jsxs)(Pr.a.Content,{children:[Object(a.jsx)(gr.a,{name:"star",color:"yellow"}),r.name]})})})},p.length):Object(a.jsx)(ji.a.Item,{onClick:function(){return s(e.id,r.id)},children:Object(a.jsx)(ji.a.Content,{children:Object(a.jsx)(ji.a.Header,{as:"a",children:"  "+r.name})})},p.length);p.push(i)},r=0;r<t.length;r++)n(r)};for(O.s();!(f=O.n()).done;)g()}catch(C){O.e(C)}finally{O.f()}o.push(Object(a.jsx)(zr.a.Column,{className:b,width:4,children:Object(a.jsx)(ji.a,{link:!0,children:p})},o.length))}var x=null;return x=null!=i?Object(a.jsxs)("div",{children:["Select a module from the list below or paste ",Object(a.jsx)(gr.a,{name:"paste",link:!0,onClick:i,title:"Paste from clipboard"}),"from clipboard."]}):"Select a module from the list below.",Object(a.jsx)("div",{className:"commands-listing",children:Object(a.jsxs)(Ci.a,{children:[Object(a.jsxs)("div",{className:"commands-listing-header",children:[x,Object(a.jsx)("span",{className:"pull-right clickable-icon",children:Object(a.jsx)(gr.a,{name:"close",link:!0,onClick:r})})]}),Object(a.jsx)(zr.a,{columns:c.length,divided:!0,children:Object(a.jsx)(zr.a.Row,{children:o})})]})})}}]),n}(i.a.Component)),ki=n(83),yi=(n(178),n(453),n(454),n(455),n(844),n(75),n(845),n(536)),_i=n.n(yi),Si=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t,n,a){var r=e.props,i=r.id,s=r.onChange,o=t.getCursor();if(a.to&&a.from&&a.origin)if("+input"===a.origin||"paste"===a.origin){var l=a.text,c=l.length-1,u=l[c].length,d=a.from.line+c,h=u;1===l.length&&(h=a.from.ch+u),o={line:d,ch:h}}else"+delete"===a.origin&&(o={line:a.from.line,ch:a.from.ch});s(i,n,o)},e.handleCursorActivity=function(t,n){var a=t.getCursor();e.props.onCursor(a)},e.tabReplace=function(e){var t=Array(e.getOption("indentUnit")+1).join(" ");e.replaceSelection(t)},e.onClickInactiveCodeCell=function(t){var n=e.props,a=n.onFocus,r=n.onCursor,i=document.getElementById("empxCalc");i.style.height="1em";var s=1.4285*i.offsetHeight,o=i.offsetHeight/1.6585,l=t.nativeEvent.layerY,c=t.nativeEvent.layerX,u=l/s,d=.03448*u,h={line:Math.round(u+d),ch:Math.round(c/o)-1,sticky:"before",xRel:0};a(),r(h)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.cursorPosition,r=t.isActiveCell,i=t.language,s=t.onFocus,o=t.readOnly,l=t.value,c=t.locked,u=null;"python"===i?u="python":"scala"===i?u="text/x-scala":"r"===i?u="text/x-rsrc":"sql"===i?u="text/x-sql":"markdown"===i&&(u="markdown");var d=null;return r?d=c?Object(a.jsx)("div",{className:"editor-container",children:"Code Cell"}):Object(a.jsx)("div",{className:"editor-container",children:Object(a.jsx)(ki.Controlled,{value:l,cursor:n,options:{autofocus:r,lineNumbers:!0,mode:u,indentUnit:4,readOnly:!r||o,dragDrop:!1,extraKeys:{Tab:this.tabReplace}},onBeforeChange:function(t,n,a){e.handleChange(t,a,n)},onCursor:function(t,n){e.handleCursorActivity(t,n)},onFocus:s})}):c?d=Object(a.jsx)("div",{className:"editor-container",children:"Code Cell"}):"markdown"!==i&&(d=Object(a.jsx)("div",{className:"editor-container",onClick:this.onClickInactiveCodeCell,children:Object(a.jsx)(_i.a,{className:i,children:l})})),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{id:"empxCalc",className:"empxCalc"}),d]})}}]),n}(i.a.Component),Ei=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t,n){var a=n.value,r=e.props,i=r.id;(0,r.onChange)(i,a)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.value,r=null;return r=null==n?"":n.toString(),Object(a.jsx)(xi.a.Input,{placeholder:t,fluid:!0,value:r,onChange:this.handleChange})}}]),n}(i.a.Component),Ni=n(1395),Ai=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t,n){var a=n.checked,r=e.props,i=r.id;(0,r.onChange)(i,a)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.value;return Object(a.jsx)("span",{className:"boolctrl",children:Object(a.jsx)(Ni.a,{checked:void 0!==e&&e,onChange:this.handleChange})})}}]),n}(i.a.Component),Di=function(e){for(var t,n="";e>0;)t=(e-1)%26,n=String.fromCharCode(t+65)+n,e=(e-t-1)/26;return n},Ii=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t,n){var a=n.value,r=e.props,i=r.id;(0,r.onChange)(i,a)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.dataset,n=e.isRequired,r=e.value,i=[];if(null!=t){n||i.push({key:"",text:"<none>",value:""});for(var s=0;s<t.columns.length;s++){var o=t.columns[s],l="";l=""!==o.name?o.name:Di(s+1),i.push({key:o.id,text:l,value:o.id})}}return Object(a.jsx)(Kr.a,{value:r,selection:!0,fluid:!0,scrolling:!0,options:i,onChange:this.handleChange})}}]),n}(i.a.Component),Pi=(n(63),function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleAdd=function(e,t){for(var n=a.props,r=n.id,i=n.controlSpec,s=n.datasets,o=n.onChange,l=a.props.value,c=[],u=0;u<l.length;u++)c.push(l[u]);var d=Xa(i.parameters,s,null),h=Xa(i.parameters,s,null);a.setState({addTuple:h}),d[e]=t,c.push(d),o(r,c)},a.handleChange=function(e,t,n){for(var r=a.props,i=r.id,s=r.onChange,o=a.props.value,l=[],c=0;c<o.length;c++)if(c===e||null===n){var u=Object(j.a)({},o[c]);u[t]=n,l.push(u)}else l.push(o[c]);s(i,l)},a.handleDelete=function(e,t){for(var n=t.value,r=a.props,i=r.id,s=r.onChange,o=a.props.value,l=[],c=0;c<o.length;c++)c!==n?l.push(o[c]):a.setState({addTuple:""});s(i,l)},a.handleMoveDown=function(e,t){for(var n=t.value,r=a.props,i=r.id,s=r.onChange,o=a.props.value,l=[],c=null,u=0;u<o.length;u++)u===n?c=o[u]:(l.push(o[u]),u===n+1&&l.push(c));s(i,l)},a.handleMoveUp=function(e,t){for(var n=t.value,r=a.props,i=r.id,s=r.onChange,o=a.props.value,l=[],c=null,u=0;u<o.length;u++)u===n-1?c=o[u]:(l.push(o[u]),u===n&&l.push(c));s(i,l)};var r=a.props,i=(r.id,r.controlSpec),s=r.datasets,o=Xa(i.parameters,s,null);return a.state={addTuple:o},a}return Object(b.a)(n,[{key:"render",value:function(){for(var e=this,t=this.props,n=t.controlSpec,r=t.datasets,i=t.artifacts,s=t.id,o=t.selectedDataset,l=t.serviceProperties,c=t.value,u=[],d=[],h=0;h<n.parameters.length;h++){var p=n.parameters[h];d.push(Object(a.jsx)("td",{className:"inner-form-header",children:p.name},"th_ctrl"+h))}d.push(Object(a.jsx)("td",{className:"inner-form-header"},"th_btn1")),d.push(Object(a.jsx)("td",{className:"inner-form-header"},"th_btn2")),d.push(Object(a.jsx)("td",{className:"inner-form-header"},"th_btn3")),u.push(Object(a.jsx)("tr",{children:d},"header"));for(var j=function(t){for(var d=c[t],h=Qa(n,d,r),p="r_"+t+"_"+s,j=[],m=0;m<n.parameters.length;m++){var b=n.parameters[m];j.push(Object(a.jsx)("td",{className:"inner-form-control",children:Object(a.jsx)(zi,{controlSpec:b,datasets:r,artifacts:i,onChange:function(n,a){return e.handleChange(t,n,a)},selectedDataset:h||o,serviceProperties:l,value:d[b.id]},b.id)},p+"_ctrl_"+b.id))}j.push(Object(a.jsx)("td",{className:"inner-form-button",children:Object(a.jsx)(ur.a,{icon:"trash",value:t,negative:!0,onClick:e.handleDelete,title:"Delete row from the list"})},p+"_btn_del")),j.push(Object(a.jsx)("td",{className:"inner-form-button",children:Object(a.jsx)(ur.a,{icon:"chevron up",disabled:0===t,onClick:e.handleMoveUp,title:"Move row one position up",value:t})},p+"_btn_up")),j.push(Object(a.jsx)("td",{className:"inner-form-button",children:Object(a.jsx)(ur.a,{icon:"chevron down",disabled:t===c.length-1,onClick:e.handleMoveDown,title:"Move row one position down",value:t})},p+"_btn_dowm")),u.push(Object(a.jsx)("tr",{children:j},p))},m=0;m<c.length;m++)j(m);for(var b=[],f=this.state.addTuple,v="r_"+(c.length+1)+"_"+s,O=function(t){var s=n.parameters[t];b.push(Object(a.jsx)("td",{className:"inner-form-control",children:Object(a.jsx)(zi,{controlSpec:s,datasets:r,artifacts:i,onChange:function(t,n){return e.handleAdd(s.id,n)},selectedDataset:o,serviceProperties:l,value:f[s.id]},s.id)},v+"_ctrl_"+s.id))},g=0;g<n.parameters.length;g++)O(g);var x=Object(a.jsx)("tr",{children:b},v);return Object(a.jsx)("div",{children:Object(a.jsx)("table",{className:"inner-form",children:Object(a.jsxs)("tbody",{children:[u,x]})})})}}]),n}(i.a.Component)),Ri=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t,n){var a=e.props,r=a.id,i=a.onChange,s=Object(j.a)({},e.props.value);s[t]=n,i(r,s)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.controlSpec,n=e.datasets,r=e.artifacts,i=e.selectedDataset,s=e.serviceProperties,o=e.value,l=[],c=[];console.log("ROW"),console.log(o);for(var u=0;u<t.parameters.length;u++){var d=t.parameters[u];console.log("CHILD"),console.log(d),l.push(Object(a.jsx)("td",{className:"inner-form-header",children:d.name},l.length)),c.push(Object(a.jsx)("td",{className:"inner-form-control",children:Object(a.jsx)(zi,{controlSpec:d,datasets:n,artifacts:r,onChange:this.handleChange,selectedDataset:i,serviceProperties:s,value:o[d.id]},d.id)},c.length))}return Object(a.jsx)("table",{className:"inner-form",children:Object(a.jsxs)("tbody",{children:[Object(a.jsx)("tr",{children:l},"row-header"),Object(a.jsx)("tr",{children:c},"row-values")]})})}}]),n}(i.a.Component),Ti=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleChange=function(e,t){var n=t.value,r=a.props,i=r.id,s=r.onChange;a.state.ctrlValue!==n&&(a.setState({ctrlValue:n}),s(i,n,null))};var r=a.props.value;return a.state={ctrlValue:r},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.datasets,n=e.isRequired,r=e.value,i=[];n||i.push({key:"",text:"<none>",value:""});for(var s=0;t&&s<t.length;s++){var o=t[s];i.push({key:o.name,text:o.name,value:o.name})}return Object(a.jsx)(Kr.a,{value:r,selection:!0,fluid:!0,scrolling:!0,options:i,onChange:this.handleChange})}}]),n}(i.a.Component),Mi=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleChange=function(e,t){var n=t.value,r=a.props,i=r.id,s=r.onChange;a.state.ctrlValue!==n&&(a.setState({ctrlValue:n}),s(i,n,null))};var r=a.props.value;return a.state={ctrlValue:r},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.artifacts,n=e.artifactType,r=e.isRequired,i=e.value,s=[];r||s.push({key:"",text:"<none>",value:""});for(var o=0;o<t.length;o++){var l=t[o];null!=n&&n!=l.artifact_type||s.push({key:l.name,text:l.name,value:l.name})}return Object(a.jsx)(Kr.a,{value:i,selection:!0,fluid:!0,scrolling:!0,options:s,onChange:this.handleChange})}}]),n}(i.a.Component),Li=n(563),Fi=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).clearSourceFile=function(){var t=e.props,n=t.id;(0,t.onChange)(n,{fileid:null,filename:null,url:null})},e.handleFileDrop=function(t){var n=e.props,a=n.id;(0,n.onChange)(a,{fileid:null,filename:t[0].name,file:t[0],url:null})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.serviceProperties,t=this.props.value,n=t.fileid,r=t.filename,i=null,s=null;if(null!=r){var o=null;o=null!=n?"Uploaded":"Upload";var l=null,c=null;null!=r?(c=o+" file from local disk",l=r):l="unknown",s="file-content",i=Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:"info-text",children:c}),Object(a.jsx)("p",{className:"file-name",children:l}),Object(a.jsx)(ur.a,{icon:"trash",title:"Clear source file",size:"large",negative:!0,onClick:this.clearSourceFile})]})}else{var u=null;e.maxFileSize&&(u=Object(a.jsxs)("p",{className:"upload-info",children:[Object(a.jsx)(gr.a,{name:"info circle"}),Object(a.jsx)("span",{children:"The size for file uploads is limited to"}),Object(a.jsx)("span",{className:"upload-size",children:" "+Wt(e.maxFileSize,2)})]})),s="file-selector",i=Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:"info-text md-top",children:"Upload file from local disk"}),Object(a.jsx)("div",{className:"dropzone-container",children:Object(a.jsx)("div",{className:"dropzone",children:Object(a.jsx)(Li.a,{onDrop:this.handleFileDrop,multiple:!1,children:Object(a.jsx)("p",{className:"p-dropzone",children:"Drop file here or click to select file to upload."})})})}),u]})}return Object(a.jsx)("div",{className:s,children:i})}}]),n}(i.a.Component),Ui=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleChange=function(e,t){var n=t.value,r=a.props,i=r.id;(0,r.onChange)(i,n)};var r=e.options,i=[];e.isRequired||i.push({key:"",text:"<none>",value:""});for(var s=0;s<r.length;s++){var o=r[s];if("object"===typeof o){var l=null;l=o.key?o.key:o.value,i.push({key:l,text:o.text,value:l})}else i.push({key:o,text:o,value:o})}return a.state={listItems:i},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.value,r=this.state.listItems;return Object(a.jsx)(Kr.a,{name:t,selection:!0,scrolling:!0,fluid:!0,options:r,value:n,onChange:this.handleChange})}}]),n}(i.a.Component),Bi=n(31);function Vi(e){var t=Object(r.useState)(""),n=Object(Bi.a)(t,2),i=n[0],s=n[1],o=function(){var t=e.id,n=e.onChange;""!==i.trim()&&(n(t,{fileid:null,filename:null,url:i}),s(""))},l=e.value,c=l.fileid,u=l.url,d=null,h=null;if(null!=u){var p=u,j=(null!=c?"Downloaded":"Download")+" file from URL";h="file-content",d=Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:"info-text",children:j}),Object(a.jsx)("p",{className:"file-name",children:p}),Object(a.jsx)(ur.a,{icon:"trash",title:"Clear source file",size:"large",negative:!0,onClick:function(){var t=e.id;(0,e.onChange)(t,{fileid:null,filename:null,url:null})}})]})}else h="file-selector",d=Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:"info-text md-top",children:"Download file from URL"}),Object(a.jsx)(xi.a.Input,{type:"text",value:i,placeholder:"Upload File from Url",icon:"world",iconPosition:"left",fluid:!0,action:Object(a.jsx)(ur.a,{icon:"upload",onClick:o}),onChange:function(e){s(e.target.value)},onKeyDown:function(e){e.keyCode===Ft&&o()},onBlur:o})]});return Object(a.jsx)("div",{className:h,children:d})}var zi=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.controlSpec,n=e.datasets,r=e.artifacts,i=e.selectedDataset,s=e.serviceProperties,o=e.value,l=e.onChange;return t.datatype===La?Object(a.jsx)(Ii,{id:t.id,isRequired:!!t.required,name:t.id,dataset:i,value:o,onChange:l},t.id):"artifact"===t.datatype?Object(a.jsx)(Mi,{id:t.id,isRequired:!!t.required,name:t.id,artifactType:t.artifactType,artifacts:r,datasets:n,value:o,onChange:l},t.id):t.datatype===Fa?Object(a.jsx)(Ti,{id:t.id,isRequired:!!t.required,name:t.id,value:o,onChange:l,artifacts:r,datasets:n},t.id):t.datatype===Ja&&t.values?Object(a.jsx)(Ui,{id:t.id,isRequired:!!t.required,name:t.id,options:t.values,value:o,onChange:l},t.id):t.datatype===Ua||t.datatype===Va||t.datatype===qa||"rowidx"===t.datatype||"scalar"===t.datatype||t.datatype===Ja?Object(a.jsx)(Ei,{id:t.id,name:t.id,placeholder:t.name,value:o,onChange:l},t.id):t.datatype===Ta?Object(a.jsx)(Ai,{id:t.id,name:t.id,value:o,onChange:l},t.id):t.datatype===Ba?Object(a.jsx)(Fi,{id:t.id,isRequired:!!t.required,name:t.id,serviceProperties:s,value:o,onChange:l},t.id):"url"===t.datatype?Object(a.jsx)(Vi,{id:t.id,isRequired:!!t.required,name:t.id,serviceProperties:s,value:o,onChange:l},t.id):t.datatype===za?Object(a.jsx)(Pi,{controlSpec:t,datasets:n,artifacts:r,id:t.id,name:t.id,selectedDataset:i,serviceProperties:s,value:void 0===o?[]:o,onChange:l},t.id):t.datatype===Ha?Object(a.jsx)(Ri,{controlSpec:t,datasets:n,artifacts:r,id:t.id,name:t.id,selectedDataset:i,serviceProperties:s,value:void 0===o?{}:o,onChange:l},t.id):null}}]),n}(i.a.Component),Hi=n(14),qi=n(1412),Ji=i.a.createContext({moduleProgress:0}),Ki=(Ji.Consumer,Ji),Wi=n(539),Gi=n.n(Wi);function Yi(e){var t=e.selectedCommand,n=e.datasets,i=(e.artifacts,e.selectedDataset),s=e.serviceProperties,o=e.values,l=e.onChange,c={name:null,file:{fileid:null,filename:null,url:null},loadFormat:"csv",schema:[],loadInferTypes:!0,loadDetectHeaders:!0,loadDataSourceErrors:!1,loadOptions:[]},u=Object(r.useState)(c),d=Object(Bi.a)(u,2),h=d[0],p=d[1],m=Object(r.useState)(c),b=Object(Bi.a)(m,2),f=b[0],v=b[1],O=Object(r.useState)(null),g=Object(Bi.a)(O,2),x=g[0],C=g[1],w=[h,f],k=[p,v];Object(r.useEffect)((function(){console.log(o.file),null==o.file.url?(k[0](o),C(0)):(k[1](o),C(1))}),[]);var y=function(e,t){k[x](Object(j.a)(Object(j.a)({},w[x]),{},Object(Hi.a)({},e,t))),l(e,t)};Object(r.useEffect)((function(){l("bulk",w[x])}),[x]);var _=[{menuItem:Object(a.jsx)(bi.a,{size:"large",content:"From Local Machine",icon:"computer"}),render:function(){return Object(a.jsx)(qi.a.Pane,{children:Object(a.jsx)(Qi,{datasets:n,artifacts:[],selectedDataset:i,serviceProperties:s,selectedCommand:t,tabState:h,isUrlPane:!1,onChange:y})})}},{menuItem:Object(a.jsx)(bi.a,{size:"large",content:"From the Internet",icon:"world"}),render:function(){return Object(a.jsx)(qi.a.Pane,{children:Object(a.jsx)(Qi,{datasets:n,artifacts:[],selectedDataset:i,serviceProperties:s,selectedCommand:t,tabState:f,isUrlPane:!0,onChange:y})})}}],S=Object(r.useContext)(Ki);return S.moduleProgress&&0<S.moduleProgress<100?Object(a.jsx)(Gi.a,{percent:S.moduleProgress,autoSuccess:!0,indicating:!0,progress:!0,children:"Uploading"}):Object(a.jsx)(qi.a,{activeIndex:x,onTabChange:function(e,t){var n=t.activeIndex;return C(n)},panes:_})}var Qi=function(e){for(var t=e.datasets,n=e.artifacts,s=e.selectedDataset,o=e.serviceProperties,l=e.selectedCommand,c=e.tabState,u=e.isUrlPane,d=e.onChange,h=[],p=Object(r.useState)(!1),j=Object(Bi.a)(p,2),m=j[0],b=j[1],f=function(){return b((function(e){return!e}))},v=0;v<l.parameters.length;v++){var O=l.parameters[v];!0===u&&O.datatype===Ba&&(O={datatype:"url",hidden:!1,id:"file",index:1,name:"URL",required:!0});var g="form-options";["name","file","loadFormat"].includes(O.id)||(g+=m?"-advanced":"-advanced-hidden"),null==O.parent&&!0!==O.hidden&&O.datatype!==Ma&&h.push(Object(a.jsxs)("tr",{className:g,children:[Object(a.jsx)("td",{className:"form-label",children:O.name}),Object(a.jsx)("td",{className:"form-control",children:Object(a.jsx)(zi,{controlSpec:O,datasets:t,artifacts:n,selectedDataset:s,serviceProperties:o,value:c[O.id],onChange:d},O.id)})]},O.id))}return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("table",{className:"form-table wide",children:Object(a.jsx)("tbody",{children:h})}),Object(a.jsx)("div",{className:"form-add-button",children:Object(a.jsx)(ur.a,{onClick:f,basic:!0,content:"".concat(m?"Hide":"Show"," Advanced Options")})})]})};function Zi(e){var t=e.components,n=e.selectedCommand,r=e.cssTable,i=e.datasets,s=e.artifacts,o=e.selectedDataset,l=e.serviceProperties,c=e.values,u=e.onChange,d=Object(a.jsx)("table",{className:r,children:Object(a.jsx)("tbody",{children:t})});switch(n.id){case"load":return Object(a.jsx)(Yi,{selectedCommand:n,datasets:i,artifacts:s,selectedDataset:o,serviceProperties:l,values:c,onChange:u});default:return d}}var $i=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){for(var e=this.props,t=e.datasets,n=e.artifacts,r=e.selectedCommand,i=e.serviceProperties,s=e.onChange,o=e.values,l=Qa(r,o,t),c="form-table",u=[],d=0;d<r.parameters.length;d++){var h=r.parameters[d];null==h.parent&&!0!==h.hidden&&h.datatype!==Ma&&(u.push(Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"form-label",children:h.name}),Object(a.jsx)("td",{className:"form-control",children:Object(a.jsx)(zi,{controlSpec:h,datasets:t,artifacts:n,selectedDataset:l,serviceProperties:i,value:o[h.id],onChange:s},h.id)})]},h.id)),h.datatype===Ba&&(c+=" wide"))}return Object(a.jsx)(Zi,{components:u,selectedCommand:r,cssTable:c,datasets:t,artifacts:n,selectedDataset:l,serviceProperties:i,values:o,onChange:s})}}]),n}(i.a.Component),Xi="ADD_ANNOTATION",es="CREATE_DATASET",ts="DELETE_ANNOTATION",ns="DELETE_COLUMN",as="DELETE_DATASET",rs="DELETE_ROW",is="GET_DATASET",ss="GET_DATASET_FRAME",os="INSERT_COLUMN",ls="INSERT_ROW",cs="NEW_DATASET_OBJECT",us="OUTPUT_ANNOTATIONS",ds="OUTPUT_COLUMN_NAMES",hs="OUTPUT_CELL_VALUES",ps="OUTPUT_D3_PLOT",js="OUTPUT_BOKEH_PLOT",ms="OUTPUT_MAP",bs="EXPORT_MODULE",fs="RENAME_DATASET",vs="UPDATE_CELL_VALUE",Os="UPDATE_ANNOTATION",gs="UPDATE_DATASET",xs=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSelect=function(t,n){var a=n.value,r=e.props.onSelect,i=[];a===Xi?(i.push("# Add new annotation for dataset cells. Note that rows"),i.push("# and columns are referenced by their unique identifiers."),i.push("col = ds.columns[ds.column_index('name-label-or-index')]"),i.push("for row in ds.rows:"),i.push("    annos = ds.annotations.for_cell(col.identifier, row.identifier)"),i.push("    if not annos.contains('some:key'):"),i.push("        annos.add('some:key', 'some-value')")):a===es?(i.push("# Create a new dataset in the data store. Expects a"),i.push("# dataset object and a unique dataset name."),i.push("vizierdb.create_dataset('unique-ds-name', ds)")):a===ts?(i.push("# Delete annotations for dataset cell. Delete is similar to"),i.push("# update. Delete an annotation by setting its value to None."),i.push("# Rows and columns are referenced by their unique identifiers."),i.push("col = ds.columns[ds.column_index('name-label-or-index')]"),i.push("for row in ds.rows:"),i.push("    annos = ds.annotations.for_cell(col.identifier, row.identifier)"),i.push("    for a in annos.find_all('some:key'):"),i.push("        annos.update(identifier=a.identifier, value=None)")):a===ns?(i.push("# Delete dataset column by name (only if column names"),i.push("# are unique), spreadsheet label ('A', 'B', ...), or"),i.push("# column index (0, 1, ...)."),i.push("ds.delete_column('name-label-or-index')")):a===as?(i.push("# Delete dataset with the given name from data store."),i.push("vizierdb.drop_dataset('unique-ds-name')")):a===rs?(i.push("# Delete dataset rows by removing them from the list of"),i.push("# rows using the row index."),i.push("del ds.rows[index]")):a===is?(i.push("# Get object for dataset with given name."),i.push("ds = vizierdb.get_dataset('unique-ds-name')")):a===ss?(i.push("# Get read-only pandas dataframe object for dataset with given name."),i.push("df = vizierdb.get_dataset_frame('unique-ds-name')")):a===os?(i.push("# Create a new column with a given name. The column"),i.push("# position is optional."),i.push("ds.insert_column('column-name', position=0)")):a===ls?(i.push("# When inserting a row the list of values and the row"),i.push("# position are optional. By default row cells are None."),i.push("ds.insert_row(values=['list-of-values-for-each-column'], position=0)")):a===cs?(i.push("# Get object containing an empty dataset."),i.push("ds = vizierdb.new_dataset()")):a===us?(i.push("# Print all annotations for dataset column. Note that"),i.push("# rows and columns are referenced by their unique identifiers."),i.push("col = ds.columns[ds.column_index('name-label-or-index')]"),i.push("for row in ds.rows:"),i.push("    annos = ds.annotations.for_cell(col.identifier, row.identifier)"),i.push("    for key in annos.keys():"),i.push("        for a in annos.find_all(key):"),i.push("            print(a.key + ' = ' + str(a.value))")):a===ds?(i.push("# Iterate over list of dataset columns and print column name"),i.push("for col in ds.columns:"),i.push("    print(col.name)")):a===hs?(i.push("# Iterate over list of dataset rows and print cell value."),i.push("# Reference column by name, label ('A', 'B', ...), or"),i.push("# column index (0, 1, ...)."),i.push("for row in ds.rows:"),i.push("    print(row.get_value('name-label-or-index'))")):a===ps?(i.push("# Generate a plot using Vizier's internal D3-based engine."),i.push("# (Expects a dataset named `ds`)"),i.push("ds.show_d3_plot('bar_cluster', "),i.push("  labels_inner= [ 'LINE 1',  'LINE 2',  'LINE 3'],"),i.push("  keys        = [ 'VALUE-1', 'VALUE-2', 'VALUE-3'],"),i.push("  key_col     = 'KEY-COLUMN-NAME',"),i.push("  value_cols  = [ 'VALUE-COL-1', 'VALUE-COL-2', 'VALUE-COL-3'],"),i.push("  title       = 'My Plot',"),i.push("  legend_title='Legend'"),i.push(")")):a===js?(i.push("# Generate a plot using Bokeh"),i.push("# (Expects a dataset named `ds`)"),i.push("# See https://bokeh.pydata.org/en/latest/docs/reference.html"),i.push("from bokeh.io import show"),i.push("from bokeh.plotting import figure"),i.push("plot = figure(title = 'MyFigure')"),i.push("plot.line("),i.push("  x = 'X-COLUMN-NAME', "),i.push("  y = 'Y-COLUMN-NAME', "),i.push("  source = ds.to_bokeh()"),i.push(")"),i.push("show(plot)")):a===ms?(i.push("# Render an interactive OpenStreetMap with points marked"),i.push("# (Expects a dataset named `ds`)"),i.push("ds.show_map("),i.push("  lat_col = 'LATITUDE-COLUMN-NAME',"),i.push("  lon_col = 'LONGITUDE-COLUMN-NAME',"),i.push("  label_col = 'LABEL-COLUMN-NAME' # Optional"),i.push(")")):a===bs?(i.push("# Export a variable, a function or a class for use in subsequent cells"),i.push("def add_numbers(number_1, number_2):"),i.push("    print('adding ' + str(number_1) + ' + ' +str(number_2))"),i.push("    return number_1 + number_2"),i.push("vizierdb.export_module("),i.push("    add_numbers"),i.push(")"),i.push("#  Use it in a subsequent like normal: add_numbers(1,2)")):a===fs?(i.push("# Rename given dataset to a new (unique) name."),i.push("vizierdb.rename_dataset('unique-ds-name', 'new-unique-ds-name')")):a===vs?(i.push("# Iterate over list of dataset rows and update cell value."),i.push("# Reference column by name, label ('A', 'B', ...), or"),i.push("# column index (0, 1, ...)."),i.push("for row in ds.rows:"),i.push("    row.set_value('name-label-or-index', value)")):a===Os?(i.push("# Update all annotations for dataset cell. Note that"),i.push("# rows and columns are referenced by their unique identifiers."),i.push("col = ds.columns[ds.column_index('name-label-or-index')]"),i.push("for row in ds.rows:"),i.push("    annos = ds.annotations.for_cell(col.identifier, row.identifier)"),i.push("    for a in annos.find_all('some:key'):"),i.push("        annos.update(identifier=a.identifier, value='some-value')")):a===gs&&(i.push("# Update existing dataset with given name."),i.push("vizierdb.update_dataset('unique-ds-name', ds)")),r(i)},e}return Object(b.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"snippet-selector",children:Object(a.jsx)(zr.a,{columns:4,divided:!0,children:Object(a.jsxs)(zr.a.Row,{children:[Object(a.jsx)(zr.a.Column,{width:4,children:Object(a.jsxs)(ji.a,{link:!0,children:[Object(a.jsx)(ji.a.Item,{children:Object(a.jsxs)(ji.a.Header,{children:[Object(a.jsx)(gr.a,{name:"desktop"})," Access & Output"]})}),Object(a.jsx)(ji.a.Item,{value:is,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Get Dataset"})}),Object(a.jsx)(ji.a.Item,{value:ss,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Get Dataset Dataframe"})}),Object(a.jsx)(ji.a.Item,{value:ds,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Print Column Names"})}),Object(a.jsx)(ji.a.Item,{value:hs,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Print Cell Values"})}),Object(a.jsx)(ji.a.Item,{value:us,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Print Cell Annotations"})}),Object(a.jsx)(ji.a.Item,{value:ps,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Output Plot (D3)"})}),Object(a.jsx)(ji.a.Item,{value:js,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Output Plot (Bokeh)"})}),Object(a.jsx)(ji.a.Item,{value:ms,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Output Map"})}),Object(a.jsx)(ji.a.Item,{value:bs,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Export Module"})})]})},"output"),Object(a.jsx)(zr.a.Column,{width:4,children:Object(a.jsxs)(ji.a,{link:!0,children:[Object(a.jsx)(ji.a.Item,{children:Object(a.jsxs)(ji.a.Header,{children:[Object(a.jsx)(gr.a,{name:"plus"})," New"]})}),Object(a.jsx)(ji.a.Item,{value:cs,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"New Dataset Object"})}),Object(a.jsx)(ji.a.Item,{value:os,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Insert Column"})}),Object(a.jsx)(ji.a.Item,{value:ls,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Insert Row"})}),Object(a.jsx)(ji.a.Item,{value:Xi,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Annotate Cell Value"})})]})},"new"),Object(a.jsx)(zr.a.Column,{width:4,children:Object(a.jsxs)(ji.a,{link:!0,children:[Object(a.jsx)(ji.a.Item,{children:Object(a.jsxs)(ji.a.Header,{children:[Object(a.jsx)(gr.a,{name:"edit"})," Update"]})}),Object(a.jsx)(ji.a.Item,{value:vs,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Edit Cell Values"})}),Object(a.jsx)(ji.a.Item,{value:Os,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Update Cell Annotations"})}),Object(a.jsx)(ji.a.Item,{value:gs,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Save Dataset"})}),Object(a.jsx)(ji.a.Item,{value:es,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Save Dataset As ..."})}),Object(a.jsx)(ji.a.Item,{value:fs,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Rename Dataset"})})]})},"update"),Object(a.jsx)(zr.a.Column,{width:4,children:Object(a.jsxs)(ji.a,{link:!0,children:[Object(a.jsx)(ji.a.Item,{children:Object(a.jsxs)(ji.a.Header,{children:[Object(a.jsx)(gr.a,{name:"trash"})," Delete"]})}),Object(a.jsx)(ji.a.Item,{value:as,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Delete Dataset"})}),Object(a.jsx)(ji.a.Item,{value:ns,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Delete Dataset Column"})}),Object(a.jsx)(ji.a.Item,{value:rs,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Delete Dataset Row"})}),Object(a.jsx)(ji.a.Item,{value:ts,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Delete Cell Annotations"})})]})},"delete")]})})})}}]),n}(i.a.Component),Cs=(i.a.Component,"WITH_DATASET"),ws="OUTPUT_ANNOTATIONS",ks="OUTPUT_COLUMN_NAMES",ys="OUTPUT_CELL_VALUES",_s=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSelect=function(t,n){var a=n.value,r=e.props.onSelect,i=[];a===Cs?(i.push("// do something with a dataset with given name."),i.push('VizierDB.withDataset("unique-ds-name", ds => { //do things with ds here })')):a===ws?i.push('VizierDB.outputAnnotations("unique-ds-name")'):a===ks?(i.push("//Iterate over list of dataset columns and print column name"),i.push('ds.schema.map(se => se._1).mkString("<br>")')):a===ys&&(i.push("//Iterate over list of dataset rows and print cell value."),i.push('ds.toList.map(row => row.tuple.mkString(",")).mkString("<br>")')),r(i)},e}return Object(b.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"snippet-selector",children:Object(a.jsx)(zr.a,{columns:4,divided:!0,children:Object(a.jsxs)(zr.a.Row,{children:[Object(a.jsx)(zr.a.Column,{width:4,children:Object(a.jsxs)(ji.a,{link:!0,children:[Object(a.jsx)(ji.a.Item,{children:Object(a.jsxs)(ji.a.Header,{children:[Object(a.jsx)(gr.a,{name:"desktop"})," Access & Output"]})}),Object(a.jsx)(ji.a.Item,{value:Cs,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Get Dataset"})}),Object(a.jsx)(ji.a.Item,{value:ks,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Print Column Names"})}),Object(a.jsx)(ji.a.Item,{value:ys,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Print Cell Values"})}),Object(a.jsx)(ji.a.Item,{value:ws,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Print Cell Annotations"})})]})},"output"),Object(a.jsx)(zr.a.Column,{width:4,children:Object(a.jsx)(ji.a,{link:!0,children:Object(a.jsx)(ji.a.Item,{children:Object(a.jsxs)(ji.a.Header,{children:[Object(a.jsx)(gr.a,{name:"plus"})," New"]})})})},"new"),Object(a.jsx)(zr.a.Column,{width:4,children:Object(a.jsx)(ji.a,{link:!0,children:Object(a.jsx)(ji.a.Item,{children:Object(a.jsxs)(ji.a.Header,{children:[Object(a.jsx)(gr.a,{name:"edit"})," Update"]})})})},"update"),Object(a.jsx)(zr.a.Column,{width:4,children:Object(a.jsx)(ji.a,{link:!0,children:Object(a.jsx)(ji.a.Item,{children:Object(a.jsxs)(ji.a.Header,{children:[Object(a.jsx)(gr.a,{name:"trash"})," Delete"]})})})},"delete")]})})})}}]),n}(i.a.Component),Ss=(i.a.Component,"WITH_DATASET"),Es="OUTPUT_ANNOTATIONS",Ns="OUTPUT_COLUMN_NAMES",As="OUTPUT_CELL_VALUES",Ds=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSelect=function(t,n){var a=n.value,r=e.props.onSelect,i=[];a===Ss?(i.push("// do something with a dataset with given name."),i.push('vizierdb.withDataset("unique-ds-name", ds => { //do things with ds here })')):a===Es?i.push('vizierdb.outputAnnotations("unique-ds-name")'):a===Ns?(i.push("//Iterate over list of dataset columns and print column name"),i.push('ds.schema.map(se => se._1).mkString("<br>")')):a===As&&(i.push("//Iterate over list of dataset rows and print cell value."),i.push('ds.toList.map(row => row.tuple.mkString(",")).mkString("<br>")')),r(i)},e}return Object(b.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"snippet-selector",children:Object(a.jsx)(zr.a,{columns:4,divided:!0,children:Object(a.jsxs)(zr.a.Row,{children:[Object(a.jsx)(zr.a.Column,{width:4,children:Object(a.jsxs)(ji.a,{link:!0,children:[Object(a.jsx)(ji.a.Item,{children:Object(a.jsxs)(ji.a.Header,{children:[Object(a.jsx)(gr.a,{name:"desktop"})," Access & Output"]})}),Object(a.jsx)(ji.a.Item,{value:Ss,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Get Dataset"})}),Object(a.jsx)(ji.a.Item,{value:Ns,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Print Column Names"})}),Object(a.jsx)(ji.a.Item,{value:As,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Print Cell Values"})}),Object(a.jsx)(ji.a.Item,{value:Es,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Print Cell Annotations"})})]})},"output"),Object(a.jsx)(zr.a.Column,{width:4,children:Object(a.jsx)(ji.a,{link:!0,children:Object(a.jsx)(ji.a.Item,{children:Object(a.jsxs)(ji.a.Header,{children:[Object(a.jsx)(gr.a,{name:"plus"})," New"]})})})},"new"),Object(a.jsx)(zr.a.Column,{width:4,children:Object(a.jsx)(ji.a,{link:!0,children:Object(a.jsx)(ji.a.Item,{children:Object(a.jsxs)(ji.a.Header,{children:[Object(a.jsx)(gr.a,{name:"edit"})," Update"]})})})},"update"),Object(a.jsx)(zr.a.Column,{width:4,children:Object(a.jsx)(ji.a,{link:!0,children:Object(a.jsx)(ji.a.Item,{children:Object(a.jsxs)(ji.a.Header,{children:[Object(a.jsx)(gr.a,{name:"trash"})," Delete"]})})})},"delete")]})})})}}]),n}(i.a.Component),Is="SELECT_TABLE",Ps="JOIN_TABLES",Rs="UNION_TABLES",Ts="DATASET",Ms=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleSelect=function(e,t){var n=t.value,r=a.props.onSelect,i=a.state,s=i.secondaryDatasetValue,o=i.primaryDatasetValue,l=[];n===Is?l.push("SELECT * FROM "+o):n===Ps?l.push("SELECT * FROM "+o+" JOIN "+s):n===Rs?l.push("(SELECT * FROM "+o+") UNION ALL (SELECT * FROM "+s+")"):n===Ts&&l.push(" "+o+" "),r(l)},a.handleSecondaryDatasetChange=function(e){a.setState({secondaryDatasetValue:e})},a.handlePrimaryDatasetChange=function(e){a.setState({primaryDatasetValue:e})},a.state={secondaryDatasetValue:""},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.id,r=t.datasets,i=this.state,s=i.secondaryDatasetValue,o=i.primaryDatasetValue;return Object(a.jsx)("div",{className:"snippet-selector",children:Object(a.jsx)(zr.a,{columns:4,divided:!0,children:Object(a.jsxs)(zr.a.Row,{children:[Object(a.jsx)(zr.a.Column,{width:4,children:Object(a.jsxs)(ji.a,{link:!0,children:[Object(a.jsx)(ji.a.Item,{children:Object(a.jsxs)(ji.a.Header,{children:[Object(a.jsx)(gr.a,{name:"desktop"})," Access & Output"]})}),Object(a.jsx)(ji.a.Item,{className:"sql-example-list-item",value:Is,onClick:this.handleSelect,children:Object(a.jsxs)(ji.a.Content,{as:"a",children:[Object(a.jsx)("span",{className:"sql-example-a-span",children:"Select from"}),Object(a.jsx)("div",{className:"sql-example-ds-selector",children:Object(a.jsx)(Ti,{id:n,isRequired:!1,name:n,datasets:r,value:o,onChange:function(t,n){e.handlePrimaryDatasetChange(n)}},n)}),Object(a.jsx)(gr.a,{name:"plus"})]})}),Object(a.jsx)(ji.a.Item,{className:"sql-example-list-item",value:Ps,onClick:this.handleSelect,children:Object(a.jsxs)(ji.a.Content,{as:"a",children:[Object(a.jsx)("div",{className:"sql-example-ds-selector",children:Object(a.jsx)(Ti,{id:n,isRequired:!1,name:n,datasets:r,value:o,onChange:function(t,n){e.handlePrimaryDatasetChange(n)}},n)}),Object(a.jsx)("span",{className:"sql-example-a-span",children:"Join"}),Object(a.jsx)("div",{className:"sql-example-ds-selector",children:Object(a.jsx)(Ti,{id:n,isRequired:!1,name:n,datasets:r,value:s,onChange:function(t,n){e.handleSecondaryDatasetChange(n)}},n)}),Object(a.jsx)(gr.a,{name:"plus"})]})}),Object(a.jsx)(ji.a.Item,{className:"sql-example-list-item",value:Rs,onClick:this.handleSelect,children:Object(a.jsxs)(ji.a.Content,{as:"a",children:[Object(a.jsx)("div",{className:"sql-example-ds-selector",children:Object(a.jsx)(Ti,{id:n,isRequired:!1,name:n,datasets:r,value:o,onChange:function(t,n){e.handlePrimaryDatasetChange(n)}},n)}),Object(a.jsx)("span",{className:"sql-example-a-span",children:"Union"}),Object(a.jsx)("div",{className:"sql-example-ds-selector",children:Object(a.jsx)(Ti,{id:n,isRequired:!1,name:n,datasets:r,value:s,onChange:function(t,n){e.handleSecondaryDatasetChange(n)}},n)}),Object(a.jsx)(gr.a,{name:"plus"})]})})]})},"output"),Object(a.jsx)(zr.a.Column,{width:4,children:Object(a.jsxs)(ji.a,{link:!0,children:[Object(a.jsx)(ji.a.Item,{children:Object(a.jsxs)(ji.a.Header,{children:[Object(a.jsx)(gr.a,{name:"plus"})," Dataset"]})}),Object(a.jsx)(ji.a.Item,{className:"sql-example-list-item",value:Ts,onClick:this.handleSelect,children:Object(a.jsxs)(ji.a.Content,{as:"a",children:[Object(a.jsx)("span",{className:"sql-example-a-span",children:"Dataset"}),Object(a.jsx)("div",{className:"sql-example-ds-selector",children:Object(a.jsx)(Ti,{id:n,isRequired:!1,name:n,datasets:r,value:o,onChange:function(t,n){e.handlePrimaryDatasetChange(n)}},n)}),Object(a.jsx)(gr.a,{name:"plus"})]})})]})},"new")]})})})}}]),n}(i.a.Component),Ls=(i.a.Component,n(1090),"TABLE"),Fs=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSelect=function(t,n){var a=n.value,r=e.props.onSelect,i=[];a===Ls&&(i.push("| header1 | header2 |"),i.push("| ------- | ------- |"),i.push("| | |")),r(i)},e}return Object(b.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"snippet-selector",children:Object(a.jsx)(zr.a,{columns:4,divided:!0,children:Object(a.jsx)(zr.a.Row,{children:Object(a.jsx)(zr.a.Column,{width:4,children:Object(a.jsxs)(ji.a,{link:!0,children:[Object(a.jsx)(ji.a.Item,{children:Object(a.jsxs)(ji.a.Header,{children:[Object(a.jsx)(gr.a,{name:"desktop"})," Access & Output"]})}),Object(a.jsx)(ji.a.Item,{value:Ls,onClick:this.handleSelect,children:Object(a.jsx)(ji.a.Content,{as:"a",children:"Table"})})]})},"output")})})})}}]),n}(i.a.Component),Us=(i.a.Component,function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleActivateCell=function(){var e=a.props,t=e.cell,n=e.isActiveCell,r=e.onSelectCell;n||r(t)},a.handleAppendCode=function(e){var t=a.state,n=t.codeEditorProps,r=t.formValues,i=t.selectedCommand.codeParameter,s=null==r[i.id]?"":r[i.id],o=n.cursorPosition,l="",c=s.split("\n");if(c.length>0&&""!==s){for(var u=c[o.line],d=0;d<u.length;){var h=u.charAt(d);if(" "!==h&&"\t"!==h)break;d++}l=u.substring(0,d)}for(var p=0;p<e.length;p++)c.splice(o.line+p,0,l+e[p]);""!==s&&c.splice(o.line,0,"");var j=c.join("\n");a.handleFormValueChange(i.id,j),a.handleToggleSnippetSelector()},a.handleFormValueChange=function(e,t,n){if("bulk"!==e){var r=a.state,i=r.codeEditorProps,s=r.formValues,o=r.selectedCommand,l=Object(j.a)({},s);l[e]=t,o.parameters.find((function(t){return t.id===e})).datatype===Fa&&$a(l,o.parameters);var c=null;c=null!=n?{cursorPosition:n}:i,a.setState({upstreamFormValues:!0,formValues:l,codeEditorProps:c})}else a.handleBulkFormValueChange(t)},a.handleBulkFormValueChange=function(e){var t=Object(j.a)({},e);a.setState({formValues:t,upstreamFormValues:!0})},a.handleCursorChange=function(e){a.setState({codeEditorProps:{cursorPosition:e}})},a.handleDismiss=function(){var e=a.props,t=e.cell,n=e.datasets,r=e.onDismiss;t.isNewCell()||a.setState({upstreamFormValues:!1,formValues:Xa(t.commandSpec.parameters,n,t.module.command.arguments),selectedCommand:t.commandSpec,snippetSelectorVisible:!1}),r(t)},a.handleDismissCommandsListing=function(){var e=a.state.selectedCommand,t=a.props.onResetRecommendations;null!=e?a.setState({showCommandsListing:!1}):a.handleDismiss(),t()},a.handleDismissErrors=function(){a.setState({errors:null})},a.handlePasteCommand=function(){var e=a.props,t=e.datasets,n=e.userSettings,r=e.onResetRecommendations;a.setState({formValues:Xa(n.clipboard.commandSpec.parameters,t,n.clipboard.arguments),selectedCommand:n.clipboard.commandSpec,showCommandsListing:!1}),r()},a.handleSelectCommand=function(e,t){var n=a.props,r=n.apiEngine,i=n.datasets,s=n.onResetRecommendations,o=r.packages.getCommandSpec(e,t);a.setState({formValues:Xa(o.parameters,i),selectedCommand:o,showCommandsListing:!1}),s()},a.handleShowCommandsListing=function(){a.setState({showCommandsListing:!0})},a.handleSubmitForm=function(){var e=a.props,t=e.cell,n=e.onSubmit,r=e.apiEngine,i=e.onUpdateProgress;if(null!=n){var s=a.state,o=s.formValues,l=s.selectedCommand,c=Ya(o,l.parameters,r.serviceProperties);c.errors.length>0?a.setState({errors:c.errors,hasErrors:!0}):(a.setState({errors:null,hasErrors:!1,submitted:!0}),n(t,l,c.data,i)),a.setState({upstreamFormValues:!1})}else alert("Cannot submit cell in an active notebook")},a.handleToggleSnippetSelector=function(){var e=a.state.snippetSelectorVisible;a.setState({snippetSelectorVisible:!e})},a.handleF5Press=function(e){e.preventDefault(),a.handleSubmitForm()};var r=e.cell,i=e.datasets,s=null;return r.isNewCell()||(s=Xa(r.commandSpec.parameters,i,r.module.command.arguments)),a.state={codeEditorProps:{cursorPosition:{line:0,ch:0},newLines:""},errors:null,formValues:s,hasErrors:!1,selectedCommand:r.commandSpec,showCommandsListing:null==r.commandSpec,snippetSelectorVisible:!1,upstreamFormValues:!1,submitted:!1},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.apiEngine,r=t.cell,i=t.datasets,s=t.artifacts,o=t.isActiveCell,l=t.onClick,c=t.onSubmit,u=t.userSettings,d=this.state,h=d.errors,p=d.formValues,j=d.hasErrors,m=d.selectedCommand,b=d.showCommandsListing,f=d.snippetSelectorVisible,v=d.submitted,O=null;null!=h&&(O=Object(a.jsx)(fr,{title:"There are errors in the form",errors:h,onDismiss:this.handleDismissErrors}));var g=null,x=null,C=null;if(o&&(null==m||b)){var w=null;null!=u.clipboard&&(w=this.handlePasteCommand),g=Object(a.jsx)(wi,{apiEngine:n,onDismiss:this.handleDismissCommandsListing,onPaste:w,onSelect:this.handleSelectCommand})}else{var k=null;if(o?k=m.codeParameter:r.isNewCell()||(k=r.commandSpec.codeParameter),null!=k)if(v)g=Object(a.jsx)("div",{className:"module-form",children:Object(a.jsx)(hr,{text:"Submitting Cell",size:"small"})});else{var y=null;o&&f&&("python"===k.language?y=Object(a.jsx)(xs,{onSelect:this.handleAppendCode}):"scala"===k.language?y=Object(a.jsx)(_s,{onSelect:this.handleAppendCode}):"r"===k.language?y=Object(a.jsx)(Ds,{onSelect:this.handleAppendCode}):"sql"===k.language?y=Object(a.jsx)(Ms,{datasets:i,onSelect:this.handleAppendCode}):"markdown"===k.language&&(y=Object(a.jsx)(Fs,{onSelect:this.handleAppendCode})));var _=this.state.codeEditorProps,S=!(!r||!r.module)&&r.module.locked;if(o&&"sql"===k.language){var E=p.output_dataset;x=Object(a.jsxs)("div",{className:"ui labeled input",children:[Object(a.jsx)("div",{className:"ui label",children:"Output Dataset"}),Object(a.jsx)(Ei,{id:k.id,name:"Output Dataset",placeholder:"Output Dataset (optional)",isRequired:!1,value:E,onChange:function(t,n){e.handleFormValueChange("output_dataset",n,_.cursorPosition)}},k.id)]})}g=Object(a.jsxs)("div",{children:[Object(a.jsx)(xi.a,{children:Object(a.jsx)(Si,{cursorPosition:_.cursorPosition,editing:!1,id:k.id,isActiveCell:o,language:k.language,onChange:this.handleFormValueChange,onCursor:this.handleCursorChange,onFocus:this.handleActivateCell,readOnly:null==c,value:p[k.id],locked:S},k.id)}),x,y]});var N=f?"Hide":"Show";C=Object(a.jsx)(ur.a,{content:N+"  Code Examples",icon:"info",labelPosition:"left",primary:!0,onClick:this.handleToggleSnippetSelector})}else if(o){var A=j?" error":"";g=v?Object(a.jsx)("div",{className:"module-form"+A,children:Object(a.jsx)(hr,{text:"Submitting Cell",size:"small"})}):Object(a.jsxs)("div",{className:"module-form"+A,children:[Object(a.jsx)("p",{className:"module-form-header"+A,children:m.name}),Object(a.jsx)($i,{datasets:i,artifacts:s,onChange:this.handleFormValueChange,selectedCommand:m,serviceProperties:n.serviceProperties,values:p})]})}else r.isNewCell()&&null!=m?g=Object(a.jsx)("pre",{className:"cell-cmd-text",onClick:l,children:m.name}):null!=r.module&&(g=Object(a.jsx)("pre",{className:"cell-cmd-text",onClick:l,children:r.module.text}))}var D=null;if(null!=c){var I={runCell:this.handleSubmitForm,dismiss:this.handleDismiss,catchF5:this.handleF5Press};D=Object(a.jsx)(gi.HotKeys,{keyMap:{runCell:"ctrl+enter",dismiss:"esc",catchF5:"f5"},handlers:I,children:g})}else D=g;var P=null;return!o||b||v||(P=Object(a.jsxs)("div",{className:"module-form-buttons",children:[C,Object(a.jsx)("span",{className:"padding-lg",children:Object(a.jsx)(ur.a,{content:"Change Command",icon:"wrench",labelPosition:"left",onClick:this.handleShowCommandsListing})}),Object(a.jsx)(ur.a,{content:"Dismiss",icon:"close",labelPosition:"left",negative:!0,onClick:this.handleDismiss}),Object(a.jsx)(ur.a,{content:"Submit",disabled:null==c,icon:"paper plane outline",labelPosition:"left",positive:!0,onClick:this.handleSubmitForm})]})),Object(a.jsxs)("div",{className:"cell-command-area",children:[O,D,P]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n="undefined"!==typeof e.cell.module?e.cell.module.command.arguments:null;if("undefined"!==typeof n&&null!==n&&!1===t.upstreamFormValues){var a=Xa(e.cell.commandSpec.parameters,e.datasets,n);return Object(j.a)(Object(j.a)({},t),{},{formValues:a})}return null}}]),n}(i.a.Component)),Bs=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleInsertBefore=function(){e.props.onInsertCell(xn)},e.handleInsertAfter=function(){e.props.onInsertCell(gn)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.cell,n=e.cellNumber,r=e.isActiveCell,i=e.isNewNext,s=e.isNewPrevious,o=e.notebook,l=e.onAddFilteredCommand,c=e.onCopyCell,u=e.onCreateBranch,d=e.onDeleteCell,h=e.onSelectCell,p=e.onFreezeCell,j=e.onFreezeOneCell,m=e.onThawCell,b=e.onThawOneCell;if(t.isActive()){var f=null;return t.isPending()?f=Object(a.jsx)(gr.a,{name:"hourglass half",title:"Pending"}):t.isRunning()&&(f=Object(a.jsx)(gr.a,{name:"circle notch",title:"Running"})),Object(a.jsx)("div",{className:"cell-menu",children:f})}var v=[];o.readOnly||(v.push(Object(a.jsx)(Kr.a.Header,{content:"Cell"},"header-cell")),v.push(Object(a.jsx)(Kr.a.Item,{disabled:r,icon:"pencil",text:"Edit",title:"Edit notebook cell #"+n,onClick:h},"edit")),v.push(Object(a.jsx)(Kr.a.Item,{disabled:r,icon:"copy",text:"Copy",title:"Copy command from notebook cell #"+n,onClick:c},"copy")),v.push(Object(a.jsx)(Kr.a.Item,{disabled:o.hasActiveCells(),icon:"trash",text:"Delete",title:"Delete notebook cell #"+n,onClick:d},"delete")),v.push(Object(a.jsx)(Kr.a.Divider,{},"div-notebook")),v.push(Object(a.jsx)(Kr.a.Header,{content:"Notebook"},"header-notebook")),v.push(Object(a.jsx)(Kr.a.Item,{disabled:s,icon:"arrow circle up",text:"Insert cell above",title:"Insert new notebook cell before cell #"+n,onClick:this.handleInsertBefore},"insert-above")),v.push(Object(a.jsx)(Kr.a.Item,{disabled:i,icon:"arrow circle down",text:"Insert cell below",title:"Insert new notebook cell after cell #"+n,onClick:this.handleInsertAfter},"insert-below")),t.module.links.has(ie)&&(v.push(Object(a.jsx)(Kr.a.Item,{disabled:!1,icon:"snowflake",text:"Freeze this cell",title:"Freeze cell #"+n+", temporarily removing it from the notebook",onClick:j},"freeze-this")),v.push(Object(a.jsx)(Kr.a.Item,{disabled:!1,icon:"snowflake",text:"Freeze cells from here",title:"Freeze cell #"+n+" and subsequent cells, temporarily removing it from the notebook",onClick:p},"freeze-below"))),t.module.links.has(se)&&(v.push(Object(a.jsx)(Kr.a.Item,{disabled:!1,icon:"sun",text:"Thaw this cell",title:"Thaw cell #"+n+", returning it to the notebook and rerunning it",onClick:b},"thaw-this")),v.push(Object(a.jsx)(Kr.a.Item,{disabled:!1,icon:"sun",text:"Thaw cells up to here",title:"Thaw cell #"+n+" and preceding cells, returning them to the notebook and rerunning it",onClick:m},"thaw-above"))),v.push(Object(a.jsx)(Kr.a.Divider,{},"div-branch"))),v.push(Object(a.jsx)(Kr.a.Header,{content:"Branch"},"header-branch"));var O="1";n>1&&(O+="-"+n),v.push(Object(a.jsx)(Kr.a.Item,{disabled:o.hasActiveCells(),icon:"fork",text:"Create branch",title:"Create new branch containing notebook cells ["+O+"]",onClick:u},"branch")),v.push(Object(a.jsx)(Kr.a.Divider,{},"div-filter")),v.push(Object(a.jsx)(Kr.a.Header,{content:"Filter"},"header-filter")),v.push(Object(a.jsx)(Kr.a.Item,{icon:"filter",text:"Hide "+t.commandSpec.name,title:"Hide all cells with command of type "+t.commandSpec.name+" in the notebook",onClick:l},"hide-cmd"));var g=null;return t.isErrorOrCanceled()&&(t.isCanceled()?g=Object(a.jsx)(gr.a,{name:"cancel",color:"red",title:"Canceled"}):t.isError()&&(g=Object(a.jsx)(gr.a,{name:"warning circle",color:"red",title:"Error"})),g=Object(a.jsx)("div",{className:"cell-status-icon",children:g})),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"cell-menu",children:Object(a.jsx)(Kr.a,{icon:"bars",title:"Cell actions",children:Object(a.jsx)(Kr.a.Menu,{children:v})})}),g]})}}]),n}(i.a.Component),Vs=n(540),zs=n.n(Vs),Hs=n(541),qs=n.n(Hs),Js=n(43),Ks=n(61),Ws=n(20),Gs=n(347),Ys=(n(180),function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var r;Object(m.a)(this,n),(r=t.call(this,e)).handleResize=function(e){try{var t=o.a.findDOMNode(Object(Js.a)(r));r.setState({width:t.offsetWidth})}catch(n){}},r.handleSelectChart=function(e,t){var n=t.value;r.setState({chartType:n})},r.handleToggleGrouped=function(e,t){var n=t.checked;r.setState({grouped:n})},r.selectedReCharts=function(e,t,n,i){var s=t.values,o=t.labels,l=r.selectedReChart(e,o,s);if(void 0===l)return null;if(n)return l(s,i,n,"");for(var c=[],u=1;u<t.labels.length;u++){var d=t.labels[u],h=s;c.push(Object(a.jsx)(Gs.GridTile,{children:l(h,400,n,d)},u))}return Object(a.jsx)(Gs.GridList,{cellHeight:r.props.gridList_cellHeight,cols:Math.floor(i/400),style:{width:{width:i},height:r.props.gridList_height,overflowY:r.props.gridLis_overflowY},children:c})},r.caveatDotTemplate=function(e,t){var n=e.cx,r=e.cy,i=e.payload,s=e.dataKey;return console.log(e),console.log("Caveat? "+i[s+"_caveat"]+" -> @ "+n+", "+r),!1!==i[s+"_caveat"]?Object(a.jsx)("svg",{x:n-10,y:r-10,width:18,height:18,fill:"red",viewBox:"0 0 18 18",children:Object(a.jsx)("text",{x:0,y:0,dy:18,fontSize:16,children:"*"})}):t(e,n,r)},r.caveatDot=function(e){return r.caveatDotTemplate(e,(function(e,t,n){return Object(a.jsx)("svg",{x:t,y:n,width:0,height:0,fill:"green",viewBox:"0 0 0 0"})}))},r.caveatLabels=function(e,t){return function(n){return!n[e[t]+"_caveat"]}},r.selectedReChart=function(e,t,n){var i=[],s=0;if("Area Chart"===e){for(s=1;s<t.length;s++)i.push(Object(a.jsx)(Ws.a,{name:t[s],type:"monotone",dataKey:t[s],stackId:"1",connectNulls:!1,stroke:r.listColors[s-1],fillOpacity:1,fill:r.listColors[s-1]},"id_"+s));return function(e,t,n,s){return Object(a.jsxs)(Ws.b,{width:t,height:400,data:e,margin:{top:10,bottom:50,left:50,right:10},children:[Object(a.jsx)(Ws.x,{dataKey:"x"}),Object(a.jsx)(Ws.y,{}),Object(a.jsx)(Ws.f,{strokeDasharray:"3 3"}),Object(a.jsx)(Ws.v,{}),Object(a.jsx)(Ws.h,{verticalAlign:"top",height:36}),n?i:Object(a.jsx)(Ws.a,{type:"monotone",dataKey:s,stroke:r.listColors[0],fillOpacity:1,fill:r.listColors[0]}),Object(a.jsx)(Ws.e,{})]})}}if("Bar Chart"===e){for(s=1;s<t.length;s++)i.push(Object(a.jsx)(Ws.c,{name:t[s],dataKey:t[s],fill:r.listColors[s-1],label:Object(a.jsx)(Qs,{caveats:n.map(r.caveatLabels(t,s))})},"id_"+s));return function(e,t,n,s){return Object(a.jsxs)(Ws.d,{width:t,height:400,data:e,margin:{top:10,bottom:50,left:50,right:10},children:[Object(a.jsx)(Ws.f,{strokeDasharray:"3 3"}),Object(a.jsx)(Ws.x,{dataKey:"x"}),Object(a.jsx)(Ws.y,{}),Object(a.jsx)(Ws.v,{}),Object(a.jsx)(Ws.h,{verticalAlign:"top",height:36}),n?i:Object(a.jsx)(Ws.c,{id:"id_",dataKey:s,fill:r.listColors[0],label:Object(a.jsx)(Qs,{caveats:e.map((function(e){return!e[s+"_caveat"]}))})}),Object(a.jsx)(Ws.e,{})]})}}if("Line Chart with Points"===e||"Line Chart"===e||"Line Chart without Points"===e){var o="Line Chart without Points"===e?r.caveatDot:function(e){return r.caveatDotTemplate(e,(function(e,t,n){return Object(a.jsx)("svg",{x:t-9,y:n-9,width:18,height:18,viewBox:"0 0 18 18",children:Object(a.jsx)("circle",{cx:9,cy:9,r:e.r,fill:e.fill,"stroke-width":e.strokeWidth,stroke:e.stroke})})}))};for(s=1;s<t.length;s++)i.push(Object(a.jsx)(Ws.i,{type:"monotone",name:t[s],dataKey:t[s],stroke:r.listColors[s-1],dot:o},"id_"+s));return function(e,t,n,s){return Object(a.jsxs)(Ws.j,{width:t,height:400,data:e,margin:{top:10,bottom:50,left:50,right:10},children:[Object(a.jsx)(Ws.f,{strokeDasharray:"3 3"}),Object(a.jsx)(Ws.x,{dataKey:"x"}),Object(a.jsx)(Ws.y,{}),Object(a.jsx)(Ws.v,{}),Object(a.jsx)(Ws.h,{verticalAlign:"top",height:36}),n?i:Object(a.jsx)(Ws.i,{type:"monotone",name:s,dataKey:s,stroke:r.listColors[0],dot:o}),Object(a.jsx)(Ws.e,{})]})}}if("Scatter Plot"===e){for(var l=[],c=1;c<t.length;c++){var u=[];for(s=0;s<n.length;s++){var d={x:n[s].x,y:n[s][t[c]]};u.push(d)}l.push(u)}for(s=1;s<t.length;s++)i.push(Object(a.jsx)(Ws.t,{name:t[s],data:l[s-1],fill:r.listColors[s-1]},"id_"+s));return function(e,n,s,o){return Object(a.jsxs)(Ws.u,{width:n,height:400,margin:{top:10,bottom:50,left:50,right:10},children:[Object(a.jsx)(Ws.f,{strokeDasharray:"3 3"}),Object(a.jsx)(Ws.x,{type:"number",dataKey:"x"}),Object(a.jsx)(Ws.y,{type:"number",dataKey:"y"}),Object(a.jsx)(Ws.v,{cursor:{strokeDasharray:"3 3"}}),Object(a.jsx)(Ws.h,{verticalAlign:"top",height:36}),s?i:Object(a.jsx)(Ws.t,{name:o,data:l[t.indexOf(o)-1],fill:r.listColors[0]})]})}}if("Pie Chart"===e){for(s=1;s<t.length;s++)i.push(Object(a.jsx)(Ws.k,{nameKey:"x",data:n,dataKey:t[s],cx:"50%",cy:"50%",innerRadius:0,fill:"#8884d8",label:!0,children:n.map((function(e,t){return Object(a.jsx)(Ws.g,{fill:r.listColors[t%r.listColors.length]},t)}))},"id_"+s));return function(e,t,n,s){return Object(a.jsxs)(Ws.l,{width:t,height:400,margin:{top:10,bottom:50,left:50,right:10},children:[n?i:Object(a.jsx)(Ws.k,{nameKey:"x",data:e,dataKey:s,cx:"50%",cy:"50%",innerRadius:0,fill:"#8884d8",label:!0,children:e.map((function(e,t){return Object(a.jsx)(Ws.g,{fill:r.listColors[t%r.listColors.length]},t)}))}),Object(a.jsx)(Ws.v,{}),Object(a.jsx)(Ws.h,{verticalAlign:"top",height:36})]})}}if("Donut Chart"===e){for(s=1;s<t.length;s++)i.push(Object(a.jsx)(Ws.k,{nameKey:"x",data:n,dataKey:t[s],cx:"50%",cy:"50%",innerRadius:"20%",outerRadius:80,fill:"#8884d8",label:!0,children:n.map((function(e,t){return Object(a.jsx)(Ws.g,{fill:r.listColors[t%r.listColors.length]},t)}))},"id_"+s));return function(e,t,n,s){return Object(a.jsxs)(Ws.l,{width:t,height:400,margin:{top:10,bottom:50,left:50,right:10},children:[n?i:Object(a.jsx)(Ws.k,{nameKey:"x",data:e,dataKey:s,cx:"50%",cy:"50%",innerRadius:"20%",outerRadius:80,fill:"#8884d8",label:!0,children:e.map((function(e,t){return Object(a.jsx)(Ws.g,{fill:r.listColors[t%r.listColors.length]},t)}))}),Object(a.jsx)(Ws.v,{}),Object(a.jsx)(Ws.h,{verticalAlign:"top",height:36})]})}}if("Radar Chart"===e){var h=[];for(s=0;s<n.length;s++){var p={};p.id="id"+s+"_"+n[s].x;for(var j=0;j<t.length;j++)p[t[j]]=n[s][t[j]];h.push(p)}for(s=1;s<t.length;s++)i.push(Object(a.jsx)(Ws.p,{name:t[s],dataKey:t[s],stroke:r.listColors[s-1],fill:r.listColors[s-1],fillOpacity:.6},"id_"+s));return function(e,t,n,s){return Object(a.jsxs)(Ws.q,{outerRadius:90,width:400,height:400,data:h,margin:{top:10,bottom:50,left:50,right:10},children:[Object(a.jsx)(Ws.n,{}),Object(a.jsx)(Ws.m,{dataKey:"id"}),Object(a.jsx)(Ws.o,{}),n?i:Object(a.jsx)(Ws.p,{name:s,dataKey:s,stroke:r.listColors[0],fill:r.listColors[0],fillOpacity:.6}),Object(a.jsx)(Ws.v,{}),Object(a.jsx)(Ws.h,{onMouseEnter:r.handleMouseEnter,onMouseLeave:r.handleMouseLeave})]})}}return"Radial Bar Chart"===e?function(e,t,n,r){return Object(a.jsxs)(Ws.s,{width:t,height:400,data:e,cx:150,cy:150,innerRadius:20,outerRadius:140,barSize:10,children:[Object(a.jsx)(Ws.r,{minAngle:15,label:{position:"insideStart",fill:"#fff"},background:!0,clockWise:!0,dataKey:r}),Object(a.jsx)(Ws.h,{iconSize:10,width:120,height:140,layout:"vertical",verticalAlign:"middle",wrapperStyle:{top:0,left:350,lineHeight:"24px"}}),Object(a.jsx)(Ws.v,{cursor:{strokeDasharray:"3 3"}})]})}:"Treemap"===e?function(e,t,n,r){return Object(a.jsx)(Ws.w,{width:t,height:400,margin:{top:10,bottom:50,left:50,right:10},data:e,dataKey:r,ratio:4/3,stroke:"#fff",fill:"#8884d8",children:Object(a.jsx)(Ws.v,{cursor:{strokeDasharray:"3 3"}})})}:void 0};var i=e.dataset;r.state={chartType:i.chart.type,grouped:i.chart.grouped||1===i.series.length,width:400},r.labels=[];for(var s=0;s<i.series.length;s++)r.labels.push(i.series[s].label);return r.listColors=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#c5b0d5","#c49c94","#f7b6d2","#c7c7c7","#dbdb8d","#9edae5","#aec7e8","#ffbb78","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],r.colorScale=Object(Ks.scaleOrdinal)().domain(r.labels).range(r.listColors),r}return Object(b.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.handleResize()}},{key:"fetchData",value:function(e){var t=null;if(void 0!==e.xAxis)t=e.xAxis.data;else{t=[];for(var n=0;n<e.series[0].data.length;n++)t.push(n+1)}var a=[],r={},i=[];i.push("x");for(var s=0;s<e.series.length;s++)i.push(e.series[s].label.toString());for(var o=0;o<t.length;o++){var l={};l.x=t[o];for(var c=0;c<e.series.length;c++){var u=e.series[c],d=u.label.toString();l[d]=u.data[o],l[d+"_caveat"]=!u.caveats||u.caveats[o]}a.push(l)}var h=a.sort((function(e,t){return e.x-t.x}));return r.labels=i,r.values=h,r}},{key:"render",value:function(){var e=this.props,t=e.dataset,n=e.identifier,r=e.onSelectCell;if(0===t.series.length)return null;for(var i=this.state,s=i.chartType,o=i.grouped,l=i.width,c=this.fetchData(t),u=this.selectedReCharts(s,c,o,l),d=[],h=0;h<this.props.charts.length;h++)d.push({key:h,text:this.props.charts[h],value:this.props.charts[h]});var p=null;return t.series.length>1&&(p=Object(a.jsx)("td",{className:"plot-form-check",children:Object(a.jsx)(Ni.a,{checked:o,label:"Grouped",onChange:this.handleToggleGrouped})})),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"plot-menu",children:Object(a.jsx)("table",{className:"plot-form-table",children:Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"plot-form-label",onClick:r,children:"Charts"}),Object(a.jsx)("td",{className:"plot-form-dropdown",children:Object(a.jsx)(Kr.a,{text:s,selection:!0,fluid:!0,scrolling:!0,options:d,onChange:this.handleSelectChart})}),p]})})})}),Object(a.jsx)("div",{id:n,className:"plot-view",onClick:r,children:Object(a.jsx)("div",{children:u})})]})}}]),n}(i.a.Component)),Qs=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.x,n=e.y;return!1===e.caveats[e.index]?Object(a.jsx)("svg",{x:t-6,y:n-6,width:14,height:14,fill:"red",viewBox:"0 0 14 14",children:Object(a.jsx)("text",{x:0,y:0,dy:14,fontSize:16,children:"*"})}):Object(a.jsx)("text",{})}}]),n}(r.PureComponent);Ys.defaultProps={x:0,y:0,gridList_cellHeight:400,gridList_width:1e3,gridList_height:450,gridLis_overflowY:"auto",colorText:"black",charts:["Area Chart","Bar Chart","Line Chart with Points","Line Chart without Points","Scatter Plot","Pie Chart","Donut Chart","Radar Chart","Radial Bar Chart","Treemap"]};var Zs=Ys,$s=n(547),Xs=n.n($s),eo=n(548),to=n.n(eo),no=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).generatePDF=function(){var t="plot_"+e.props.identifier,n=document.getElementById(t);Xs()(n).then((function(e){var n=e.toDataURL("image/png"),a=new to.a({orientation:"landscape",unit:"in"});a.addImage(n,"JPEG",0,0),a.save(t+".pdf")}))},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.dataset,n=e.identifier,r=e.onSelectCell,i="plot_"+n;return void 0!==t?Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"output-header",onClick:r,children:Object(a.jsx)("span",{className:"header-name",children:n})}),Object(a.jsx)("div",{className:"plot",children:Object(a.jsx)(Zs,{identifier:i,dataset:t,onSelectCell:r},n)}),Object(a.jsx)("div",{className:"chart-download-btn",children:Object(a.jsxs)(ur.a,{size:"small",color:"green",onClick:this.generatePDF,children:[Object(a.jsx)(gr.a,{name:"download"}),"Download Chart"]})})]}):null}}]),n}(i.a.Component),ao=(n(92),"spreadsheet_input_ctrl"),ro=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).onKeyDown=function(e){var t=a.props,n=t.cellValue,r=t.onMove,i=t.onUpdate,s=e.ctrlKey,o=e.keyCode,l=e.shiftKey;if(o===Ft)e.preventDefault(),r(Ht);else if(o===zt)e.preventDefault(),r(l?qt:Jt);else if(o===Vt)e.preventDefault(),r(Kt);else if(o===Lt)e.preventDefault(),r(Ht);else if(o===Ut){e.preventDefault();var c=en(n,"");a.setState({value:c},(function(){return a.setFocus(c)})),i(c)}else s&&o===Bt&&(e.preventDefault(),a.setState({value:"",isNull:!0}),i(null))},a.onChange=function(e){var t=a.props.onUpdate,n=e.target.value;a.setState({value:n}),t(n)};var r=e.cellValue;return a.state={value:en(r,"")},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this.state.value;this.setFocus(e)}},{key:"setFocus",value:function(e){var t=document.getElementById(ao);t.focus(),t.setSelectionRange(0,e.toString().length)}},{key:"render",value:function(){var e=this.state.value;return Object(a.jsx)("input",{className:"spreadsheet-input",id:ao,value:e,onKeyDown:this.onKeyDown,onChange:this.onChange})}}]),n}(i.a.Component),io=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){var n=e.props.onUpdate;null!=n&&n(t)},e.handleClick=function(){var t=e.props,n=t.column,a=t.columnIndex,r=t.rowId,i=t.rowIndex,s=t.onClick;null!=s&&s(n.id,r,a,i)},e.handleMove=function(t){var n=e.props.onMove;null!=n&&n(t)},e.handleFetchAnnotations=function(){var t=e.props,n=t.columnIndex,a=t.rowId,r=t.onFetchAnnotations;null!=r&&r(n,a)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.hasAnnotations,n=e.isActive,r=e.isUpdating,i=e.value,s=e.onUpdate,o="grid-cell",l=null;n?o+=" active":r&&(o+=" updating"),t&&(o+=" highlight",l=Object(a.jsx)(gr.a,{className:"icon-button annotations-icon",title:"Caveats",name:"question circle outline",onClick:this.handleFetchAnnotations}));var c=null,u=null;return u=null==i?"":i.toString(),n&&null!=s?c=Object(a.jsx)(ro,{cellValue:u,onMove:this.handleMove,onUpdate:this.handleChange}):(null==i&&(o+="  is-null"),c=Object(a.jsx)("div",{className:"cell-value",onClick:this.handleClick,children:u})),Object(a.jsxs)("td",{className:o,children:[l,c]})}}]),n}(i.a.Component);io.defaultProps={isActive:!1,isUpdating:!1};var so=io,oo=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.value,t="data:image/png;base64,".concat(e);return Object(a.jsx)("td",{className:"grid-cell",children:Object(a.jsx)("img",{src:t,alt:"image",height:"100",width:"100"})})}}]),n}(i.a.Component),lo=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).deleteRow=function(){var t=e.props,n=t.rowId;(0,t.onAction)(pe,n)},e.insertRowAbove=function(){var t=e.props,n=t.rowIndex;(0,t.onAction)(be,n)},e.insertRowBelow=function(){var t=e.props,n=t.rowIndex;(0,t.onAction)(be,n+1)},e.moveRow=function(){var t=e.props,n=t.rowId;(0,t.onAction)(Oe,n)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.disabled;return Object(a.jsx)(Kr.a,{disabled:e,floating:!0,children:Object(a.jsxs)(Kr.a.Menu,{children:[Object(a.jsx)(Kr.a.Item,{icon:"arrow up",content:"Insert row above",onClick:this.insertRowAbove}),Object(a.jsx)(Kr.a.Item,{icon:"arrow down",content:"Insert row below",onClick:this.insertRowBelow}),Object(a.jsx)(Kr.a.Item,{icon:"trash",content:"Delete row",onClick:this.deleteRow}),Object(a.jsx)(Kr.a.Item,{icon:"move",content:"Move row",onClick:this.moveRow})]})})}}]),n}(i.a.Component),co=n(97),uo=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleMoveDropBefore=function(t,n){var a=e.props.onMoveAction,r=n.currentTarget.attributes.data.value;a(Oe,parseInt(t["row-index-cell"],10),parseInt(r,10))},e.handleMoveDropAfter=function(t,n){var a=e.props.onMoveAction,r=n.currentTarget.attributes.data.value;a(Oe,parseInt(t["row-index-cell"],10),parseInt(r,10))},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.rowIndex,r=e.rowId,i=e.value,s=e.onAction,o=e.onClick,l=e.isSpreadsheet,c=null,u="none",d=null,h=null;return null!=s&&(c=Object(a.jsx)(lo,{disabled:t,rowId:r,rowIndex:n,onAction:s},r)),-1!==n&&l&&(u="row-index-cell",d=Object(a.jsx)(co.Droppable,{types:[u],data:n,onDrop:this.handleMoveDropBefore,children:Object(a.jsx)("div",{className:"row-drop-before",children:Object(a.jsx)(gr.a,{className:"icon-button row-index-drop-target",title:"<- Move Row Drop",name:"bullseye"})})}),h=Object(a.jsx)(co.Droppable,{types:[u],data:n,onDrop:this.handleMoveDropAfter,children:Object(a.jsx)("div",{className:"row-drop-after",children:Object(a.jsx)(gr.a,{className:"icon-button row-index-drop-target",title:"Move Row Drop ->",name:"bullseye"})})})),Object(a.jsx)("td",{className:"grid-row-index",onClick:o,children:Object(a.jsxs)("div",{children:[d,Object(a.jsx)("div",{className:"row-index-content",children:i}),c,h]})})}}]),n}(i.a.Component);uo.defaultProps={disabled:!1,rowIndex:-1};var ho=uo,po=n(1400),jo=n(159),mo=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleCopy=function(){var t=e.props.dataset.links.get($),n=document.createElement("textarea");n.innerText=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),n.remove()},e.handleDownload=function(){var t=e.props,n=t.dataset,a=t.downloadLimit;if(n.rowCount<=a){var r=n.links.get($);window.open(r)}},e.handleEditSpreadsheet=function(){var t=e.props,n=t.dataset;(0,t.onEditSpreadsheet)(n,t.moduleId)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.dataset,n=e.downloadLimit,r=e.onRecommendAction,s=Object(a.jsx)(po.a,{trigger:Object(a.jsx)(Kr.a.Item,{icon:"download",text:"Download File",title:"Download dataset as CSV file",onClick:this.handleDownload},"download"),on:"click",disabled:t.rowCount<=n,hoverable:!0,basic:!0,children:Object(a.jsx)(zr.a,{centered:!0,children:Object(a.jsxs)(jo.a,{textAlign:"center",children:[Object(a.jsx)(Pr.a,{as:"h4",icon:!0,textAlign:"center",children:Object(a.jsx)(gr.a,{name:"times circle"})}),Object(a.jsx)("p",{children:"The dataset exceeds the allowed limit of "+n+" rows. It is recommended to export large datasets using the Unload Cell."}),Object(a.jsx)(ur.a,{color:"blue",content:"Unload",onClick:function(){return r("data","unload")}})]})})});return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(Kr.a,{icon:"download",title:"Download dataset",children:Object(a.jsxs)(Kr.a.Menu,{children:[s,Object(a.jsx)(Kr.a.Item,{icon:"linkify",text:"Copy URL to Clipboard",title:"Copy shareable dataset URL to clipboard",onClick:this.handleCopy},"copy-link"),Object(a.jsx)(Kr.a.Item,{icon:"edit",text:"Edit as Spreadsheet",title:"Open spreadsheet view to edit the dataset",onClick:this.handleEditSpreadsheet},"edit")]})})})}}]),n}(i.a.Component),bo=(n(1276),function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.enabled,n=e.icon,r=e.title,i="scroll-icon",s=this.props.onClick;return t||(i+="-disabled",s=null),Object(a.jsx)("div",{className:i,children:Object(a.jsx)(gr.a,{disabled:!t,name:n,onClick:s,size:"small",title:r})})}}]),n}(i.a.Component)),fo=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleNavigateFirstPage=function(){var e=a.props,t=e.dataset;(0,e.onNavigate)(t,0,a.state.limit)},a.handleNavigateLastPage=function(){var e=a.props,t=e.dataset,n=e.onNavigate,r=a.state;n(t,r.maxValue,r.limit)},a.handleNavigateNextPage=function(){var e=a.props,t=e.dataset,n=e.onNavigate,r=a.state,i=r.maxValue,s=r.limit,o=t.offset;n(t,Math.min(i,o+s),s)},a.handleNavigateNextRow=function(){var e=a.props,t=e.dataset,n=e.onNavigate,r=a.state,i=r.maxValue,s=r.limit,o=t.offset;n(t,Math.min(i,o+1),s)},a.handleNavigatePreviousPage=function(){var e=a.props,t=e.dataset,n=e.onNavigate,r=t.offset,i=a.state.limit;n(t,Math.max(0,r-i),i)},a.handleNavigatePreviousRow=function(){var e=a.props,t=e.dataset,n=e.onNavigate,r=t.offset;n(t,Math.max(0,r-1),a.state.limit)};var r=e.dataset,i=e.cellLimit;return a.state={limit:i,maxValue:Math.max(0,r.rowCount-i)},a}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){var a=this.props,r=a.dataset,i=a.cellLimit,s=this.state,o=s.limit,l=s.maxValue,c=Math.max(0,r.rowCount-i);o===i&&l===c||this.setState({limit:i,maxValue:Math.max(0,r.rowCount-i)})}},{key:"render",value:function(){var e=this.props.dataset.offset,t=0!==e,n=e<this.state.maxValue,r=null;return(t||n)&&(r=Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"vertical-scroll-top",children:[Object(a.jsx)(bo,{enabled:t,icon:"arrow up",onClick:this.handleNavigateFirstPage,title:"First page"}),Object(a.jsx)(bo,{enabled:t,icon:"angle double up",onClick:this.handleNavigatePreviousPage,title:"Previous page"}),Object(a.jsx)(bo,{enabled:t,icon:"caret up",title:"Previous row",onClick:this.handleNavigatePreviousRow})]}),Object(a.jsxs)("div",{className:"vertical-scroll-down",children:[Object(a.jsx)(bo,{enabled:n,icon:"caret down",title:"Next row",onClick:this.handleNavigateNextRow}),Object(a.jsx)(bo,{enabled:n,icon:"angle double down",title:"Next page",onClick:this.handleNavigateNextPage}),Object(a.jsx)(bo,{enabled:n,icon:"arrow down",onClick:this.handleNavigateLastPage,title:"Last page"})]})]})),Object(a.jsx)("div",{className:"vertical-scroll",children:r})}}]),n}(i.a.Component),vo=n(1404),Oo=n(249),go=n(250);function xo(){var e=Object(Oo.a)(["\n  text-align: center;\n"]);return xo=function(){return e},e}var Co=go.a.div(xo()),wo=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.column,r=t.profiledData,i=t.isLoadingPlot,s=void 0,o=Object(Oi.a)(r.columns);try{for(o.s();!(e=o.n()).done;){var l=e.value;if(l.column.id===n.id){s=l;break}}}catch(c){o.e(c)}finally{o.f()}return Object(a.jsx)("div",{children:s?Object(a.jsx)(Co,{children:Object(a.jsxs)(Ws.d,{width:250,height:180,data:s.values,children:[Object(a.jsx)(Ws.f,{strokeDasharray:"3 3"}),Object(a.jsx)(Ws.x,{dataKey:"name"}),Object(a.jsx)(Ws.y,{}),Object(a.jsx)(Ws.v,{}),Object(a.jsx)(Ws.h,{}),Object(a.jsx)(Ws.c,{dataKey:"count",fill:"steelblue"})]})}):i?Object(a.jsx)(dr.a,{active:!0,inline:"centered",content:"Loading"}):Object(a.jsx)("p",{})})}}]),n}(i.a.Component),ko=n(1397);function yo(){var e=Object(Oo.a)(["\n  text-align: center;\n"]);return yo=function(){return e},e}go.a.div(yo());function _o(e){var t={field:"count",type:"quantitative",title:null};return"histogram_numerical"===e?{y:t,x:{title:null,bin:{binned:!0},field:"bin_start",type:"quantitative"},x2:{field:"bin_end"},tooltip:[{field:"bin_start",title:"start",type:"quantitative"},{field:"bin_end",title:"end",type:"quantitative"}]}:"histogram_temporal"===e?{y:t,x:{title:null,bin:{binned:!0},field:"date_start",type:"temporal",utc:!0},x2:{field:"date_end"},tooltip:[{field:"date_start",title:"start",type:"temporal"},{field:"date_end",title:"end",type:"temporal"}]}:"histogram_categorical"===e?{y:t,x:{title:null,field:"bin",type:"ordinal",sort:{order:"descending",field:"count"}},tooltip:{field:"bin",type:"ordinal"}}:"histogram_text"===e?{y:{field:"bin",type:"ordinal",title:null},x:{title:null,field:"count",type:"quantitative",sort:{order:"descending",field:"count"}},tooltip:[{field:"bin",type:"ordinal"},{field:"count",type:"quantitative"}]}:void console.log("Unknown plot type ",e)}var So=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.column,r=t.profiledData,i=t.isLoadingPlot,s=void 0,o=!1,l=Object(Oi.a)(r.columns);try{for(l.s();!(e=l.n()).done;){var c=e.value;if(c.name===n.name){s=c.plot,o=!0;break}}}catch(h){l.e(h)}finally{l.f()}var u,d=Object(a.jsx)("p",{className:"small text-muted",style:{textAlign:"center",verticalAlign:"middle",display:"table-cell"},children:"Nothing to show."});return Object(a.jsx)("div",{children:s?Object(a.jsx)(ko.a,{spec:(u=s.type,{width:"120",height:"120",data:{name:"values"},config:{background:null,axis:{domainColor:"darkslategray"},axisX:{labels:!1,ticks:!1}},description:"A simple bar chart with embedded data.",encoding:_o(u),mark:"bar"}),data:{values:s.data}}):i&&!o?Object(a.jsx)(dr.a,{active:!0,inline:"centered",content:"Loading"}):Object(a.jsx)("div",{style:{width:100,height:145,display:"table"},children:d})})}}]),n}(i.a.Component),Eo=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.column,n=e.profiledData,r=e.isLoadingPlot,i=n.is_profiled[0];return"mimir"===i?Object(a.jsx)(wo,{column:t,profiledData:n,isLoadingPlot:r}):"datamart_profiler"===i?Object(a.jsx)(So,{column:t,profiledData:n,isLoadingPlot:r}):void 0}}]),n}(i.a.Component);function No(e){for(var t=e.dataset,n=t.properties,r=t.columns,i=n.is_profiled[0],s=[Object(a.jsx)(ho,{value:" "},-1)],o=0;o<r.length;o++){var l,c=r[o],u=[{}],d=Object(Oi.a)(n.columns);try{for(d.s();!(l=d.n()).done;){var h=l.value;if("mimir"===i&&h.column.id===c.id){u=h;break}if("datamart_profiler"===i&&h.name===c.name){u=h;break}}}catch(p){d.e(p)}finally{d.f()}s.push(Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"20%"},children:Object(a.jsxs)("h4",{children:[" ",c.name," "]})},"rows_"+c.name),Object(a.jsx)("td",{style:{width:"15%"},children:Object(a.jsx)("button",{className:"btn btn-secondary float-right",disabled:!0,style:{backgroundColor:"#e3e3e3",borderColor:"#cfcfcf",borderRadius:"4px"},children:c.type})},"rows_cf"+c.name),Object(a.jsx)("td",{style:{width:"30%"},children:Object(a.jsx)("div",{className:"card mb-4",style:{overflow:"auto"},children:t&&t.isProfiled()&&Object(a.jsx)(Eo,{column:c,profiledData:n,isLoadingPlot:!0})})},c.name),Object(a.jsx)("td",{style:{width:"35%"},children:"string"===c.type||"varchar"===c.type||"categorical"===c.type||"boolean"===c.type?Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("ul",{style:{listStyle:"none",columnCount:2,columnGap:10},children:[null!=u.distinctValueCount&&Object(a.jsx)("li",{children:"Unique Values"}),null!=u.num_distinct_values&&Object(a.jsx)("li",{children:"Unique Values"}),null!=u.count&&Object(a.jsx)("li",{children:"Total Values"}),null!=u.nullCount&&Object(a.jsx)("li",{children:"Null Values"}),null!=u.distinctValueCount&&Object(a.jsx)("li",{children:u.distinctValueCount}),null!=u.num_distinct_values&&Object(a.jsx)("li",{children:u.num_distinct_values}),null!=u.count&&Object(a.jsx)("li",{children:u.count}),null!=u.nullCount&&Object(a.jsx)("li",{children:u.nullCount})]})}):u?Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("ul",{style:{listStyle:"none",columnCount:2,columnGap:10},children:[null!=u.max&&Object(a.jsx)("li",{children:"Maximum"}),null!=u.min&&Object(a.jsx)("li",{children:"Minimum"}),null!=u.mean&&Object(a.jsx)("li",{children:"Mean"}),null!=u.stdDev&&Object(a.jsx)("li",{children:"Std Deviation"}),null!=u.sum&&Object(a.jsx)("li",{children:"Sum"}),null!=u.distinctValueCount&&Object(a.jsx)("li",{children:"Unique Values"}),null!=u.num_distinct_values&&Object(a.jsx)("li",{children:"Unique Values"}),null!=u.count&&Object(a.jsx)("li",{children:"Total Values"}),null!=u.nullCount&&Object(a.jsx)("li",{children:"Null Values"}),null!=u.max&&Object(a.jsx)("li",{children:u.max}),null!=u.min&&Object(a.jsx)("li",{children:u.min}),null!=u.mean&&Object(a.jsx)("li",{children:u.mean.toFixed(2)}),null!=u.stdDev&&Object(a.jsx)("li",{children:u.stdDev.toFixed(2)}),null!=u.sum&&Object(a.jsx)("li",{children:u.sum.toFixed(2)}),null!=u.distinctValueCount&&Object(a.jsx)("li",{children:u.distinctValueCount}),null!=u.num_distinct_values&&Object(a.jsx)("li",{children:u.num_distinct_values}),null!=u.count&&Object(a.jsx)("li",{children:u.count}),null!=u.nullCount&&Object(a.jsx)("li",{children:u.nullCount})]})}):Object(a.jsx)("div",{})},"rows_"+c.name)]},"rowse_"+c.id))}return s=Object(a.jsx)("tbody",{children:s}),Object(a.jsx)("div",{style:{maxHeight:400,minHeight:400,overflow:"auto"},children:Object(a.jsx)(vo.a,{children:s})})}var Ao=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).deleteColumn=function(){var t=e.props,n=t.columnId;(0,t.onAction)(he,n)},e.insertColumnLeft=function(){var t=e.props,n=t.columnIndex;(0,t.onAction)(me,n)},e.insertColumnRight=function(){var t=e.props,n=t.columnIndex;(0,t.onAction)(me,n+1)},e.moveColumn=function(){var t=e.props,n=t.columnId;(0,t.onAction)(ve,n)},e.sortAZ=function(){var t=e.props,n=t.columnId;(0,t.onAction)(Ce,n,ye)},e.sortZA=function(){var t=e.props,n=t.columnId;(0,t.onAction)(Ce,n,_e)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.disabled;return Object(a.jsx)(Kr.a,{disabled:e,floating:!0,children:Object(a.jsxs)(Kr.a.Menu,{children:[Object(a.jsx)(Kr.a.Item,{icon:"arrow left",content:"Insert column to left",onClick:this.insertColumnLeft}),Object(a.jsx)(Kr.a.Item,{icon:"arrow right",content:"Insert column to right",onClick:this.insertColumnRight}),Object(a.jsx)(Kr.a.Item,{icon:"trash",content:"Delete column",onClick:this.deleteColumn}),Object(a.jsx)(Kr.a.Item,{icon:"move",content:"Move column",onClick:this.moveColumn}),Object(a.jsx)(Kr.a.Divider,{}),Object(a.jsx)(Kr.a.Item,{icon:"sort alphabet down",content:"Sort A-Z",onClick:this.sortAZ}),Object(a.jsx)(Kr.a.Item,{icon:"sort alphabet up",content:"Sort Z-A",onClick:this.sortZA})]})})}}]),n}(i.a.Component),Do=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){var n=e.props.onUpdate;null!=n&&n(t)},e.handleClick=function(){var t=e.props,n=t.column,a=t.columnIndex,r=t.onClick;null!=r&&r(n.id,-1,a,-1)},e.handleMove=function(t){var n=e.props.onMove;null!=n&&(t===qt||t===Kt?n(qt):t!==Jt&&t!==Ht||n(Jt))},e.handleMoveDropBefore=function(t,n){var a=e.props.onMoveAction,r=n.currentTarget.attributes.data.value;a(ve,parseInt(t["header-cell"],10),parseInt(r,10))},e.handleMoveDropAfter=function(t,n){var a=e.props.onMoveAction,r=n.currentTarget.attributes.data.value;a(ve,parseInt(t["header-cell"],10),parseInt(r,10))},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.isActive,r=e.isUpdating,i=e.column,s=e.columnIndex,o=e.value,l=e.onAction,c=e.isEditing,u=e.isSpreadsheet,d=null;d=null!=o?o:i.name;var h="grid-header",p=null,j="none",m=null,b=null,f=null;return n?(h+=" active",p=Object(a.jsx)(ro,{cellValue:i.name,onMove:this.handleMove,onUpdate:this.handleChange})):(l&&(f=Object(a.jsx)(Ao,{columnId:i.id,columnIndex:s,disabled:t,onAction:l})),r&&(h+=" updating"),c&&u&&(j="header-cell",m=Object(a.jsx)(co.Droppable,{types:[j],data:s,onDrop:this.handleMoveDropBefore,children:Object(a.jsx)("div",{className:"drop-before",children:Object(a.jsx)(gr.a,{className:"icon-button header-drop-target",title:"<- Move Colum Drop",name:"bullseye"})})}),b=Object(a.jsx)(co.Droppable,{types:[j],data:s,onDrop:this.handleMoveDropAfter,children:Object(a.jsx)("div",{className:"drop-after",children:Object(a.jsx)(gr.a,{className:"icon-button header-drop-target",title:"Move Column Drop ->",name:"bullseye"})})})),p=Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:"header-value",children:d}),Object(a.jsx)(bi.a,{size:"mini",children:"(".concat(i.type,")")}),Object(a.jsx)("div",{children:this.props.isLoadingPlot&&this.props.dataset&&this.props.dataset.isProfiled()&&Object(a.jsx)(Eo,{column:i,profiledData:this.props.profiledData,isLoadingPlot:this.props.isLoadingPlot})})]})),Object(a.jsxs)(co.Draggable,{type:"header-cell",data:s,wrapperComponent:Object(a.jsx)("th",{}),className:h,onClick:this.handleClick,children:[m,b,p,f]})}}]),n}(i.a.Component);Do.defaultProps={disabled:!1,isActive:!1,isUpdating:!1};var Io=Do,Po=(n(506),function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){for(var e=this.props.dataset,t=e.properties,n=e.columns,r=[Object(a.jsx)(ho,{rowIndex:-1,value:" "},-1)],i=0;i<n.length;i++){var s=n[i];r.push(Object(a.jsx)(Io,{dataset:e,column:s,columnIndex:i,profiledData:t,isLoadingPlot:this.props.isLoadingPlot},s.id))}return r=Object(a.jsx)("tr",{children:r}),Object(a.jsx)("thead",{children:r})}}]),n}(i.a.Component)),Ro=n(86),To=n.n(Ro),Mo=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleSelectCell=function(e,t){a.setState({column:e,row:t})},a.updateTypeView=function(e){1!==e&&(a.props.dataset.isProfiled()||a.handleRequestProfiler(!0)),a.setState({typeView:e})},a.handleRequestProfiler=function(e){if(e){var t=a.props,n=t.dataset,r=t.onNavigate,i=t.userSettings;r(n,n.offset,i.cellRowLimit(),e)}},a.state={column:-1,row:-1,typeView:1},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.setState({column:-1,row:-1,typeView:1})}},{key:"componentDidUpdate",value:function(e,t,n){var a=this.props.dataset;e.dataset.id!==a.id?this.setState({column:-1,row:-1,typeView:1}):a.isProfiled()&&!e.dataset.isProfiled()?(To.a.options={positionClass:"toast-top-full-width",hideDuration:300,timeOut:5e3},setTimeout((function(){return To.a.success("Detailed and Column views are now available for the ".concat(a.name," dataset."))}),300)):!a.isProfiled()&&e.dataset.isProfiled()&&this.setState({typeView:1})}},{key:"render",value:function(){for(var e=this,t=this.props,n=t.dataset,r=t.onFetchAnnotations,i=t.onNavigate,s=t.onSelectCell,o=t.userSettings,l=t.onEditSpreadsheet,c=t.moduleId,u=t.downloadLimit,d=t.onRecommendAction,h=this.state,p=Object(a.jsxs)("div",{className:"output-header",onClick:s,children:[Object(a.jsx)("span",{className:"header-name",children:n.name}),Object(a.jsx)("span",{children:" ("}),Object(a.jsx)("span",{className:"number-highlight",children:n.rowCount}),Object(a.jsx)("span",{className:"right-padding-md",children:" rows)"}),Object(a.jsx)(mo,{dataset:n,onEditSpreadsheet:l,moduleId:c,downloadLimit:u,onRecommendAction:d})]}),j=n.columns,m=[Object(a.jsx)(ho,{rowId:"-1",rowIndex:-1,value:" "},-1)],b=0;b<j.length;b++){var f=j[b];m.push(Object(a.jsx)(Io,{column:f,columnIndex:b,summaryPlot:2===this.state.typeView},f.id))}m=Object(a.jsx)("tr",{children:m});for(var v=n.offset,O=[],g=function(t){for(var i=n.rows[t],s=[Object(a.jsx)(ho,{rowId:i.id,rowIndex:t+v,value:t+v},i.id)],o=function(o){var l=j[o],c=h.column===l.id&&h.row===i.id;"image/png"!=l.type?s.push(Object(a.jsx)(so,{column:l,columnIndex:o,hasAnnotations:n.hasAnnotations(l.id,i.id),isActive:c,rowId:i.id,rowIndex:t,value:i.values[o],onClick:function(){return e.handleSelectCell(l.id,i.id)},onFetchAnnotations:r},"C"+l.id+"R"+i.id)):s.push(Object(a.jsx)(oo,{value:i.values[o]}))},l=0;l<j.length;l++)o(l);O.push(Object(a.jsx)("tr",{children:s},i.id))},x=0;x<n.rows.length;x++)g(x);var C=3!==this.state.typeView?Object(a.jsxs)("div",{className:"spreadsheet-container",children:[Object(a.jsx)("div",{className:"spreadsheet-table-container",children:Object(a.jsxs)("table",{className:"spreadsheet",children:[1===this.state.typeView?Object(a.jsx)(Po,{dataset:n,isLoadingPlot:!1}):Object(a.jsx)(Po,{dataset:n,isLoadingPlot:!0}),Object(a.jsx)("tbody",{children:O})]})}),Object(a.jsx)(fo,{dataset:n,onNavigate:i,cellLimit:o.cellRowLimit()})]}):n.isProfiled()?Object(a.jsx)(No,{dataset:n}):Object(a.jsx)(dr.a,{active:!0,inline:"centered",content:"Loading"});return Object(a.jsxs)("div",{children:[p,Object(a.jsxs)(ur.a.Group,{floated:"right",size:"mini",style:{marginTop:"-20px"},children:[Object(a.jsx)(bi.a,{basic:!0,pointing:"right",size:"mini",children:"Views"}),Object(a.jsx)(po.a,{content:"Compact view",trigger:Object(a.jsx)(ur.a,{icon:!0,onClick:function(){return e.updateTypeView(1)},children:Object(a.jsx)(gr.a,{name:"compress"})})}),Object(a.jsx)(po.a,{content:"Detail view",trigger:Object(a.jsx)(ur.a,{icon:!0,onClick:function(){return e.updateTypeView(2)},children:Object(a.jsx)(gr.a,{name:"chart bar outline"})})}),Object(a.jsx)(po.a,{content:"Column view",trigger:Object(a.jsx)(ur.a,{icon:!0,onClick:function(){return e.updateTypeView(3)},children:Object(a.jsx)(gr.a,{name:"columns"})})})]}),Object(a.jsx)("br",{}),C]})}}]),n}(i.a.Component);Mo.getDerivedStateFromProps=function(e,t){return e.dataset.isProfiled(),null};var Lo=Mo,Fo=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.time;return null!=n?Object(a.jsxs)("pre",{className:"plain-text",children:[Object(a.jsx)("span",{className:"info-bold",children:t+" "}),n]}):null}}]),n}(i.a.Component),Uo=n(560),Bo=n.n(Uo),Vo=n(558),zo=n.n(Vo),Ho=n(559),qo=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={activeTab:null,resourceName:null,isFetching:!1,hide:!1},e.handleDiscardAnnotation=function(){e.handleSelectCell(-1,-1)},e.handleOutputDismiss=function(){var t=e.props,n=t.cell;(0,t.onOutputSelect)(n.module,e.state.activeTab,e.state.resourceName)},e.handleFetchAnnotations=function(t,n){var a=e.props,r=a.cell,i=a.onFetchAnnotations,s=r.output;i(r.module,s.dataset,t,n)},e.handleConsoleDownload=function(){var t=e.props.cell,n=e.state.resourceName,a=document.createElement("a"),r=e.getConsoleOutputs(t.module.outputs.stdout).outputs,i=new Blob([JSON.stringify(r[n],null,2)],{type:"text/plain"});a.href=URL.createObjectURL(i),a.download=t.id,document.body.appendChild(a),a.click()},e.fetchData=function(){var t=e.props,n=t.cell,a=t.onOutputSelect,r=e.state,i=r.activeTab,s=r.resourceName;a(n.module,i,s)},e.handleItemClick=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.setState({isFetching:r,resourceName:a,activeTab:n,hide:n===ut},(function(){return e.fetchData()}))},e.handleCopyEmbedClick=function(t){var n=e.props.cell,a='<iframe width="400" height="400" frameBorder="0" scrolling="no" src="'+window.location+"/?cell-output="+n.id+'"></iframe>',r=document.createElement("textarea");r.innerHTML=a,document.body.appendChild(r),r.select();var i=document.execCommand("copy");document.body.removeChild(r),To.a.options={positionClass:"toast-top-full-width",hideDuration:300,timeOut:5e3},i?(console.log("copied embed code of output for cell "+n.id+" to clipboard"),setTimeout((function(){return To.a.success("Embed code copied!")}),300)):(console.log("error copying embed code of output for cell "+n.id+" to clipboard"),setTimeout((function(){return To.a.error("Embed code copy failed!")}),300))},e.handleCopyURLClick=function(t){var n=e.props.cell,a=window.location+"/?cell-output="+n.id,r=document.createElement("textarea");r.innerHTML=a,document.body.appendChild(r),r.select();var i=document.execCommand("copy");document.body.removeChild(r),To.a.options={positionClass:"toast-top-full-width",hideDuration:300,timeOut:5e3},i?(console.log("copied url of output for cell "+n.id+" to clipboard"),setTimeout((function(){return To.a.success("Output URL copied!")}),300)):(console.log("error copying url of output for cell "+n.id+" to clipboard"),setTimeout((function(){return To.a.success("Output URL copy failed!")}),300))},e.getConsoleOutputs=function(t){var n={},r={},i=e.props,s=i.cell,o=i.onSelectCell;if(t.hasOwnProperty("isMultiple")&&!t.isMultiple())switch(t.type){case dt:n["text/plain"]=t.lines.join("\n");break;case lt:n["text/html"]=t.lines.join("\n");break;case ct:case ct:n["text/markdown"]=t.lines.join("\n");break;case ht:n["text/javascript"]=t.lines[0];break;default:n["text/plain"]=t.lines.join("\n")}else n=s.output.outputs;var l=function(t){if("text/html"===t){var i=zs()({displayName:"Response",render:function(){return Object(a.jsx)("div",{className:"output-content-html",dangerouslySetInnerHTML:{__html:n[t]}})}});r[t]=Object(a.jsx)("div",{className:"output-content",children:Object(a.jsx)(i,{})})}else r[t]="text/markdown"===t?Object(a.jsx)("div",{className:"output-content",children:Object(a.jsx)(qs.a,{plugins:[zo.a],source:n[t]})}):"text/plain"===t?Object(a.jsx)("pre",{className:"plain-text",onClick:o,children:n[t]}):"dataset/view"===t?e.getDatasetView(s.id,n[t]):"chart/view"===t?e.getChartView(n[t].data.name,n[t].result):"text/javascript"===t?Object(a.jsx)(Ho.a,{html:n[t].value.html,code:n[t].value.code,deps:n[t].value.js_deps,css:n[t].value.css_deps}):Object(a.jsx)("pre",{className:"plain-text",onClick:o,children:JSON.stringify(n[t],null,2)})};for(var c in n)l(c);return{outputs:n,renders:r}},e.getDatasetView=function(t,n){var r=e.props,i=r.onSelectCell,s=r.datasets,o=r.onNavigateDataset,l=r.userSettings,c=r.onEditSpreadsheet,u=r.onRecommendAction,d=r.apiEngine;try{n.name=s[n.id].name}catch(h){}return Object(a.jsx)("div",{className:"output-content",children:Object(a.jsx)(Lo,{dataset:n,onNavigate:o,onFetchAnnotations:e.handleFetchAnnotations,onSelectCell:i,userSettings:l,onEditSpreadsheet:c,moduleId:t,downloadLimit:d.serviceProperties.maxDownloadRowLimit,onRecommendAction:u})})},e.getChartView=function(t,n){var r=e.props.onSelectCell;return Object(a.jsx)("div",{className:"output-content",children:Object(a.jsx)(no,{identifier:t,dataset:n,onSelectCell:r})})},e.getOutputContent=function(){var t=e.props,n=t.cell,r=t.onSelectCell,i=e.state.resourceName,s=n.output;if(s.isHidden()&&!n.isCanceled())return Object(a.jsx)("pre",{className:"plain-text",onClick:r});if(s.isTimestamps()){var o="";return o=n.isErrorOrCanceled()?"Canceled at":"Finished at",Object(a.jsxs)("div",{className:"module-timings",onClick:r,children:[Object(a.jsx)("p",{className:"output-info-headline",children:Object(a.jsx)("span",{className:"output-info-headline",children:"Module timings"})}),Object(a.jsx)(Fo,{label:"Created at",time:s.createdAt}),Object(a.jsx)(Fo,{label:"Started at",time:s.startedAt}),Object(a.jsx)(Fo,{label:o,time:s.finishedAt})]})}if(s.isDataset())return e.getDatasetView(n.id,s.dataset);if(s.isChart())return e.getChartView(s.name,s.dataset);if(s.isError()){var l=s.error;return Object(a.jsx)(br,{title:l.title,message:l.message,onDismiss:e.handleOutputDismiss})}if(n.isError()){var c=n.module.outputs.stderr;if(c.length>0){var u=new wt(c);return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"output-error",children:Object(a.jsx)("pre",{className:"error-text",onClick:r,children:u.lines.join("\n")})})})}}var d=e.getConsoleOutputs(s).renders,h=null;for(var p in d)i!==p&&"All"!==i||n.isCanceled()||(h=Object(a.jsxs)("div",{children:[h,null!==h&&Object(a.jsx)(Bo.a,{horizontal:!0}),d[p]]}));return Object(a.jsxs)("div",{className:"cell-command-area",children:[h,"All"!==i&&Object(a.jsx)("div",{className:"horizontal-divider",children:Object(a.jsx)(Dr,{text:"download",title:"Download console output",onClick:e.handleConsoleDownload})})]})},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.setState({activeTab:dt,resourceName:"All"})}},{key:"render",value:function(){var e=this,t=this.props,n=t.cell,r=t.onCancelExec,i=t.onCheckStatus,s=t.isActive,o=n.output,l=null;if(null!=r)if(o.isError()){var c=o.error;l=Object(a.jsx)("div",{className:"output-error",children:Object(a.jsx)(br,{title:c.title,message:c.message})})}else l=Object(a.jsx)(pr,{interval:2e3,onCancel:r,onFetch:i,resource:n,text:n.isRunning()?"Running ...":"Pending ..."});if(n.isRunning())return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"module-timings",children:[Object(a.jsx)(Fo,{label:"Created at",time:n.module.timestamps.createdAt}),Object(a.jsx)(Fo,{label:"Started at",time:n.module.timestamps.startedAt})]}),l]});if(n.isPending()||s)return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"module-timings",children:Object(a.jsx)(Fo,{label:"Created at",time:n.module.timestamps.createdAt})}),l]});var u=[];if(n.module.datasets.length>0)for(var d=function(t){var r=n.module.datasets[t];u.push(Object(a.jsx)(Kr.a.Item,{icon:"table",text:r.name,title:r.name,disabled:e.state.resourceName===r.name&&n.output.isDataset(),onClick:function(){return e.handleItemClick({},st,r.name,!0)}},"ds-"+r.name))},h=0;h<n.module.datasets.length;h++)d(h);var p=[];if(n.module.charts.length>0)for(var j=function(t){var r=n.module.charts[t];p.push(Object(a.jsx)(Kr.a.Item,{icon:"bar chart",text:r.name,title:r.name,disabled:e.state.resourceName===r.name&&n.output.isChart(),onClick:function(){return e.handleItemClick({},it,r.name,!0)}},"vw-"+r.name))},m=0;m<n.module.charts.length;m++)j(m);var b=n.module.outputs.stdout.map((function(e){return e.type})).filter((function(e,t,n){return n.indexOf(e)===t})),f=[];b.unshift("All");for(var v=function(t){f.push(Object(a.jsx)(Kr.a.Item,{icon:"circle",text:b[t],title:b[t],disabled:e.state.resourceName===b[t]&&e.state.activeTab===dt,onClick:function(){return e.handleItemClick({},dt,b[t],!1)}},"cl-"+b[t]))},O=0;O<b.length;O++)v(O);var g=this.state,x=g.activeTab,C=g.isFetching,w=null;return w=Mn()?null:Object(a.jsxs)(qr.a,{children:[Object(a.jsx)(qr.a.Item,{icon:"hide",title:"Hide output for this cell",disabled:this.state.hide,onClick:function(t){return e.handleItemClick(t,ut,null,!0)}}),Object(a.jsx)(Kr.a,{disabled:0===f.length,pointing:!0,text:"Console",className:"link item",children:Object(a.jsx)(Kr.a.Menu,{children:f})}),Object(a.jsx)(qr.a.Item,{name:pt,active:x===pt,content:"Timing",disabled:this.state.activeTab===pt,onClick:function(t){return e.handleItemClick(t,pt,null,!0)}}),Object(a.jsx)(Kr.a,{disabled:0===u.length,pointing:!0,text:"Datasets",className:"link item",children:Object(a.jsx)(Kr.a.Menu,{children:u})}),Object(a.jsx)(Kr.a,{disabled:0===p.length,pointing:!0,text:"Charts",className:"link item",children:Object(a.jsx)(Kr.a.Menu,{children:p})}),Object(a.jsxs)("div",{className:"cell-output-links",children:[Object(a.jsx)(qr.a.Item,{icon:"copy",title:"Copy Embed Code",disabled:!1,onClick:function(t){return e.handleCopyEmbedClick(t)}}),Object(a.jsx)(qr.a.Item,{icon:"linkify",title:"Copy Output URL",disabled:!1,onClick:function(t){return e.handleCopyURLClick(t)}})]})]}),Object(a.jsxs)("div",{className:"output-area",children:[w,Object(a.jsx)("div",{className:"output-loading",children:Object(a.jsx)(dr.a,{active:C,inline:!0,indeterminate:!0})}),!this.state.hide&&Object(a.jsx)(Ci.a,{style:{overflow:"auto",maxHeight:2e3},children:!C&&this.getOutputContent()})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.cell.output,a=e.datasets;if(t.isFetching&&t.activeTab===n.type)if(t.activeTab===it||t.activeTab===st){if(t.resourceName===n.dataset.name||t.resourceName===n.name||t.activeTab===st&&t.resourceName.toLowerCase()===a[n.dataset.id].name.toLowerCase())return{isFetching:!1}}else if(t.activeTab===dt||t.activeTab===jt||t.activeTab===ut||t.activeTab===pt)return{isFetching:!1};return{}}}]),n}(i.a.Component),Jo=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleUpdateProgress=function(t){e.setState({moduleProgress:t})},e.state={moduleProgress:0,onUpdateProgress:e.onUpdateProgress},e.handleAddFilteredCommand=function(){var t=e.props,n=t.cell;(0,t.onAddFilteredCommand)(n.commandSpec)},e.handleCopyCell=function(){var t=e.props,n=t.cell;(0,t.onCopyCell)(n)},e.handleCreateBranch=function(){var t=e.props,n=t.cell;(0,t.onCreateBranch)(n.module)},e.handleDatasetNavigate=function(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e.props,s=i.cell,o=i.onDatasetNavigate;o(s.module,t,n,a,r)},e.handleDeleteCell=function(){var t=e.props,n=t.cell;(0,t.onDeleteCell)(n)},e.handleInsertCell=function(t){var n=e.props,a=n.cell,r=n.onInsertCell;n.userSettings.showNotebookReversed()?r(a,t===gn?xn:gn):r(a,t)},e.handleRemoveFilteredCommand=function(){var t=e.props,n=t.cell;(0,t.onRemoveFilteredCommand)(n.commandSpec)},e.handleSelectCell=function(){var t=e.props,n=t.cell,a=t.isActiveCell,r=t.onSelect;a||n.isActive()||r(n)},e.handleFreezeCell=function(){var t=e.props,n=t.cell;(0,t.onFreezeCell)(n)},e.handleFreezeOneCell=function(){var t=e.props,n=t.cell;(0,t.onFreezeOneCell)(n)},e.handleThawCell=function(){var t=e.props,n=t.cell;(0,t.onThawCell)(n)},e.handleThawOneCell=function(){var t=e.props,n=t.cell;(0,t.onThawOneCell)(n)},e.handleRecommendAction=function(t,n){var a=e.props,r=a.cell;(0,a.onRecommendAction)(t,n,r)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.apiEngine,n=e.cell,r=e.cellNumber,i=e.datasets,s=e.artifacts,o=e.isActiveCell,l=e.isNewNext,c=e.isNewPrevious,u=e.notebook,d=e.onCancelExec,h=e.onCheckStatus,p=e.onDismissCell,j=e.onFetchAnnotations,m=e.onOutputSelect,b=e.onSubmitCell,f=e.userSettings,v=e.onEditSpreadsheet,O=e.onResetRecommendations,g=null,x=null,C=null;if(n.isNewCell())g="*";else{var w=n.commandSpec;if(!n.isActive()&&f.isFiltered(w)){var k="",y=null;return n.isErrorOrCanceled()&&(k=" collapsed-error-cell",n.isCanceled()?y=Object(a.jsx)(gr.a,{name:"cancel",color:"red",title:"Canceled"}):n.isError()&&(y=Object(a.jsx)(gr.a,{name:"warning circle",color:"red",title:"Error"}))),f.hideFilteredCommands()?null:Object(a.jsxs)("div",{className:"horizontal-divider"+k,children:[y,Object(a.jsx)(Dr,{css:"code-text",text:w.name,title:"Show cells of this type",onClick:this.handleRemoveFilteredCommand})]})}g=r;var _=l,S=c;f.showNotebookReversed()&&(_=c,S=l),x=Object(a.jsx)(Bs,{cell:n,cellNumber:r,isActiveCell:o,isNewNext:_,isNewPrevious:S,notebook:u,onAddFilteredCommand:this.handleAddFilteredCommand,onCopyCell:this.handleCopyCell,onCreateBranch:this.handleCreateBranch,onDeleteCell:this.handleDeleteCell,onInsertCell:this.handleInsertCell,onSelectCell:this.handleSelectCell,onFreezeCell:this.handleFreezeCell,onFreezeOneCell:this.handleFreezeOneCell,onThawCell:this.handleThawCell,onThawOneCell:this.handleThawOneCell}),C=Object(a.jsx)(qo,{cell:n,datasets:u.datasets,onCancelExec:d,onCheckStatus:h,onFetchAnnotations:j,onNavigateDataset:this.handleDatasetNavigate,onOutputSelect:m,onSelectCell:this.handleSelectCell,userSettings:f,onEditSpreadsheet:v,onRecommendAction:this.handleRecommendAction,apiEngine:t})}var E=Object(a.jsx)(Us,{apiEngine:t,datasets:i,artifacts:s,cell:n,isActiveCell:o&&!u.readOnly,onClick:this.handleSelectCell,onDismiss:p,onSelectCell:this.handleSelectCell,onSubmit:b,userSettings:f,onResetRecommendations:O,onUpdateProgress:this.handleUpdateProgress}),N=o?"cell active-cell":"cell inactive-cell",A="";return n.isErrorOrCanceled()?A=" error-cell":n.isRunning()?A=" running-cell":n.isPending()?A=" pending-cell":n.isFrozen()&&(A=" frozen-cell"),Object(a.jsx)(Ki.Provider,{value:this.state,children:Object(a.jsx)("table",{className:N+A,children:Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{className:"cell-index"+A,onClick:this.handleSelectCell,children:[Object(a.jsx)("a",{id:"cell-"+g,children:Object(a.jsxs)("p",{className:"cell-index"+A,children:["[",g,"]"]})}),x]}),Object(a.jsxs)("td",{className:"cell-area"+A,children:[E,C]})]})})})})}}]),n}(i.a.Component),Ko=(n(1362),function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={active:!1},e.toggleState=function(){e.setState({active:!e.state.active})},e}return Object(b.a)(n,[{key:"render",value:function(){var e,t=this.props.contents,n=this.state.active,r=[],i=Object(Oi.a)(t);try{for(i.s();!(e=i.n()).done;){var s=e.value;r.push(Object(a.jsx)("a",{className:"element",href:"#cell-"+(s.linkToIdx+1),children:s.title}))}}catch(l){i.e(l)}finally{i.f()}var o="inactive";return n&&(o="active"),Object(a.jsxs)("div",{className:"toc "+o,children:[Object(a.jsx)("a",{className:"toctoggle",onClick:this.toggleState,children:"\u2261"}),Object(a.jsx)("div",{className:"tocbody",children:r})]})}}]),n}(i.a.Component)),Wo=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleAppendCell=function(){var t=e.props,n=t.notebook,a=t.onInsertCell;n.isEmpty()?e.handleRecommendAction("data","load",null):a(n.lastCell().module,gn)},e.handleRecommendAction=function(t,n,a){var r=e.props,i=r.apiEngine,s=r.userSettings,o=r.onInsertCell;try{var l,c=i.packages.toList(),u=Object(Oi.a)(c);try{for(u.s();!(l=u.n()).done;){var d=l.value;if(t===d.id){var h,p=d.toList(),j=Object(Oi.a)(p);try{for(j.s();!(h=j.n()).done;){var m=h.value;n===m.id&&(m.suggest=!0)}}catch(b){j.e(b)}finally{j.f()}}}}catch(b){u.e(b)}finally{u.f()}}catch(b){}null===a?o():s.showNotebookReversed()?o(a,xn):o(a,gn)},e.handleResetRecommendations=function(){var t,n=e.props.apiEngine.packages.toList(),a=Object(Oi.a)(n);try{for(a.s();!(t=a.n()).done;){var r,i=t.value.toList(),s=Object(Oi.a)(i);try{for(s.s();!(r=s.n()).done;){r.value.suggest=!1}}catch(o){s.e(o)}finally{s.f()}}}catch(o){a.e(o)}finally{a.f()}},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.activeNotebookCell,n=e.apiEngine,r=e.notebook,i=e.onAddFilteredCommand,s=e.onCancelExec,o=e.onCheckStatus,l=e.onCopyCell,c=e.onCreateBranch,u=e.onDatasetNavigate,d=e.onDeleteCell,h=e.onDismissCell,p=e.onFetchAnnotations,j=e.onInsertCell,m=e.onOutputSelect,b=e.onRemoveFilteredCommand,f=e.onSelectNotebookCell,v=e.onSubmitCell,O=e.userSettings,g=e.onEditSpreadsheet,x=e.onFreezeCell,C=e.onFreezeOneCell,w=e.onThawCell,k=e.onThawOneCell;if(0===r.cells.length)return Object(a.jsx)(Ar,{message:"Your notebook is empty.",icon:"plus",css:"notebook-footer",caption:"Start by adding a Load Dataset Cell",captionIcon:"arrow up",onClick:this.handleAppendCell});for(var y=[],_=1,S=!1,E=!1,N=[],A=[],D=0;D<r.cells.length;D++){var I=r.cells[D],P=!1;D<r.cells.length-1&&(P=r.cells[D+1].isNewCell());var R=null;I.isActive()&&(E||(R=s),E=!0);var T=null;r.hasActiveCells()?I.isNewCell()&&D===r.cells.length-1&&(T=v):T=v,y.push(Object(a.jsx)(Jo,{apiEngine:n,cell:I,cellNumber:_,datasets:N,artifacts:A,isActiveCell:I.id===t,isNewNext:P,isNewPrevious:S,notebook:r,onAddFilteredCommand:i,onCancelExec:R,onCheckStatus:o,onCopyCell:l,onCreateBranch:c,onDatasetNavigate:u,onDeleteCell:d,onDismissCell:h,onInsertCell:j,onOutputSelect:m,onFetchAnnotations:p,onRemoveFilteredCommand:b,onSelect:f,onSubmitCell:T,userSettings:O,onEditSpreadsheet:g,onRecommendAction:this.handleRecommendAction,onResetRecommendations:this.handleResetRecommendations,onFreezeCell:x,onFreezeOneCell:C,onThawCell:w,onThawOneCell:k},I.id)),I.isNewCell()||(_++,N=I.module.datasets,A=I.module.artifacts),S=I.isNewCell()}var M=null;"tableOfContents"in r.workflow&&Array.isArray(r.workflow.tableOfContents)&&r.workflow.tableOfContents.length>0&&(M=Object(a.jsx)(Ko,{contents:r.workflow.tableOfContents}));var L=null,F=r.lastCell();F.isNewCell()||F.isErrorOrCanceled()||r.readOnly||(L=Object(a.jsx)("table",{className:"cell",children:Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"cell-index"}),Object(a.jsx)("td",{className:"cell-button",children:Object(a.jsx)(gr.a,{size:"big",link:!0,name:"plus",onClick:this.handleAppendCell,title:"Append new cell"})})]})})}));var U=null;return O.showNotebookReversed()?(y.reverse(),U=Object(a.jsxs)("div",{children:[M,L,y]})):U=Object(a.jsxs)("div",{children:[M,y,L]}),U}}]),n}(i.a.Component),Go=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleAddFilteredCommand=function(e){a.props.dispatch(function(e){return{type:v,command:e}}(e))},a.handleCancelWorkflowExec=function(){var e=a.props;(0,e.dispatch)(function(e){return function(t){return t(G(e.workflow.links.get(ae),{},(function(t){var n=new et(e.workflow.engine).fromJson(t);return{type:Dn,notebook:e.updateWorkflow(n)}}),Pn))}}(e.notebook))},a.handleCheckWorkflowStatus=function(e){var t=a.props,n=t.dispatch,r=t.notebook;n(Tn(r,e))},a.handleCopyCell=function(e){(0,a.props.dispatch)(function(e){return{type:O,cell:e}}(e))},a.handleCreateBranch=function(e){var t=a.props,n=t.branch,r=t.dispatch,i=t.history,s=t.notebook,o=t.project,l=a.state.moduleId;r(function(e,t,n,a,r,i){return function(s){var o={properties:[{key:"name",value:r}]};null!=a&&(o.source={branchId:t.id,workflowId:n,moduleId:a}),s(q(e.links.get("branch.create"),o,(function(t){var n=(new le).fromJson(t);return s(He(e.addBranch(n))),i.push(Zt(e.id,n.id)),{type:x}}),(function(e){return We("Error creating new branch",e)}),bn))}}(o,n,s.id,l,e,i)),a.hideCreateBranchModal()},a.handleDeleteBranch=function(e){var t=a.props,n=t.dispatch,r=t.history,i=t.project;n(jn(i,e,Zt,r))},a.handleDeleteCell=function(e){var t=a.props;(0,t.dispatch)(function(e,t){return function(n){return n(Qe()),B(t.module.links.get("module.delete"),{method:"DELETE"})(n).then((function(t){200===t.status?V(t).then((function(t){return n(Kn(e,t))})):401===t.status?n(F()):V(t).then((function(e){return n(We("Error deleting module",e.message))}))})).catch((function(e){return n(We("Error while deleting module",e.message))}))}}(t.notebook,e))},a.handleDatasetNavigate=function(e,t,n,r,i){var s=a.props,o=s.dispatch,l=s.notebook;o(i?function(e,t,n,a,r,i){return function(s){var o=n.links.getDatasetUrl(a,r,i);return s(K(o,(function(a){return Kn(e().replaceOutput(t.id,new ft(new $e(a.id,n.name,n.activeCell).fromJson(a))))}),(function(a){return Ln(e(),t,"dataset "+n.name,a)})))}}((function(){return a.props.notebook}),e,t,n,r,i):Un(l,e,t,n,r))},a.handleDismissCell=function(e){var t=a.props;(0,t.dispatch)(function(e,t){return function(n){n({type:Dn,notebook:e.dismissChangesForCell(t.id)}),n({type:An})}}(t.notebook,e))},a.handleFetchDatasetCellAnnotations=function(e,t,n,r){(0,a.props.dispatch)(da(t,n,r))},a.dismissAnnotationModal=function(){(0,a.props.dispatch)(ua())},a.handleInsertCell=function(e,t){var n=a.props;(0,n.dispatch)(function(e,t,n){return function(a){var r=Cn(e.cellCounter);a({type:Dn,notebook:e.editCell(t,n)}),a({type:An,cellId:r})}}(n.notebook,e,t))},a.handleFreezeCell=function(e){var t=a.props,n=t.dispatch,r=t.notebook,i=e.module.links.get(ie);n(Hn(r,i,e.id))},a.handleFreezeOneCell=function(e){var t=a.props,n=t.dispatch,r=t.notebook,i=e.module.links.get("module.freeze_one");n(Hn(r,i,e.id))},a.handleThawCell=function(e){var t=a.props,n=t.dispatch,r=t.notebook,i=e.module.links.get(se);n(Hn(r,i,e.id))},a.handleThawOneCell=function(e){var t=a.props,n=t.dispatch,r=t.notebook,i=e.module.links.get("module.thaw_one");n(Hn(r,i,e.id))},a.handleRemoveFilteredCommand=function(e){a.props.dispatch(function(e){return{type:C,command:e}}(e))},a.handleSelectOutput=function(e,t,n){var r=a.props,i=r.dispatch,s=r.notebook,o=r.userSettings;t===it?i(Fn(s,e,n)):t===st?i(Un(s,e,s.getDatasetForModule(e,n),0,o.cellRowLimit())):t===ut?i(function(e,t){return function(n){var a=new Ot;n(Kn(e.replaceOutput(t.id,a)))}}(s,e)):t===dt?i(Bn(s,e)):t===pt?i(function(e,t){return function(n){var a=t.timestamps,r=a.createdAt,i=a.startedAt,s=a.finishedAt,o=new yt(r,i,s);n(Kn(e.replaceOutput(t.id,o)))}}(s,e)):t===jt&&i(Bn(s,e))},a.handleSelectActiveCell=function(e){a.props.dispatch(function(e){var t=null!=e?e.id:null;return{type:An,cellId:t}}(e))},a.handleShowBranch=function(){var e=a.props,t=e.branch,n=e.history,r=e.project;n.push(Qt(r.id,t.id))},a.handleShowBranchHead=function(){var e=a.props,t=e.branch,n=e.history,r=e.project;n.push(Zt(r.id,t.id))},a.handleSubmitCell=function(e,t,n,r){var i=a.props,s=i.dispatch,o=i.notebook,l=i.project,c={packageId:t.packageId,commandId:t.id,arguments:n},u=null;if(null!=t.fileParameter&&(u=n.find((function(e){return e.id===t.fileParameter.id}))),e.isNewCell()){var d=null;if(o.lastCell().id===e.id)d=o.workflow.links.get(re);else for(var h=0;h<o.cells.length;h++)if(o.cells[h].id===e.id)for(var p=h+1;p<o.cells.length;p++){var j=o.cells[p];if(!j.isNewCell()){d=j.module.links.get("module.insert");break}}null!=u&&null!=u.value.file?s(Jn(o,d,c,Vn,e.id,l.links.get(ne),u,r)):s(Vn(o,d,c,e.id))}else{var m=e.module.links.get("module.replace");null!=u&&null==u.value.fileid&&null!=u.value.file?s(Jn(o,m,c,zn,e.id,l.links.get(ne),u,r)):s(zn(o,m,c,e.id))}},a.handleSwitchBranch=function(e){var t=a.props,n=t.history,r=t.project;n.push(Zt(r.id,e.id))},a.hideCreateBranchModal=function(){a.setState({modalOpen:!1,moduleId:null})},a.handleEditSpreadsheet=function(e,t){var n=a.props,r=n.dispatch,i=n.history,s=n.branch,o=n.project.id,l=e.id;r(ra(e,0,25,t)),i.push($t(o,s.id,l))},a.showCreateBranchModal=function(e){var t=a.props.notebook,n=null,r="Create branch";if(null==e){if(t.cells.length>0)for(var i=t.cells.length-1;i>=0;i--){var s=t.cells[i];if(!s.isNewCell()){n=s.module.id;break}}}else{for(var o=0,l=0;l<t.cells.length;l++){var c=t.cells[l];if(!c.isNewCell()&&(o++,e.id===c.id)){r=1===o?"New branch for cell [1]":"New branch for cells [1-"+o+"]";break}}n=e.id}a.setState({modalOpen:!0,modalTitle:r,moduleId:n})};var r=document.queryCommandSupported("copy");a.state={modalOpen:!1,modalTitle:"New branch",moduleId:null,copySupport:r};var i=a.props,s=i.branch,o=i.dispatch,l=i.notebook,c=i.project,u=i.projectList,d=a.props.match.params.project_id,h=a.props.match.params.branch_id,p=a.props.match.params.workflow_id;return null==c||c.id!==d?o(Ve(d,h,(function(e,t){return In(e,t,p)}))):null==s||s.id!==h?o(In(c,c.findBranch(h),p)):(null==l||l.id!==p)&&o(In(c,s,p)),null==u&&o(ka()),a}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){if(e.location.pathname!==this.props.location.pathname){var a=this.props,r=a.dispatch,i=a.project,s=a.branch,o=a.notebook,l=this.props.match.params.project_id,c=this.props.match.params.branch_id,u=this.props.match.params.workflow_id;null==i||i.id!==l?r(Ve(l,c,(function(e,t){return In(e,t,u)}))):null==s||s.id!==c?r(qe(i,c,(function(e,t){return In(e,t,u)}))):null!=o&&o.id===u||r(In(i,s,u))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.actionError,r=t.activeCell,i=t.branch,s=t.dispatch,o=t.fetchError,l=t.isActive,c=t.isFetching,u=t.notebook,d=t.project,h=t.projectList,p=t.reversed,j=t.serviceApi,m=t.userSettings,b=t.annotations,f=null;if(o)f=Object(a.jsx)("div",{className:"page-content wide",children:Object(a.jsx)(vr,{error:o})});else if(null==d||null==i||null==u||c)f=Object(a.jsx)(hr,{text:"Loading Notebook ..."});else if(null!=u){var v=this.state,O=v.modalOpen,g=v.modalTitle,x=v.copySupport,C=Object(a.jsx)(Wo,{activeNotebookCell:r,apiEngine:j.engine,notebook:u,project:d,reversed:p,onAddFilteredCommand:this.handleAddFilteredCommand,onCancelExec:this.handleCancelWorkflowExec,onChangeGrouping:this.handleChangeGrouping,onCheckStatus:this.handleCheckWorkflowStatus,onCopyCell:this.handleCopyCell,onCreateBranch:this.showCreateBranchModal,onDatasetNavigate:this.handleDatasetNavigate,onDeleteCell:this.handleDeleteCell,onDismissCell:this.handleDismissCell,onFetchAnnotations:this.handleFetchDatasetCellAnnotations,onInsertCell:this.handleInsertCell,onOutputSelect:this.handleSelectOutput,onRemoveFilteredCommand:this.handleRemoveFilteredCommand,onSelectNotebookCell:this.handleSelectActiveCell,onSubmitCell:this.handleSubmitCell,userSettings:m,onEditSpreadsheet:this.handleEditSpreadsheet,onFreezeCell:this.handleFreezeCell,onFreezeOneCell:this.handleFreezeOneCell,onThawCell:this.handleThawCell,onThawOneCell:this.handleThawOneCell}),w=Object(a.jsx)(kr,{isValid:Gt,open:O,prompt:"Enter a name for the new branch",title:g,onCancel:this.hideCreateBranchModal,onSubmit:this.handleCreateBranch});u.readOnly&&(w=Object(a.jsxs)("div",{className:"notebook-footer",children:[Object(a.jsx)(Ar,{message:"This is a read-only notebook. Create a new branch to start editing.",icon:"code-fork",title:"Create a new branch for this notebook",onClick:function(){return e.showCreateBranchModal()}}),w]}));var k=Object(a.jsx)(mi,{annotation:b,onDiscard:this.dismissAnnotationModal}),y=null,_=Mn();y=_?Object(a.jsx)(qo,{cell:u.cells.find((function(e){return e.id===_})),isActive:l,datasets:u.datasets,onCancelExec:this.handleCancelWorkflowExec,onCheckStatus:this.handleCheckWorkflowStatus,onFetchAnnotations:this.handleFetchDatasetCellAnnotations,onNavigateDataset:this.handleDatasetNavigate,onOutputSelect:this.handleSelectOutput,onSelectCell:this.handleSelectActiveCell,userSettings:m,onEditSpreadsheet:this.handleEditSpreadsheet}):Object(a.jsxs)("div",{className:"notebook",children:[Object(a.jsx)(vi,{branch:i,notebook:u,onShowHistory:this.handleShowBranch,onSwitchBranch:this.handleSwitchBranch,project:d,copySupport:x}),C,w,k]}),console.log("CancelExec at NotebookPage: "+this.handleCancelWorkflowExec),f=Object(a.jsx)(ci,{actionError:n,branch:i,content:y,contentCss:"slim",dispatch:s,isActive:l,notebook:u,onCreateBranch:this.showCreateBranchModal,onDeleteBranch:this.handleDeleteBranch,onShowNotebook:this.handleShowBranchHead,onSwitchBranch:this.handleSwitchBranch,onCancelExec:this.handleCancelWorkflowExec,project:d,projectList:h,resource:new sn(an),serviceApi:j,userSettings:m})}return f}}]),n}(r.Component),Yo=Object(or.a)(Object(c.b)((function(e){return{actionError:e.projectPage.actionError,activeCell:e.notebookPage.activeCell,branch:e.projectPage.branch,fetchError:e.notebookPage.fetchError,isActive:e.projectPage.isActive,isFetching:e.notebookPage.isFetching,notebook:e.notebookPage.notebook,project:e.projectPage.project,projectList:e.projectListing.projects,reversed:e.notebookPage.reversed,serviceApi:e.serviceApi,userSettings:e.app.userSettings,annotations:e.spreadsheet.annotations}}))(Go)),Qo=n(1408),Zo=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,e)).appendModule=function(e,t){var n=r.props,a=n.dispatch,i=n.dataset,s=n.serviceApi,o=n.notebook,l={type:e.type,id:e.id,arguments:t};if(r.toggleNotebookCell(),e.type!==ke||e.id!==je&&e.id!==xe)if(e.type===ke&&e.id===fe){var c=t.name;a(Jn(o.workflow.links.get(re),l,(function(e,t){return oa(o.workflow,{name:c,offset:0},t)}),s.links.upload))}else a(oa(o.workflow,i,l));else a(Vn(o.workflow.links.get(re),l))},r.clearActiveCell=function(){r.submitPendingUpdate(),r.setState({activeColumnId:-1,activeRowId:-1,activeColumnIndex:-1,activeRowIndex:-1,originalCellValue:null,updatedCellValue:null})},r.deleteUserAnnotation=function(e,t){var n=r.props;(0,n.dispatch)(function(e,t,n,a){return function(r){var i={columnId:t,rowId:n,annoId:a};return ha(r,e.links.annotations,i,e,t,n)}}(n.dataset,e.column,e.row,t))},r.dismissAnnotationModal=function(){(0,r.props.dispatch)(ua())},r.dismissModal=function(){return r.setState({modal:null,modalValue:null,modalResult:""})},r.handleCellUpdate=function(e){r.setState({updatedCellValue:e})},r.handleMoveCell=function(e){var t=r.state,n=t.activeColumnId,a=t.activeRowId,i=t.activeColumnIndex,s=t.activeRowIndex;if(-1!==n&&-1!==a){var o=r.props.dataset,l=o.rows[0].index,c=o.rows[o.rows.length-1].index,u=o.columns,d=i,h=s;e===Kt?(h-=1)<l&&(h=c):e===Ht?(h+=1)>c&&(h=l):e===Jt?(d+=1)>=u.length&&(d=0,(h+=1)>c&&(h=l)):e===qt&&(d-=1)<0&&(d=u.length-1,(h-=1)<l&&(h=c)),r.handleSelectCell(u[d].id,o.rowAtIndex(Math.abs(o.offset-h)).id,d,h)}},r.handleMoveHeader=function(e){var t=r.state,n=t.activeColumnId,a=t.activeRowId,i=t.activeColumnIndex;if(-1!==n&&-1===a){var s=r.props.dataset.columns,o=i;e===Jt?(o+=1)>=s.length&&(o=0):e===qt&&(o-=1)<0&&(o=s.length-1),r.handleSelectCell(s[o].id,-1,o,-1)}},r.handleNavigate=function(e,t,n){r.clearActiveCell();var a=r.props,i=a.dispatch,s=a.dataset;i(ra(s,t,n,s.moduleId))},r.handleSelectCell=function(e,t,n,a){var i=r.props,s=i.isUpdating,o=i.notebook;if(!s&&!o.workflow.readOnly){r.submitPendingUpdate();var l=null;if(-1!==n){var c=r.props.dataset;l=-1!==a?c.rowAtIndex(Math.abs(c.offset-a)).values[n]:c.columns[n].name}r.setState({activeColumnId:e,activeRowId:t,activeColumnIndex:n,activeRowIndex:a,originalCellValue:l,updatedCellValue:l})}},r.handleSubmitModal=function(e){var t=r.props.dataset,n=r.state,a=n.modal,i=n.modalValue;return r.dismissModal(),a===me?r.submitVizualCommand(function(e,t,n){return{packageId:ke,commandId:me,arguments:[{id:"dataset",value:e},{id:"name",value:t},{id:"position",value:n}]}}(t.name,e,i)):a===ve?r.submitVizualCommand(Se(t.name,i,e)):a===Oe?r.submitVizualCommand(Ee(t.name,i,e)):void 0},r.handleMoveAction=function(e,t,n){var a=r.props.dataset;return e===ve?r.submitVizualCommand(Se(a.name,t,n)):e===Oe?r.submitVizualCommand(Ee(a.name,t,n)):void 0},r.handleVizualAction=function(e,t,n){var a=r.props.dataset;switch(e){case me:case ve:case Oe:return void r.setState({modal:e,modalValue:t});case he:return r.submitVizualCommand(function(e,t){return{packageId:ke,commandId:he,arguments:[{id:"dataset",value:e},{id:"column",value:t}]}}(a.name,t));case pe:return r.submitVizualCommand(function(e,t){return{packageId:ke,commandId:pe,arguments:[{id:"dataset",value:e},{id:"row",value:t}]}}(a.name,t));case be:return r.submitVizualCommand(function(e,t){return{packageId:ke,commandId:be,arguments:[{id:"dataset",value:e},{id:"position",value:t}]}}(a.name,t));case Ce:return r.submitVizualCommand(function(e,t,n){return{packageId:ke,commandId:Ce,arguments:[{id:"dataset",value:e},{id:"columns",value:[[{id:"columns_column",value:t},{id:"columns_order",value:n}]]}]}}(a.name,t,n));default:return}},r.toggleNotebookCell=function(){var e=r.state.showNotebookCell;r.setState({showNotebookCell:!e})},r.handleFetchAnnotations=function(e,t){var n=r.props,a=n.dispatch,i=n.dataset;a(da(i,e,t))},r.handleDisplayRows=function(e,t){var n=r.props.dataset,a=r.state.cellLimit;t.value!==a&&("all"===t.value&&a!==n.rowCount?(r.setState({cellLimit:n.rowCount}),r.handleNavigate(n,0,n.rowCount)):"all"!==t.value&&(r.setState({cellLimit:t.value}),r.handleNavigate(n,n.offset,t.value)))},r.handleCheckStatus=function(){var e=r.props,t=e.dispatch,n=e.notebook;t(Tn(n,n.cells[n.cells.length-1])),r.setState({notebookRunning:n.cells[n.cells.length-1].isRunning()})},r.showAnnotationModal=function(){var e=r.props,t=e.dispatch,n=e.dataset,a=r.state,i=a.activeColumnId,s=a.activeRowId;t(da(n,i,s))},r.handleMoveColumnModalInputChange=function(e,t){r.setState({modalResult:t})},r.handleMoveRowModalInputChange=function(e,t){r.setState({modalResult:t.value})},r.showModal=function(){var e=r.state,t=e.modal,n=e.modalValue,i=e.modalResult,s=null,o="";if(null!=t){var l=null,c=null,u=null;if(t===me)l=Gt,c="Insert Column",u="Name of new column";else if(t===ve){for(var d=r.props.dataset,h=d.columns,p=null,j=0;j<h.length;j++)if(h[j].id===n){p=h[j];break}o=i,s=Object(a.jsx)(Ii,{id:d.id,isRequired:!0,name:d.name,dataset:d,value:o,onChange:r.handleMoveColumnModalInputChange}),l=Yt,c="Move Column",u="Target position for column "+p.name}else if(t===Oe){var m=r.props.dataset;o=i;var b=Object(Lr.a)(Array(m.rowCount).keys()).map((function(e){return{key:e,text:e,value:e}}));s=Object(a.jsx)(Kr.a,{value:o,selection:!0,fluid:!0,scrolling:!0,options:b,onChange:r.handleMoveRowModalInputChange}),l=Yt,c="Move Row",u="Target position for row "+n}return Object(a.jsx)(kr,{open:!0,isValid:l,title:c,prompt:u,value:o,onCancel:r.dismissModal,onSubmit:r.handleSubmitModal,inputComponent:s})}return null},r.getInsertModuleIndex=function(){var e=r.props,t=e.dataset,n=e.notebook,a=null;if(t.moduleId){if(t.moduleIndex)a=t.moduleIndex+1;else{a=n.workflow.modules.findIndex((function(e){return e.id===t.moduleId}))+1}a===n.workflow.modules.length&&(a=null)}return a},r.submitPendingUpdate=function(){var e=r.state,t=e.activeColumnId,n=e.activeRowId,a=e.originalCellValue,i=e.updatedCellValue;if(-1!==t){var s=r.props,o=s.dispatch,l=s.dataset,c=s.notebook,u=r.getInsertModuleIndex();if(a!==i){r.setState({updatingColumnId:t,updatingRowId:n,updatingValue:i});var d=null;d=-1!==n?function(e,t,n,a){return{packageId:ke,commandId:we,arguments:[{id:"dataset",value:e},{id:"column",value:t},{id:"row",value:n},{id:"value",value:a}]}}(l.name,t,n,i):function(e,t,n){return{packageId:ke,commandId:ge,arguments:[{id:"dataset",value:e},{id:"column",value:t},{id:"name",value:n}]}}(l.name,t,i),o(oa(c,l,d,u))}}},r.submitUserAnnotation=function(e,t,n){var a=r.props,i=a.dispatch,s=a.dataset,o=a.notebook,l=e.column,c=e.row,u=r.getInsertModuleIndex();i(oa(o,s,function(e,t,n,a){return{packageId:"mimir",commandId:"comment",arguments:[{id:"dataset",value:e.name},{id:"comments",value:[[{id:"expression",value:e.columns[t].id},{id:"comment",value:n},{id:"rowid",value:a}]]},{id:"materializeInput",value:!1}]}}(s,l,n,c),u))},r.submitVizualCommand=function(e){var t=r.props,n=t.dispatch,a=t.dataset,i=t.notebook,s=r.getInsertModuleIndex();r.setState({activeColumnId:-1,activeRowId:-1,activeColumnIndex:-1,activeRowIndex:-1,originalCellValue:null,updatedCellValue:null,updatingColumnId:-1,updatingRowId:-1,updatingValue:null}),n(oa(i,a,e,s))},r.state={activeColumnId:-1,activeRowId:-1,activeColumnIndex:-1,activeRowIndex:-1,modal:null,modalValue:null,originalCellValue:null,showNotebookCell:!1,updatedCellValue:null,updatingColumnId:-1,updatingRowId:-1,updatingValue:null,cellLimit:25,activeDataset:null,modalResult:"",notebookRunning:!1},r}return Object(b.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.dataset,n=e.dataset;!0===(null==t||(null==n||t.name!==n.name))&&this.clearActiveCell()}},{key:"render",value:function(){for(var e=this.props,t=e.annotations,n=e.dataset,r=e.isUpdating,i=e.notebook,s=e.serviceProperties,o=e.dispatch,l=this.state,c=l.activeColumnId,u=l.activeRowId,d=l.showNotebookCell,h=l.updatingColumnId,p=l.updatingRowId,j=l.updatingValue,m=l.notebookRunning,b=l.cellLimit,f=n.columns,v=[Object(a.jsx)(ho,{rowIndex:-1,value:" ",onClick:this.clearActiveCell,isSpreadsheet:!0},-1)],O=0;O<f.length;O++){var g=f[O],x=c===g.id&&-1===u,C=r&&h===g.id&&-1===p,w=null;w=C?j:g.name,v.push(Object(a.jsx)(Io,{column:g,columnIndex:O,disabled:r||i.workflow.readOnly,isActive:!r&&x,isUpdating:C,value:w,onAction:this.handleVizualAction,onClick:this.handleSelectCell,onMove:this.handleMoveHeader,onUpdate:this.handleCellUpdate,isEditing:!0,onMoveAction:this.handleMoveAction,isSpreadsheet:!0},g.id))}v=Object(a.jsx)("tr",{children:v});for(var k=[],y=n.offset,_=0;_<n.rows.length;_++){for(var S=n.rows[_],E=[Object(a.jsx)(ho,{rowId:S.id,disabled:r||i.workflow.readOnly,rowIndex:_+y,value:_+y,onAction:this.handleVizualAction,onClick:this.clearActiveCell,onMoveAction:this.handleMoveAction},S.id)],N=0;N<f.length;N++){var A=f[N],D=c===A.id&&u===S.id,I=r&&h===A.id&&p===S.id,P=null;P=I?j:S.values[N],E.push(Object(a.jsx)(so,{column:A,columnIndex:N,hasAnnotations:n.hasAnnotations(A.id,S.id),isActive:!r&&D,isUpdating:I,rowId:S.id,rowIndex:_+y,value:P,onClick:this.handleSelectCell,onMove:this.handleMoveCell,onUpdate:this.handleCellUpdate,onFetchAnnotations:this.handleFetchAnnotations},"C"+A.id+"R"+S.id))}k.push(Object(a.jsx)(co.Draggable,{wrapperComponent:Object(a.jsx)("tr",{}),type:"row-index-cell",data:S.id,onDragStart:this.handleDragStart,children:E},S.id))}var R=null;c>=0&&-1!==u&&(R=this.showAnnotationModal);var T=null;d&&(T=Object(a.jsx)("div",{className:"notebook-cell-xp-new",children:Object(a.jsx)("table",{className:"cell-area",children:Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"cell-index",children:Object(a.jsx)(Nr,{name:"minus-square-o",onClick:this.toggleNotebookCell})}),Object(a.jsx)("td",{className:"cell-cmd",children:Object(a.jsx)("div",{className:"cell-form"})})]})})})}));var M=null;null!=R&&(M="icon-button");var L=null;if(!i.workflow.readOnly){var F="plus square outline";d&&(F="minus square outline"),L=Object(a.jsx)("span",{className:"left-padding-md",children:Object(a.jsx)(gr.a,{className:"icon-button",title:"Add notebook cell",name:F,onClick:this.toggleNotebookCell})})}for(var U=[],B=0,V=[25,50,100,150];B<V.length;B++){var z=V[B];z<n.rowCount&&U.push(Object(a.jsx)(Kr.a.Item,{text:"".concat(z," rows"),value:z,onClick:this.handleDisplayRows}))}U.push(Object(a.jsx)(Kr.a.Item,{text:"All rows(".concat(n.rowCount,")"),label:n.rowCount>s.maxDownloadRowLimit&&"row limit (".concat(s.maxDownloadRowLimit,") exceeded"),disabled:n.rowCount>s.maxDownloadRowLimit,value:"all",onClick:this.handleDisplayRows}));var H=null;if(i.cells[i.cells.length-1].isRunning())H=Object(a.jsx)(pr,{interval:1e3,onFetch:this.handleCheckStatus,resource:i.cells[i.cells.length-1],text:i.cells[i.cells.length-1].isRunning()?"Running ...":"Pending ..."});else if(!i.cells[i.cells.length-1].isRunning()&&m){H=Object(a.jsx)(pr,{interval:1e3,onFetch:this.handleCheckStatus,resource:i.cells[i.cells.length-1],text:i.cells[i.cells.length-1].isRunning()?"Running ...":"Pending ..."});i.cells[i.cells.length-1].module.datasets.find((function(e){return e.name===n.name}));o(ra(n,n.offset,b,n.moduleId))}return Object(a.jsxs)("div",{className:"spreadsheet-container",children:[Object(a.jsxs)("h1",{className:"dataset-name",children:[n.name,Object(a.jsx)("span",{className:"left-padding-lg",children:Object(a.jsx)(gr.a,{className:M,name:"comment alternate outline",title:"Show annotations",disabled:null===R,onClick:R})}),L,Object(a.jsx)(qr.a,{compact:!0,style:{float:"right"},children:Object(a.jsx)(Kr.a,{selection:!0,text:"Showing ".concat(this.state.cellLimit," rows"),options:U})})]}),Object(a.jsx)(mi,{annotation:t,onDelete:this.deleteUserAnnotation,onDiscard:this.dismissAnnotationModal,onSubmit:this.submitUserAnnotation}),Object(a.jsxs)(Qo.a.Dimmable,{dimmed:r,children:[Object(a.jsx)(dr.a,{active:r}),T,Object(a.jsxs)("div",{className:"spreadsheet-container",children:[Object(a.jsx)("div",{className:"spreadsheet-table-container",children:Object(a.jsxs)("table",{className:"spreadsheet",children:[Object(a.jsx)("thead",{children:v}),Object(a.jsx)("tbody",{children:k})]})}),Object(a.jsx)(fo,{cellLimit:this.state.cellLimit,dataset:n,onNavigate:this.handleNavigate})]})]}),this.showModal(),H]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n={};return e.dataset.name!==t.activeDataset&&(n={cellLimit:25,activeDataset:e.dataset.name}),t.cellLimit>e.dataset.rowCount&&(n=Object(j.a)(Object(j.a)({},n),{},{cellLimit:e.dataset.rowCount})),n}}]),n}(i.a.Component),$o=Object(or.a)(Object(c.b)((function(e){var t=e.spreadsheet.dataset;try{t.name=e.notebookPage.notebook.datasets[t.id].name}catch(n){}return{annotations:e.spreadsheet.annotations,dataset:t,isUpdating:e.spreadsheet.isUpdating,opError:e.spreadsheet.opError,project:e.projectPage.project,serviceApi:e.serviceApi,notebook:e.notebookPage.notebook,serviceProperties:e.serviceApi.properties}}))(Zo)),Xo=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleShowBranchHead=function(){var e=a.props,t=e.branch,n=e.history,r=e.project;n.push(Zt(r.id,t.id))},a.state={modalOpen:!1,modalTitle:"New branch",moduleId:null};var r=a.props,i=r.branch,s=r.dispatch,o=r.notebook,l=r.project,c=r.projectList,u=a.props.match.params.project_id,d=a.props.match.params.branch_id,h=a.props.match.params.workflow_id;return null==l||l.id!==u?s(Ve(u,d,(function(e,t){return In(e,t,h)}))):null==i||i.id!==d?s(In(l,l.findBranch(d),h)):(null==o||o.id!==h)&&s(In(l,i,h)),null==c&&s(ka()),a}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(e){if(e.location.pathname!==this.props.location.pathname){var t=this.props,n=t.dispatch,a=t.project,r=t.branch,i=t.notebook,s=this.props.match.params.project_id,o=this.props.match.params.branch_id,l=this.props.match.params.workflow_id;null==a||a.id!==s?n(Ve(s,o,(function(e,t){return In(e,t,l)}))):null==r||r.id!==o?n(qe(a,o,(function(e,t){return In(e,t,l)}))):null!=i&&i.id===l||n(In(a,r,l))}}},{key:"render",value:function(){var e=this.props,t=e.actionError,n=e.branch,r=e.dispatch,i=e.fetchError,s=e.isActive,o=e.isFetching,l=e.notebook,c=e.project,u=e.projectList,d=e.serviceApi,h=e.userSettings,p=e.dataset,j=null;if(i)j=Object(a.jsx)("div",{className:"page-content wide",children:Object(a.jsx)(vr,{error:i})});else if(null==c||null==n||null==l||null==p||o)j=Object(a.jsx)(hr,{text:"Loading Spreadsheet..."});else if(null!=p){var m=Object(a.jsx)("div",{className:"spreadsheet",children:Object(a.jsx)($o,{})});j=Object(a.jsx)(ci,{actionError:t,branch:n,content:m,contentCss:"slim",dispatch:r,isActive:s,notebook:l,project:c,projectList:u,resource:un(p),serviceApi:d,userSettings:h,onShowNotebook:this.handleShowBranchHead})}return j}}]),n}(r.Component),el=Object(or.a)(Object(c.b)((function(e){return{actionError:e.projectPage.actionError,activeCell:e.notebookPage.activeCell,branch:e.projectPage.branch,fetchError:e.notebookPage.fetchError,isActive:e.projectPage.isActive,isFetching:e.notebookPage.isFetching,notebook:e.notebookPage.notebook,project:e.projectPage.project,projectList:e.projectListing.projects,reversed:e.notebookPage.reversed,serviceApi:e.serviceApi,userSettings:e.app.userSettings,dataset:e.datasetErrorsPage.dataset}}))(Xo)),tl=(n(511),function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,e)).handleExpand=function(){var e=r.state.expanded;r.setState({expanded:!e})},r.handleGotoError=function(e){var t=r.props;(0,t.onGotoError)(t.reason.value)},r.buildReasonElement=function(e,t){if(Array.isArray(t)){for(var n=[],i=0;i<t.length;i++)n.push(r.buildReasonElement(e+"."+i,t[i]));return n}if(t instanceof Object){for(var s=[],o=0,l=Object.entries(t);o<l.length;o++){var c=Object(Bi.a)(l[o],2),u=c[0],d=c[1];s.push(r.buildReasonElement(e+"."+u,d))}return s}return Object(a.jsxs)("div",{className:"dataset-reason-element",children:[Object(a.jsx)("td",{className:"dataset-reason-key",children:Object(a.jsxs)("h4",{children:[e,": "]})}),Object(a.jsx)("td",{children:t})]})},r.state={expanded:!1},r}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.reason,t=e.key,n=e.family,r=e.message,i=e.confirmed,s=[];s.unshift(Object(a.jsxs)("div",{className:"dataset-reason-element",children:[Object(a.jsx)("td",{className:"dataset-reason-key",children:Object(a.jsx)("h4",{children:"family: "})}),Object(a.jsx)("td",{children:n})]})),s.unshift(Object(a.jsxs)("div",{className:"dataset-reason-element",children:[Object(a.jsx)("td",{className:"dataset-reason-key",children:Object(a.jsx)("h4",{children:"key: "})}),Object(a.jsx)("td",{children:t})]}));var o=null;t&&Array.isArray(t)&&0!==t.length&&(o=Object(a.jsx)(gr.a,{name:"external alternate",size:"small"}));var l=Object(a.jsx)(gr.a,{name:"warning sign",size:"large",color:"yellow"});return i&&(l=Object(a.jsx)(gr.a,{name:"check circle",size:"large",color:"green"})),Object(a.jsxs)("div",{className:"dataset-reason",children:[Object(a.jsx)("table",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"dataset-reason-icon",children:Object(a.jsx)("div",{onClick:this.handleExpand,children:l})}),Object(a.jsx)("td",{className:"dataset-reason-english",children:Object(a.jsx)("div",{onClick:this.handleExpand,children:r})}),Object(a.jsx)("td",{className:"dataset-reason-goto",children:Object(a.jsx)("div",{onClick:this.handleGotoError,children:o})})]})}),null]})}}]),n}(i.a.Component)),nl=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){for(var e=this.props,t=e.dataset,n=e.annotations,r=e.onGotoError,i=e.onRepairError,s=[],o=[],l=0;l<n.items.length;l++){var c=n.items[l];c.confirmed?o.push(Object(a.jsx)(tl,{reason:c,onGotoError:r(t),onRepairError:i(t)})):s.push(Object(a.jsx)(tl,{reason:c,onGotoError:r(t),onRepairError:i(t)}))}return Object(a.jsxs)("div",{className:"dataset-caveats",children:[Object(a.jsxs)("h3",{className:"dataset-caveats",children:["Dataset Caveat List: ",Object(a.jsx)("span",{className:"error-highlight",children:t.name})]}),s,o]})}}]),n}(i.a.Component),al=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleShowBranchHead=function(){var e=a.props,t=e.branch,n=e.history,r=e.project;n.push(Zt(r.id,t.id))},a.loadDatasetToError=function(e){return function(t){var n=a.props,r=n.dispatch,i=n.serviceApi.serviceUrl+"/datasets/"+e.id+"?rowid="+t.key[0];r(aa(e,i))}},a.loadDatasetRepair=function(e){return function(t,n,r){var i=a.props,s=i.dispatch,o=i.serviceApi.serviceUrl+"/datasets/"+e.id+"/feedback";s(sa(e,o,t,n,r))}};var r=a.props,i=r.branch,s=r.dispatch,o=r.project,l=r.projectList,c=r.workflows,u=a.props.match.params.project_id,d=a.props.match.params.branch_id;return null==o||o.id!==u?s(Ve(u,d,mn)):(null==i||i.id!==d||null==c)&&s(mn(o,o.findBranch(d))),null==l&&s(ka()),a}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){if(e.location.pathname!==this.props.location.pathname){var a=this.props,r=a.dispatch,i=a.project,s=a.branch,o=this.props.match.params.project_id,l=this.props.match.params.branch_id;null==i||i.id!==o?r(Ve(o,l,mn)):null!=s&&s.id===l||r(mn(i,i.findBranch(l)))}}},{key:"render",value:function(){var e=this.props,t=e.actionError,n=e.branch,r=e.dispatch,i=e.fetchError,s=e.isActive,o=e.isFetching,l=e.project,c=e.projectList,u=e.serviceApi,d=e.userSettings,h=e.workflows,p=e.resource,j=null;if(i)j=Object(a.jsx)("div",{className:"page-content wide",children:Object(a.jsx)(vr,{error:i})});else if(null==l||null==n||null==h||null==p||o)j=Object(a.jsx)(hr,{text:"Loading Dataset Caveat List ..."});else if(null!=p){var m=p.content.dataset,b=p.content.annotations,f=Object(a.jsx)("div",{className:"dataset-caveat-view",children:Object(a.jsx)(nl,{dataset:m,annotations:b,onGotoError:this.loadDatasetToError,onRepairError:this.loadDatasetRepair})});j=Object(a.jsx)(ci,{actionError:t,branch:n,content:f,contentCss:"slim",dispatch:r,isActive:s,project:l,projectList:c,resource:cn(),serviceApi:u,userSettings:d,onShowNotebook:this.handleShowBranchHead})}return j}}]),n}(r.Component),rl=Object(or.a)(Object(c.b)((function(e){return{actionError:e.projectPage.actionError,branch:e.projectPage.branch,fetchError:e.datasetErrorsPage.fetchError,isActive:e.projectPage.isActive,isFetching:e.datasetErrorsPage.isFetching,project:e.projectPage.project,projectList:e.projectListing.projects,serviceApi:e.serviceApi,userSettings:e.app.userSettings,workflows:e.branchPage.workflows,dataset:e.datasetErrorsPage.dataset,resource:e.datasetErrorsPage.resource}}))(al)),il=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleCancel=function(){var e=a.props.onCancel;a.setState({user:""}),e()},a.handleChange=function(e){var t=e.target.value;a.setState({user:t})},a.handleChangePasswd=function(e){var t=e.target.value;a.setState({passwd:t})},a.handleKeyDown=function(e){var t=a.props.onCancel;13===e.keyCode?a.handleSubmit():27===e.keyCode&&t()},a.handleSubmit=function(e){var t=a.props,n=t.isValid,r=t.onSubmit,i=a.state,s=i.user,o=i.passwd;(null==n||n(s))&&r({authdata:window.btoa(s+":"+o)})};var r=e.value;return null==r&&(r=""),a.state={user:r},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isValid,n=e.prompt,r=e.open,i=e.title,s=this.state,o=s.user,l=s.passwd,c=null;null!=n&&(c=Object(a.jsx)("p",{children:n}));var u=!0;return null!=t&&(u=t(o)),Object(a.jsxs)(xr.a,{open:r,size:"small",children:[Object(a.jsx)(xr.a.Header,{children:i}),Object(a.jsx)(xr.a.Content,{children:Object(a.jsxs)("div",{className:"resource-name",children:[c,Object(a.jsx)(Cr.a,{autoFocus:!0,className:"resource-name-input",value:o,onChange:this.handleChange,onKeyDown:this.handleKeyDown}),Object(a.jsx)(Cr.a,{type:"password",value:l,className:"resource-name-input",onChange:this.handleChangePasswd,onKeyDown:this.handleKeyDown})]})}),Object(a.jsxs)(xr.a.Actions,{children:[Object(a.jsx)(ur.a,{negative:!0,onClick:this.handleCancel,children:"Cancel"}),Object(a.jsx)(ur.a,{positive:!0,icon:"checkmark",labelPosition:"right",content:"Done",disabled:!u,onClick:this.handleSubmit})]})]})}}]),n}(i.a.Component),sl=function(e){Object(tt.a)(n,e);var t=Object(nt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).showAuthModal=function(){return a.setState({showModal:M})},a.hideModal=function(){return a.setState({showModal:null})},a.authComplete=function(e){var t,n=a.props.dispatch;localStorage.setItem("user",JSON.stringify(e)),n((t=e.authdata,{type:T,authdata:t}))},a.state={showModal:null},(0,a.props.dispatch)(z()),a}return Object(b.a)(n,[{key:"refetchService",value:function(){(0,this.props.dispatch)(z())}},{key:"render",value:function(){window.env.APP_TITLE?document.title="Vizier DB - "+window.env.APP_TITLE:document.title="Vizier DB";var e=this.props,t=e.error,n=e.isFetching,r=e.links,i=e.name,s=e.showModal,o=e.refetch,l=null,c=null;if(n)l=Object(a.jsx)(hr,{});else if(t){var u="Error while loading service descriptor";this.props.serviceUrl&&(u=u+" @ "+this.props.serviceUrl),l=Object(a.jsx)("div",{className:"page-content slim",children:Object(a.jsx)(br,{title:u,message:t})})}else if(o)this.refetchService();else if(null!=i&&null!=r){l=Object(a.jsx)(cr.a,{children:Object(a.jsx)(rr.a,{children:Object(a.jsxs)(ir.a,{children:[Object(a.jsx)(sr.a,{exact:!0,path:St,component:di}),Object(a.jsx)(sr.a,{path:Pt,component:el}),Object(a.jsx)(sr.a,{path:Rt,component:rl}),Object(a.jsx)(sr.a,{path:Tt,component:el}),Object(a.jsx)(sr.a,{path:Mt,component:rl}),Object(a.jsx)(sr.a,{path:At,component:pi}),Object(a.jsx)(sr.a,{path:Dt,component:Yo}),Object(a.jsx)(sr.a,{path:It,component:Yo}),Object(a.jsx)(sr.a,{path:Pt,component:el}),Object(a.jsx)(sr.a,{path:Rt,component:rl})]})})}),c=Mn()?null:Object(a.jsx)("div",{className:"connection-info",children:Object(a.jsx)(jr,{name:i,links:r})})}var d=Object(a.jsx)("div",{children:Object(a.jsx)(il,{isValid:Gt,open:s===M,prompt:"Please enter your login credentials",title:"Login",onCancel:this.hideModal,onSubmit:this.authComplete,value:""})});return Object(a.jsxs)("div",{className:"app",children:[l,c,d]})}}]),n}(r.Component),ol=Object(or.a)(Object(c.b)((function(e){return{error:e.serviceApi.error,isFetching:e.serviceApi.isFetching,links:e.serviceApi.links,name:e.serviceApi.name,serviceUrl:e.serviceApi.serviceUrl,showModal:e.serviceApi.showModal,refetch:e.serviceApi.refetch}}))(sl)),ll=(n(1363),n(1364),p()()),cl=[d.a,Object(u.b)(ll)],ul=null;if(""!==window.env.ANALYTICS_URL){ul=Object(a.jsx)("script",{children:function(){function e(){window.owa_cmds.push(arguments)}"undefined"!==typeof window&&(window._owa=document.createElement("script"),window._owa.type="text/javascript",window._owa.async=!0,window._owa.src=window.env.ANALYTICS_URL+"modules/base/js/owa.tracker-combined-min.js",window._owa_s=document.getElementsByTagName("script")[0],window._owa_s.parentNode.insertBefore(window._owa,window._owa_s),window.owa_baseUrl=window.env.ANALYTICS_URL,window.owa_cmds=window.owa_cmds||[],e("setSiteId",window.env.ANALYTICS_SITE_ID),e("trackPageView"),e("trackClicks"))}()})}var dl=l.d.apply(void 0,[l.a.apply(void 0,cl)].concat([])),hl=Object(l.e)(ar,{serviceApi:{isFetching:!1,serviceUrl:window.env.API_URL}},dl);Object(s.render)(Object(a.jsx)(c.a,{store:hl,children:Object(a.jsx)(u.a,{history:ll,children:Object(a.jsx)(ol,{children:ul})})}),document.getElementById("root"))},147:function(e,t,n){},180:function(e,t,n){},35:function(e,t,n){},420:function(e,t,n){},452:function(e,t,n){},511:function(e,t,n){},559:function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_okennedy_Documents_Vizier_upstream_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),_home_okennedy_Documents_Vizier_upstream_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),_home_okennedy_Documents_Vizier_upstream_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8),_home_okennedy_Documents_Vizier_upstream_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),react_dom__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(58),react_dom__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_6__),JavascriptCellOutput=function(_React$Component){Object(_home_okennedy_Documents_Vizier_upstream_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__.a)(JavascriptCellOutput,_React$Component);var _super=Object(_home_okennedy_Documents_Vizier_upstream_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__.a)(JavascriptCellOutput);function JavascriptCellOutput(){return Object(_home_okennedy_Documents_Vizier_upstream_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,JavascriptCellOutput),_super.apply(this,arguments)}return Object(_home_okennedy_Documents_Vizier_upstream_ui_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(JavascriptCellOutput,[{key:"componentDidMount",value:function componentDidMount(){var _this$props=this.props,code=_this$props.code,deps=_this$props.deps,css=_this$props.css,neededDeps=[];for(var i in deps)document.getElementById("import-"+deps[i])||(console.log("Need to download javascript: "+deps[i]),neededDeps.push(deps[i]));if(css)for(var i in css)if(!document.getElementById("import-"+css[i])&&(console.log("Need to download css: "+css[i]),!document.getElementById("import-"+css[i]))){var stylesheet=document.createElement("link");stylesheet.rel="stylesheet",stylesheet.href=css[i],stylesheet.id="import-"+css[i],document.body.appendChild(stylesheet)}var trigger=function trigger(){try{eval(code)}catch(error){console.log("Error running javascript: "+error),console.log("---- code ----"),console.log(code)}};neededDeps=neededDeps.reverse();var _loop=function(){var e=neededDeps[i],t=trigger;trigger=function(){if(document.getElementById("import-"+e))t();else{var n=document.createElement("script");n.src=e,n.id="import-"+e,n.onload=t,document.body.appendChild(n)}}};for(var i in neededDeps)_loop();trigger()}},{key:"render",value:function(){var e=this,t=this.props.html;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"output-content-html",ref:function(t){return e.div=t},dangerouslySetInnerHTML:{__html:t}})}}]),JavascriptCellOutput}(react__WEBPACK_IMPORTED_MODULE_5___default.a.Component);__webpack_exports__.a=JavascriptCellOutput},63:function(e,t,n){},75:function(e,t,n){},823:function(e,t,n){},839:function(e,t,n){},840:function(e,t,n){},843:function(e,t,n){},845:function(e,t,n){},92:function(e,t,n){}},[[1368,1,2]]]);
//# sourceMappingURL=main.b3027268.chunk.js.map